<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Cocoapodsä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜</title>
    <link href="/2022/04/08/Cocoapods%E4%BD%BF%E7%94%A8%E8%BF%87%E7%A8%8B%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <url>/2022/04/08/Cocoapods%E4%BD%BF%E7%94%A8%E8%BF%87%E7%A8%8B%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h3 id="ä¸€ã€Unable-to-create-a-source-with-URL-103-105-116-x40-x67-105-x74-104-x75-98-46-x63-111-x6d-CocoaPods-Specs-git"><a href="#ä¸€ã€Unable-to-create-a-source-with-URL-103-105-116-x40-x67-105-x74-104-x75-98-46-x63-111-x6d-CocoaPods-Specs-git" class="headerlink" title="ä¸€ã€Unable to create a source with URL &#103;&#105;&#116;&#x40;&#x67;&#105;&#x74;&#104;&#x75;&#98;&#46;&#x63;&#111;&#x6d;:CocoaPods/Specs.git"></a>ä¸€ã€Unable to create a source with URL <a href="mailto:&#103;&#105;&#116;&#x40;&#x67;&#105;&#x74;&#104;&#x75;&#98;&#46;&#x63;&#111;&#x6d;">&#103;&#105;&#116;&#x40;&#x67;&#105;&#x74;&#104;&#x75;&#98;&#46;&#x63;&#111;&#x6d;</a>:CocoaPods/Specs.git</h3><p>åœºæ™¯ï¼š</p><p>æ–°è£…çš„cocoapodsï¼Œåœ¨ä½¿ç”¨pod install çš„æ—¶å€™æŠ¥é”™è¯¯<code>Unable to create a source with URL git@github.com:CocoaPods/Specs.git</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">## Command</span></span><br><br>```<br>/usr/local/bin/pod install<br>```<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">## Report</span></span><br><br>* What did you do?<br><br>* What did you expect to happen?<br><br>* What happened instead?<br><span class="hljs-meta"></span><br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">## Stack</span></span><br><br>```<br>   CocoaPods : 1.11.3<br>        Ruby : ruby 2.6.8p205 (2021-07-07 revision 67951) [universal.arm64e-darwin21]<br>    RubyGems : 3.0.3.1<br>        Host : macOS 12.1 (21C52)<br>       Xcode : 13.3 (13E113)<br>         Git : git version 2.32.0 (Apple Git-132)<br>Ruby lib dir : /System/Library/Frameworks/Ruby.framework/Versions/2.6/usr/lib<br>Repositories : cocoapods - git - git@github.com:CocoaPods/Specs.git @ 13ae4e07a79a8d86e62f4fc627107e6c7c61f18f<br><br>               master - git - git@github.com:CocoaPods/Specs.git @ 58dcd4c8b08c75f2e6e05354a14f8e501ed3dcd6<br><br>```<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">## Plugins</span></span><br><br>```<br>cocoapods-deintegrate : 1.0.5<br>cocoapods-plugins     : 1.0.0<br>cocoapods-search      : 1.0.1<br>cocoapods-trunk       : 1.6.0<br>cocoapods-try         : 1.2.0<br>```<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">## Podfile</span></span><br><br>```ruby<br>source &#x27;git@github.com:CocoaPods/Specs.git&#x27;<br><br>platform :ios, &#x27;11.0&#x27;<br><br>use_modular_headers!<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">---- Swift libs</span><br>pod &#x27;Moya&#x27;,      &#x27;~&gt; 13.0.0&#x27;<br>pod &#x27;Kingfisher&#x27;,  &#x27;~&gt; 5.7.1&#x27;<br>pod &#x27;HandyJSON&#x27;,  &#x27;~&gt; 5.0.0&#x27;<br>pod &#x27;SnapKit&#x27;,    &#x27;~&gt; 5.0.1&#x27;<br>pod &#x27;IQKeyboardManagerSwift&#x27;, &#x27;~&gt; 6.4.2&#x27;<br>pod &#x27;KeychainAccess&#x27;, &#x27;~&gt; 3.2.0&#x27;<br>pod &#x27;HYToolKit&#x27;, :git =&gt; &quot;https://github.com/xtyHY/HYToolKit.git&quot;, :commit =&gt; &quot;48972ebc8de9bb169e23d13806a81eb896c5aee2&quot;<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">---- OBJC libs</span><br>pod &#x27;MBProgressHUD&#x27;, &#x27;~&gt; 1.1.0&#x27;<br>pod &#x27;WebViewJavascriptBridge&#x27;<br>pod &#x27;SGQRCode&#x27;, &#x27;~&gt; 3.0.1&#x27;<br>pod &#x27;TZImagePickerController&#x27;, &#x27;~&gt; 3.5.7&#x27;<br><br>pod &#x27;NIMSDK&#x27;, &#x27;~&gt; 6.9.1&#x27;<br>pod &#x27;Qiniu&#x27;, &#x27;~&gt; 7.2.6&#x27;<br>pod &#x27;MJRefresh&#x27;, &#x27;~&gt; 3.2.3&#x27;<br><br>pod &#x27;CryptoSwift&#x27;<br><br>target &#x27;MHCWarehouseStaffApp&#x27; do<br>end<br><br>target &#x27;MHCWarehouseStaffAppDev&#x27; do<br>end<br>```<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash"><span class="hljs-comment">## Error</span></span><br><br>```<br>RuntimeError - Unable to create a source with URL git@github.com:CocoaPods/Specs.git<br>/Library/Ruby/Gems/2.6.0/gems/cocoapods-1.11.3/lib/cocoapods/sources_manager.rb:61:in `create_source_with_url&#x27;<br>/Library/Ruby/Gems/2.6.0/gems/cocoapods-1.11.3/lib/cocoapods/sources_manager.rb:22:in `find_or_create_source_with_url&#x27;<br>/Library/Ruby/Gems/2.6.0/gems/cocoapods-1.11.3/lib/cocoapods/installer/analyzer.rb:178:in `block in sources&#x27;<br>/Library/Ruby/Gems/2.6.0/gems/cocoapods-1.11.3/lib/cocoapods/installer/analyzer.rb:177:in `map&#x27;<br>/Library/Ruby/Gems/2.6.0/gems/cocoapods-1.11.3/lib/cocoapods/installer/analyzer.rb:177:in `sources&#x27;<br>/Library/Ruby/Gems/2.6.0/gems/cocoapods-1.11.3/lib/cocoapods/installer/analyzer.rb:1077:in `block in resolve_dependencies&#x27;<br>/Library/Ruby/Gems/2.6.0/gems/cocoapods-1.11.3/lib/cocoapods/user_interface.rb:64:in `section&#x27;<br>/Library/Ruby/Gems/2.6.0/gems/cocoapods-1.11.3/lib/cocoapods/installer/analyzer.rb:1076:in `resolve_dependencies&#x27;<br>/Library/Ruby/Gems/2.6.0/gems/cocoapods-1.11.3/lib/cocoapods/installer/analyzer.rb:124:in `analyze&#x27;<br>/Library/Ruby/Gems/2.6.0/gems/cocoapods-1.11.3/lib/cocoapods/installer.rb:416:in `analyze&#x27;<br>/Library/Ruby/Gems/2.6.0/gems/cocoapods-1.11.3/lib/cocoapods/installer.rb:241:in `block in resolve_dependencies&#x27;<br>/Library/Ruby/Gems/2.6.0/gems/cocoapods-1.11.3/lib/cocoapods/user_interface.rb:64:in `section&#x27;<br>/Library/Ruby/Gems/2.6.0/gems/cocoapods-1.11.3/lib/cocoapods/installer.rb:240:in `resolve_dependencies&#x27;<br>/Library/Ruby/Gems/2.6.0/gems/cocoapods-1.11.3/lib/cocoapods/installer.rb:161:in `install!&#x27;<br>/Library/Ruby/Gems/2.6.0/gems/cocoapods-1.11.3/lib/cocoapods/command/install.rb:52:in `run&#x27;<br>/Library/Ruby/Gems/2.6.0/gems/claide-1.1.0/lib/claide/command.rb:334:in `run&#x27;<br>/Library/Ruby/Gems/2.6.0/gems/cocoapods-1.11.3/lib/cocoapods/command.rb:52:in `run&#x27;<br>/Library/Ruby/Gems/2.6.0/gems/cocoapods-1.11.3/bin/pod:55:in `&lt;top (required)&gt;&#x27;<br>/usr/local/bin/pod:23:in `load&#x27;<br>/usr/local/bin/pod:23:in `&lt;main&gt;&#x27;<br>```<br><br>â€•â€•â€• TEMPLATE END â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•â€•<br><br>[!] Oh no, an error occurred.<br><br>Search for existing GitHub issues similar to yours:<br>https://github.com/CocoaPods/CocoaPods/search?q=Unable+to+create+a+source+with+URL+git%40github.com%3ACocoaPods%2FSpecs.git&amp;type=Issues<br><br>If none exists, create a ticket, with the template displayed above, on:<br>https://github.com/CocoaPods/CocoaPods/issues/new<br><br>Be sure to first read the contributing guide for details on how to properly submit a ticket:<br>https://github.com/CocoaPods/CocoaPods/blob/master/CONTRIBUTING.md<br><br>Don&#x27;t forget to anonymize any private data!<br><br>Looking for related issues on cocoapods/cocoapods...<br> - [!] Unable to add a source with url `https://github.com/CocoaPods/Specs.git` named `master`.<br>   https://github.com/CocoaPods/CocoaPods/issues/4293 [closed] [96 comments]<br>   14 May 2021<br><br> - Using SSH URL in source command for master repo results in timeouts<br>   https://github.com/CocoaPods/CocoaPods/issues/9408 [closed] [31 comments]<br>   28 Jun 2020<br><br> - Issues Cloning Spec repo - GitHub taking a very long time to download changes to the Specs Repo<br>   https://github.com/CocoaPods/CocoaPods/issues/4989 [closed] [73 comments]<br>   15 Nov 2019<br><br>and 4 more at:<br>https://github.com/cocoapods/cocoapods/search?q=Unable%20to%20create%20a%20source%20with%20URL%20git%40github.com%3ACocoaPods%2FSpecs.git&amp;type=Issues&amp;utf8=âœ“<br></code></pre></td></tr></table></figure><p>è§£å†³æ–¹æ³•ï¼š</p><p>Â </p>]]></content>
    
    
    
    <tags>
      
      <tag>Cocoapods</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>item2å®‰è£…ä¼˜åŒ–è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜</title>
    <link href="/2022/04/08/item2%E5%AE%89%E8%A3%85%E4%BC%98%E5%8C%96%E8%BF%87%E7%A8%8B%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <url>/2022/04/08/item2%E5%AE%89%E8%A3%85%E4%BC%98%E5%8C%96%E8%BF%87%E7%A8%8B%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h3 id="ä¸€ã€å®‰è£…item2åŠä¼˜åŒ–"><a href="#ä¸€ã€å®‰è£…item2åŠä¼˜åŒ–" class="headerlink" title="ä¸€ã€å®‰è£…item2åŠä¼˜åŒ–"></a>ä¸€ã€å®‰è£…item2åŠä¼˜åŒ–</h3><p>å‚è€ƒï¼š<a href="https://segmentfault.com/a/1190000014992947">iTerm2 + Oh My Zsh æ‰“é€ èˆ’é€‚ç»ˆç«¯ä½“éªŒ</a></p><h3 id="äºŒã€item2å¸¸ç”¨å¿«æ·é”®"><a href="#äºŒã€item2å¸¸ç”¨å¿«æ·é”®" class="headerlink" title="äºŒã€item2å¸¸ç”¨å¿«æ·é”®"></a>äºŒã€item2å¸¸ç”¨å¿«æ·é”®</h3><ol><li><p>åˆ†å±</p><p>æ°´å¹³åˆ†å±ï¼šcommand + d</p><p>å‚ç›´åˆ†å±ï¼šcommand + shift + d </p></li><li><p>ä¸­æ–­</p><p>ctrl +c</p></li></ol><h3 id="ä¸‰ã€curl-7-Failed-to-connect-to-raw-githubusercontent-com-port-443-Connection-refused"><a href="#ä¸‰ã€curl-7-Failed-to-connect-to-raw-githubusercontent-com-port-443-Connection-refused" class="headerlink" title="ä¸‰ã€curl: (7) Failed to connect to raw.githubusercontent.com port 443: Connection refused"></a>ä¸‰ã€curl: (7) Failed to connect to raw.githubusercontent.com port 443: Connection refused</h3><p>å‚è€ƒ:  <a href="https://github.com/hawtim/hawtim.github.io/issues/10">Failed to connect to raw.githubusercontent.com port 443</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>Shell</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç”ŸæˆSSH keyå¹¶æ·»åŠ åˆ°Githubè´¦æˆ·</title>
    <link href="/2022/04/07/%E7%94%9F%E6%88%90SSH-key%E5%B9%B6%E6%B7%BB%E5%8A%A0%E5%88%B0Github%E8%B4%A6%E6%88%B7/"/>
    <url>/2022/04/07/%E7%94%9F%E6%88%90SSH-key%E5%B9%B6%E6%B7%BB%E5%8A%A0%E5%88%B0Github%E8%B4%A6%E6%88%B7/</url>
    
    <content type="html"><![CDATA[<p><font color= orange>æœ¬æ–‡æ‘˜è‡ª<a href="https://docs.github.com/cn/authentication/connecting-to-github-with-ssh">Github Docs</a></font></p><h3 id="ä¸€ã€æ£€æŸ¥æ˜¯å¦å­˜åœ¨SSH-key"><a href="#ä¸€ã€æ£€æŸ¥æ˜¯å¦å­˜åœ¨SSH-key" class="headerlink" title="ä¸€ã€æ£€æŸ¥æ˜¯å¦å­˜åœ¨SSH key"></a>ä¸€ã€æ£€æŸ¥æ˜¯å¦å­˜åœ¨SSH key</h3><ol><li><p>æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥<code>ls -al ~/.ssh</code>å‘½ä»¤ï¼ŒæŸ¥çœ‹æ˜¯å¦å·²ç»å­˜åœ¨SSH keyã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> ls -al ~/.ssh</span><br><span class="hljs-meta">#</span><span class="bash"> å¦‚æœå­˜åœ¨çš„è¯ï¼Œä¼šåˆ—å‡º.sshä¸­çš„æ–‡ä»¶çš„</span><br></code></pre></td></tr></table></figure></li><li><p>é»˜è®¤æƒ…å†µä¸‹å…¬é’¥çš„æ–‡ä»¶åæ˜¯ä»¥ä¸‹å‡ ç§å½¢å¼ä¹‹ä¸€ã€‚</p><ul><li><em>id_rsa.pub</em></li><li><em>id_ecdsa.pub</em></li><li><em>id_ed25519.pub</em></li></ul></li></ol><h3 id="äºŒã€ç”ŸæˆSSH-key"><a href="#äºŒã€ç”ŸæˆSSH-key" class="headerlink" title="äºŒã€ç”ŸæˆSSH key"></a>äºŒã€ç”ŸæˆSSH key</h3><ol><li><p>æ‰“å¼€ç»ˆç«¯è¾“å…¥ä¸‹é¢å‘½ä»¤ã€‚åˆ›å»ºä¸€ä¸ªæ–°çš„SSHå¯†é’¥ï¼Œå¹¶ä½¿ç”¨æä¾›çš„ç”µå­é‚®ä»¶ä½œä¸ºæ ‡ç­¾</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> ssh-keygen -t ed25519 -C <span class="hljs-string">&quot;your_email@example.com&quot;</span></span><br><span class="hljs-meta">#</span><span class="bash"> å¦‚æœä½ çš„ç³»ç»Ÿä¸æ”¯æŒed25519ç®—æ³•ï¼Œä½¿ç”¨ä¸‹é¢å‘½ä»¤</span><br><span class="hljs-meta">$</span><span class="bash"> ssh-keygen -t rsa -b 4096 -C <span class="hljs-string">&quot;your_email@example.com&quot;</span></span><br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">-t æŒ‡å®šå¯†é’¥ç±»å‹ï¼Œé»˜è®¤æ˜¯rsaï¼Œå¯ä»¥çœç•¥</span><br><span class="hljs-meta">#</span><span class="bash">-C è®¾ç½®æ³¨é‡Šæ–‡å­—ï¼Œæ¯”å¦‚é‚®ç®±</span><br></code></pre></td></tr></table></figure></li><li><p>è¾“å…¥ç©ºæ ¼ï¼Œè®¾ç½®é»˜è®¤çš„æ–‡ä»¶ä½ç½®ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">&gt;</span><span class="bash"> Generating public/private ed25519 key pair.</span><br><span class="hljs-meta">&gt;</span><span class="bash"> Enter file <span class="hljs-keyword">in</span> <span class="hljs-built_in">which</span> to save the key (/Users/tianyanqing/.ssh/id_ed25519):</span><br></code></pre></td></tr></table></figure></li><li><p>è¾“å…¥å¯†é’¥å¯†ç </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">&gt;</span><span class="bash"> Enter passphrase (empty <span class="hljs-keyword">for</span> no passphrase):</span><br><span class="hljs-meta">&gt;</span><span class="bash"> Enter same passphrase again:</span><br></code></pre></td></tr></table></figure><p>é€šè¿‡è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œå¯ä»¥æ›´æ”¹ç°æœ‰ç§é’¥çš„å¯†ç è€Œæ— éœ€é‡æ–°ç”Ÿæˆå¯†é’¥å¯¹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> ssh-keygen -p -f ~/.ssh/id_ed25519</span><br><span class="hljs-meta">&gt;</span><span class="bash"> Enter old passphrase: [Type old passphrase]</span><br><span class="hljs-meta">&gt;</span><span class="bash"> Key has comment <span class="hljs-string">&#x27;your_email@example.com&#x27;</span></span><br><span class="hljs-meta">&gt;</span><span class="bash"> Enter new passphrase (empty <span class="hljs-keyword">for</span> no passphrase): [Type new passphrase]</span><br><span class="hljs-meta">&gt;</span><span class="bash"> Enter same passphrase again: [Repeat the new passphrase]</span><br><span class="hljs-meta">&gt;</span><span class="bash"> Your identification has been saved with the new passphrase.</span><br></code></pre></td></tr></table></figure></li></ol><h3 id="ä¸‰ã€å°†SSH-keyæ·»åŠ åˆ°ssh-agent"><a href="#ä¸‰ã€å°†SSH-keyæ·»åŠ åˆ°ssh-agent" class="headerlink" title="ä¸‰ã€å°†SSH keyæ·»åŠ åˆ°ssh-agent"></a>ä¸‰ã€å°†SSH keyæ·»åŠ åˆ°ssh-agent</h3><ol><li><p>åœ¨åå°å¯åŠ¨sshä»£ç†</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">eval</span> <span class="hljs-string">&quot;<span class="hljs-subst">$(ssh-agent -s)</span>&quot;</span></span><br><span class="hljs-meta">&gt;</span><span class="bash"> Agent pid 59566</span><br></code></pre></td></tr></table></figure></li><li><p>å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯MacOS Sierra 10.12.2æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œåˆ™éœ€è¦ä¿®æ”¹<code>ã€œ/.ssh/config</code>æ–‡ä»¶ä»¥è‡ªåŠ¨å°†é”®åŠ è½½åˆ°SSH-Agentä¸­ï¼Œå¹¶åœ¨é’¥åŒ™ä¸²ä¸­å­˜å‚¨å¯†ç </p><ul><li><p>æ£€æŸ¥é»˜è®¤ä½ç½®æ˜¯å¦å­˜åœ¨<code>~/.ssh/config</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> open ~/.ssh/config</span><br><span class="hljs-meta">&gt;</span><span class="bash"> The file /Users/you/.ssh/config does not exist.</span><br></code></pre></td></tr></table></figure></li><li><p>å¦‚æœä¸å­˜åœ¨ï¼Œåˆ›å»º</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> touch ~/.ssh/config</span><br></code></pre></td></tr></table></figure></li><li><p>æ‰“å¼€~/.ssh/configï¼ŒæŒ‰ç…§ä¸‹é¢ä¿®æ”¹æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">Host *<br>  AddKeysToAgent yes<br>  UseKeychain yes<br>  IdentityFile ~/.ssh/id_ed25519<br></code></pre></td></tr></table></figure></li></ul></li><li><p>å°†SSHç§é’¥æ·»åŠ åˆ°SSH-Agentå¹¶åœ¨é’¥åŒ™ä¸²ä¸­å­˜å‚¨å¯†ç ã€‚å¦‚æœæ‚¨åˆ›å»ºäº†ä¸åŒåç§°çš„å¯†é’¥ï¼Œæˆ–è€…æ‚¨è¦æ·»åŠ ä¸åŒåç§°çš„ç°æœ‰å¯†é’¥ï¼Œè¯·å°†å‘½ä»¤ä¸­çš„ <em>id_ed25519</em> æ›¿æ¢ä¸ºæ‚¨çš„ç§é’¥æ–‡ä»¶çš„åç§°</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> ssh-add -K ~/.ssh/id_ed25519</span><br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼š</p><p>MacOS Monterey (12.0), the <code>-K</code> and <code>-A</code> flags are deprecated and have been replaced by the <code>--apple-use-keychain</code> and <code>--apple-load-keychain</code> flags, respectively.</p></blockquote></li></ol><h3 id="å››ã€å°†SSH-keyæ·»åŠ åˆ°Githubè´¦æˆ·"><a href="#å››ã€å°†SSH-keyæ·»åŠ åˆ°Githubè´¦æˆ·" class="headerlink" title="å››ã€å°†SSH keyæ·»åŠ åˆ°Githubè´¦æˆ·"></a>å››ã€å°†SSH keyæ·»åŠ åˆ°Githubè´¦æˆ·</h3><ol><li><p>å°†SSHå…¬é’¥å¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> pbcopy &lt; ~/.ssh/id_ed25519.pub</span><br></code></pre></td></tr></table></figure><blockquote><p>æç¤ºï¼šå¦‚æœpbcopy ä¸å¯ç”¨ï¼Œå¯æ‰¾åˆ°éšè—çš„.sshæ–‡ä»¶å¤¹ï¼Œåœ¨å¸¸ç”¨çš„æ–‡æœ¬ç¼–è¾‘å™¨ä¸­æ‰“å¼€è¯¥æ–‡ä»¶ï¼Œå¹¶å°†å…¶å¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚</p></blockquote></li><li><p>åœ¨é¡µé¢çš„å³ä¸Šè§’ï¼Œå•å‡»æ‚¨çš„ä¸ªäººèµ„æ–™ç…§ç‰‡ï¼Œç„¶åå•å‡» <strong>Settings</strong>ï¼Œåœ¨å³ä¾§åˆ—è¡¨çš„Accessä¸­æ‰¾åˆ°*<em>SSH and GPG keys</em>ã€‚</p></li><li><p>ç‚¹å‡»<strong>New SSH key</strong>ã€‚</p></li><li><p>åœ¨â€œTitleâ€æ ‡é¢˜ä¸­ï¼Œä¸ºæ–°å¯†é’¥æ·»åŠ è¡¨å±æ€§æ ‡ç­¾ã€‚çœ‹è‡ªå·±å–œå¥½éšä¾¿å†™å°±å¥½ã€‚</p></li><li><p>å°†å¯†é’¥ç²˜è´´åˆ°â€Keyâ€ä¸­ã€‚</p></li><li><p>ç‚¹å‡»<strong>Add SSH key</strong>æ·»åŠ å¯†é’¥ã€‚</p></li></ol><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202204071721383.png" alt="æ·»åŠ SSH" style="zoom:50%;margin-left:10px" /><h3 id="äº”ã€æµ‹è¯•SSHé“¾æ¥"><a href="#äº”ã€æµ‹è¯•SSHé“¾æ¥" class="headerlink" title="äº”ã€æµ‹è¯•SSHé“¾æ¥"></a>äº”ã€æµ‹è¯•SSHé“¾æ¥</h3><ol><li><p>æ‰“å¼€ç»ˆç«¯è¾“å…¥ä¸‹é¢å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> ssh -T git@github.com</span><br></code></pre></td></tr></table></figure><p>ä½ å¯èƒ½ä¼šçœ‹åˆ°ä¸‹é¢çš„è­¦å‘Š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">&gt;</span><span class="bash"> The authenticity of host <span class="hljs-string">&#x27;github.com (IP ADDRESS)&#x27;</span> can<span class="hljs-string">&#x27;t be established.</span></span><br><span class="hljs-meta">&gt;</span><span class="bash"><span class="hljs-string"> RSA key fingerprint is SHA256:nThbg6kXUpJWGl7E1IGOCspRomTxdCARLviKw6E5SY8.</span></span><br><span class="hljs-meta">&gt;</span><span class="bash"><span class="hljs-string"> Are you sure you want to continue connecting (yes/no)?</span></span><br></code></pre></td></tr></table></figure></li><li><p>éªŒè¯æ‰€çœ‹åˆ°æ¶ˆæ¯ä¸­çš„æŒ‡çº¹æ˜¯å¦åŒ¹é…ï¼Œå¦‚æœæ˜¯è¾“å…¥<code>yes</code>å³å¯ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">Hi GHTYQ! You&#x27;ve successfully authenticated, but GitHub does not provide shell access.<br></code></pre></td></tr></table></figure><blockquote><p>å…¬é’¥æŒ‡çº¹ï¼šå…¬é’¥æŒ‡çº¹å¯ç”¨äºéªŒè¯ä¸è¿œç¨‹æœåŠ¡å™¨çš„è¿æ¥</p></blockquote></li></ol>]]></content>
    
    
    <categories>
      
      <category>Shell</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Shell</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Markdownçš„åŸºæœ¬ç”¨æ³•</title>
    <link href="/2022/03/30/Markdown%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/"/>
    <url>/2022/03/30/Markdown%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h3 id="ä¸€ã€æ ‡é¢˜ï¼ˆä¸€å…±å…­çº§æ ‡é¢˜ï¼‰"><a href="#ä¸€ã€æ ‡é¢˜ï¼ˆä¸€å…±å…­çº§æ ‡é¢˜ï¼‰" class="headerlink" title="ä¸€ã€æ ‡é¢˜ï¼ˆä¸€å…±å…­çº§æ ‡é¢˜ï¼‰"></a>ä¸€ã€æ ‡é¢˜ï¼ˆä¸€å…±å…­çº§æ ‡é¢˜ï¼‰</h3><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs clean">#ä¸€çº§æ ‡é¢˜<br>##äºŒçº§æ ‡é¢˜<br>###ä¸‰çº§æ ‡é¢˜<br>####å››çº§æ ‡é¢˜<br>#####äº”çº§æ ‡é¢˜<br>######å…­çº§æ ‡é¢˜<br></code></pre></td></tr></table></figure><h3 id="äºŒã€æ–œä½“-åŠ ç²—"><a href="#äºŒã€æ–œä½“-åŠ ç²—" class="headerlink" title="äºŒã€æ–œä½“/åŠ ç²—"></a>äºŒã€æ–œä½“/åŠ ç²—</h3><ol><li><p>æ–œä½“<br>åœ¨æ–‡å­—å‰åå„å®¶ä¸€ä¸ª<code>*</code>å°±ğŸ‘Œ<br><em>æ–œä½“</em></p></li><li><p>åŠ ç²—<br>åœ¨æ–‡å­—å‰åå„åŠ ä¸¤ä¸ª<code>**</code><br><strong>åŠ ç²—</strong></p></li><li><p>æ–œä½“åŠ ç²—<br>åœ¨æ–‡å­—å‰åå„åŠ <code>***</code><br><em><strong>æ–œä½“åŠ ç²—</strong></em></p></li></ol><h3 id="ä¸‰ã€åˆ é™¤"><a href="#ä¸‰ã€åˆ é™¤" class="headerlink" title="ä¸‰ã€åˆ é™¤"></a>ä¸‰ã€åˆ é™¤</h3><p>åœ¨è¦åˆ é™¤çš„æ–‡å­—å‰ååŠ ~~<br><del>è¦åˆ é™¤çš„æ–‡å­—</del></p><h3 id="å››ã€åˆ†å‰²çº¿"><a href="#å››ã€åˆ†å‰²çº¿" class="headerlink" title="å››ã€åˆ†å‰²çº¿"></a>å››ã€åˆ†å‰²çº¿</h3><p>åˆ†å‰²çº¿çš„ä¸‰ç§å½¢å¼<br>***  â€”  ****</p><hr><h3 id="äº”ã€å¼•ç”¨"><a href="#äº”ã€å¼•ç”¨" class="headerlink" title="äº”ã€å¼•ç”¨"></a>äº”ã€å¼•ç”¨</h3><ul><li>ä½¿ç”¨&gt;+å¼•ç”¨çš„è¯ï¼Œæ•ˆæœå¦‚ä¸‹<blockquote><p>è¿™æ˜¯ä¸€æ®µå¼•ç”¨çš„è¯</p></blockquote></li><li>ä½¿ç”¨ä¸¤ä¸ª`</li></ul><p><code>å¼•ç”¨</code></p><h3 id="å…­ã€åŒºå—å¼•ç”¨"><a href="#å…­ã€åŒºå—å¼•ç”¨" class="headerlink" title="å…­ã€åŒºå—å¼•ç”¨"></a>å…­ã€åŒºå—å¼•ç”¨</h3><p>ä½¿ç”¨ä¸¤ä¸ª``` åŒ…å«è¦å¼•ç”¨çš„åŒºåŸŸ</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs clean">```<br>### ä¸ƒã€è¡¨æ ¼<br><br></code></pre></td></tr></table></figure><table><thead><tr><th>ç¬¬ä¸€é¡¹</th><th>ç¬¬äºŒé¡¹</th></tr></thead><tbody><tr><td>ç¬¬ä¸€é¡¹å†…å®¹</td><td>ç¬¬äºŒé¡¹å†…å®¹</td></tr></tbody></table><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs elixir">|   ç¬¬ä¸€é¡¹   |   ç¬¬äºŒé¡¹   |<br>| <span class="hljs-symbol">:--------</span>: | <span class="hljs-symbol">:--------</span>: |<br>| ç¬¬ä¸€é¡¹å†…å®¹ | ç¬¬äºŒé¡¹å†…å®¹ |<br><br><span class="hljs-comment">### å…«ã€æ·»åŠ é“¾æ¥</span><br><br></code></pre></td></tr></table></figure><p>å›¾ç‰‡é“¾æ¥ï¼š![image](å›¾ç‰‡åœ°å€ï¼‰<br>ç½‘å€é“¾æ¥ï¼š<a href="%E9%93%BE%E6%8E%A5%E5%9C%B0%E5%9D%80">æ˜¾ç¤ºåç§°</a> æˆ–è€…ä½¿ç”¨&lt;ç½‘å€é“¾æ¥&gt;</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs gams">[æˆ‘çš„GitHubåœ°å€](https:<span class="hljs-comment">//github.com/GHTYQ)</span><br>&lt;https:<span class="hljs-comment">//github.com/GHTYQ&gt;</span><br>  &lt;img src=<span class="hljs-string">&quot;https://upload-images.jianshu.io/upload_images/4189530-a85d923709d9dcf2.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;</span> alt=<span class="hljs-string">&quot;timg.jpg&quot;</span> style=<span class="hljs-string">&quot;zoom: 200%; margin-left: 0px;&quot;</span> /&gt; <br><br>### ä¹ã€æ•°å­¦å…¬å¼<br><br>&gt; å¦‚æœä½¿ç”¨çš„æ˜¯Typoraï¼Œè¯·ç¡®å®šè®¾ç½®ä¸­å†…è”å…¬å¼æ˜¯å¼€å¯çŠ¶æ€<br><br><span class="hljs-number">1.</span> å¹³æ–¹<br><br>   <span class="hljs-symbol">$</span>\<span class="hljs-built_in">sqrt</span> [a]&#123;b&#125;<span class="hljs-symbol">$</span><br><br>   ```latex<br>   <span class="hljs-symbol">$</span>\<span class="hljs-built_in">sqrt</span> [a]&#123;b&#125;<span class="hljs-symbol">$</span><br></code></pre></td></tr></table></figure><ol start="2"><li><p>ä¸Šæ ‡ä¸ä¸‹æ ‡</p><p>$a^n$</p><p>$a_n$</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs latex">$a^n$<br>$a_n$<br></code></pre></td></tr></table></figure></li><li><p>åˆ†å¼</p><p>$\frac ab$</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex">\$frac ab$<br></code></pre></td></tr></table></figure></li><li><p>å¯¹æ•°</p><p>$\log_2(x)$</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs latex">$\log_2(x)$<br></code></pre></td></tr></table></figure></li></ol><p>è¿™é‡Œç®€å•åˆ—ä¸¾å‡ ä¸ªï¼Œåé¢ç”¨åˆ°å…¶ä»–çš„ä¼šç»§ç»­å¢æ·»ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Markdown</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Markdown</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¿«é€Ÿå¹‚</title>
    <link href="/2022/03/30/%E7%AE%97%E6%B3%95/%E5%BF%AB%E9%80%9F%E5%B9%82/"/>
    <url>/2022/03/30/%E7%AE%97%E6%B3%95/%E5%BF%AB%E9%80%9F%E5%B9%82/</url>
    
    <content type="html"><![CDATA[<h3 id="å¿«é€Ÿå¹‚"><a href="#å¿«é€Ÿå¹‚" class="headerlink" title="å¿«é€Ÿå¹‚"></a>å¿«é€Ÿå¹‚</h3><p>å¿«é€Ÿå¹‚ï¼ŒäºŒè¿›åˆ¶å–å¹‚ï¼ˆBinary Exponentiationï¼Œä¹Ÿç§°å¹³æ–¹æ³•ï¼‰ï¼Œæ˜¯ä¸€ä¸ªåœ¨O(log n)çš„æ—¶é—´å†…è®¡ç®—a^nçš„å°æŠ€å·§</p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://oi-wiki.org/math/quick-pow/">OI Wiki å¿«é€Ÿå¹‚</a></p>]]></content>
    
    
    <categories>
      
      <category>ç®—æ³•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SDWebImage</title>
    <link href="/2022/03/20/iOS/%E5%A4%87%E8%80%83/%E4%B8%89%E6%96%B9%E5%BA%93/SDWebImage/"/>
    <url>/2022/03/20/iOS/%E5%A4%87%E8%80%83/%E4%B8%89%E6%96%B9%E5%BA%93/SDWebImage/</url>
    
    <content type="html"><![CDATA[<p>1.ä¸‹è½½å›¾ç‰‡ä¸”éœ€è¦è·å–ä¸‹è½½è¿›åº¦</p>]]></content>
    
    
    <categories>
      
      <category>iOS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Third</tag>
      
      <tag>å¤‡è€ƒ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å•ä¾‹æ¨¡å¼</title>
    <link href="/2022/03/18/iOS/%E5%A4%87%E8%80%83/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"/>
    <url>/2022/03/18/iOS/%E5%A4%87%E8%80%83/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<p>å•ä¾‹æ¨¡å¼çš„ä½œç”¨ï¼š</p><ul><li>å¯ä»¥ä¿è¯åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ï¼Œä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œè€Œä¸”è¯¥å®ä¾‹æ˜“äºä¾›å¤–ç•Œè®¿é—®</li><li>æ–¹ä¾¿æ§åˆ¶å®ä¾‹ä¸ªæ•°ï¼ŒèŠ‚çº¦ç³»ç»Ÿèµ„æº</li></ul><p>ä¸€èˆ¬åº”ç”¨ä¸­çš„å•ä¾‹å†™æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// ä¼ªä»£ç <br>+(instancetype)shareInstance&#123;<br>    static Category *instance;<br>    static dispatch_once_t onceToken;<br>    dispatch_once(&amp;onceToken, ^&#123;<br>        instance = [[Category alloc] init];<br>    &#125;);<br>    return  instance;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢è¿™ä¸ªå†™æ³•åªèƒ½ä¿è¯ä½¿ç”¨shareInstanceæ–¹æ³•åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œä¸ºäº†ä¿è¯æ‰€æœ‰çš„åˆ›å»ºæ–¹æ³•åˆ›å»ºå‡ºæ¥çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥æ‰ç”¨ä¸‹é¢çš„å†™æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">#import &lt;Foundation/Foundation.h&gt;<br><br>NS_ASSUME_NONNULL_BEGIN<br><br>@interface TTool : NSObject&lt;NSCopying,NSMutableCopying&gt;<br>+(instancetype)share;<br>@end<br><br>NS_ASSUME_NONNULL_END<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">#import &quot;TTool.h&quot;<br>@implementation TTool<br>static TTool * _instance;<br>+ (instancetype)allocWithZone:(struct _NSZone *)zone&#123;<br>    static dispatch_once_t onceToken;<br>    dispatch_once(&amp;onceToken, ^&#123;<br>        _instance = [super allocWithZone:zone];<br>    &#125;);<br>    return  _instance;<br>&#125;<br>+ (instancetype)share&#123;<br>    return  [[self alloc] init];<br>&#125;<br>- (nonnull id)copyWithZone:(nullable NSZone *)zone &#123;<br>    return _instance;<br>&#125;<br>- (nonnull id)mutableCopyWithZone:(nullable NSZone *)zone &#123;<br>    return _instance;<br>&#125;<br>@end<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">TTool *t1 = [[TTool alloc] init];<br>TTool *t2 = [TTool share];<br>TTool *t3 = [t1 copy];<br>TTool *t4 = [t1 mutableCopy];<br>NSLog(@&quot;t1:%p--t2:%p--t3:%p--t4:%p&quot;,t1,t2,t3,t4);<br>// log<br>t1:0x6000029084f0--t2:0x6000029084f0--t3:0x6000029084f0--t4:0x6000029084f0<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>iOS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å¤‡è€ƒ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ’åºç®—æ³•</title>
    <link href="/2022/03/17/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/"/>
    <url>/2022/03/17/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p>å¸¸è§æ’åºç®—æ³•æ€»ç»“</p><p>æ—¶é—´å¤æ‚åº¦ï¼š</p><p>ç©ºé—´å¤æ‚åº¦ï¼š</p><p>ç¨³å®šæ€§ï¼š</p><h3 id="ä¸€ã€å†’æ³¡æ’åºï¼ˆBubble-Sortï¼‰"><a href="#ä¸€ã€å†’æ³¡æ’åºï¼ˆBubble-Sortï¼‰" class="headerlink" title="ä¸€ã€å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰"></a>ä¸€ã€å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰</h3><p>å†’æ³¡æ’åºæ˜¯ä¸€ç§ç®€å•çš„æ’åºç®—æ³•ï¼Œå®ƒé‡å¤åœ°èµ°è®¿è¦æ’åºçš„æ•°åˆ—ï¼Œæ¯æ¬¡æ¯”è¾ƒç›¸é‚»çš„ä¸¤ä¸ªå…ƒç´ ï¼Œå¦‚æœå®ƒä»¬çš„é¡ºåºé”™è¯¯å°±æŠŠå®ƒä»¬äº¤æ¢è¿‡æ¥ã€‚èµ°è®¿æ•°åˆ—çš„å·¥ä½œæ˜¯é‡å¤è¿›è¡Œç›´åˆ°æ²¡æœ‰éœ€è¦äº¤æ¢ã€‚è¿™ä¸ªç®—æ³•çš„åå­—ç”±æ¥æ˜¯å› ä¸ºè¶Šå°çš„å…ƒç´ ä¼šç»è¿‡äº¤æ¢æ…¢æ…¢â€œæµ®â€åˆ°æ•°åˆ—çš„é¡¶ç«¯ã€‚</p><h4 id="1-ç®—æ³•æ­¥éª¤"><a href="#1-ç®—æ³•æ­¥éª¤" class="headerlink" title="1. ç®—æ³•æ­¥éª¤"></a>1. ç®—æ³•æ­¥éª¤</h4><ul><li><p>æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ã€‚å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼Œå°±äº¤æ¢ä»–ä»¬ä¸¤ä¸ªã€‚</p></li><li><p>å¯¹æ¯ä¸€å¯¹ç›¸é‚»çš„å…ƒç´ ä½œåŒæ ·çš„å·¥ä½œï¼Œä»å¼€å§‹ç¬¬ä¸€å¯¹åˆ°ç»“å°¾çš„æœ€åä¸€å¯¹ã€‚è¿™æ­¥å®Œæˆåï¼Œæœ€åçš„å…ƒç´ ä¼šæ˜¯æœ€å¤§çš„æ•°ã€‚</p></li><li><p>é’ˆå¯¹æ‰€æœ‰çš„å…ƒç´ é‡å¤ä»¥ä¸Šæ­¥éª¤ï¼Œé™¤äº†æœ€åä¸€ä¸ªã€‚</p></li><li><p>æŒç»­æ¯æ¬¡å¯¹è¶Šæ¥è¶Šå°‘çš„å…ƒç´ é‡å¤ä¸Šé¢çš„æ­¥éª¤ï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•ä¸€å¯¹æ•°å­—éœ€è¦æ¯”è¾ƒã€‚</p></li></ul><h4 id="2-åŠ¨å›¾æ¼”ç¤º"><a href="#2-åŠ¨å›¾æ¼”ç¤º" class="headerlink" title="2. åŠ¨å›¾æ¼”ç¤º"></a>2. åŠ¨å›¾æ¼”ç¤º</h4><img src="https://www.runoob.com/wp-content/uploads/2019/03/bubbleSort.gif" alt="å†’æ³¡æ’åº" style="zoom:120%;margin-left:10px" /><h4 id="3-OCè¯­è¨€å®ç°"><a href="#3-OCè¯­è¨€å®ç°" class="headerlink" title="3. OCè¯­è¨€å®ç°"></a>3. OCè¯­è¨€å®ç°</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">-(NSArray*)bobble_sort:(NSArray*)array&#123;<br>    NSMutableArray * mutArr = [[NSMutableArray alloc]initWithArray:array];<br>  // éœ€è¦æ¯”è¾ƒå¤šå°‘è¶Ÿ<br>    for (int i = 0; i&lt;mutArr.count-1; i++) &#123;<br>       // æ¯ä¸€è¶Ÿæ¯”è¾ƒå¤šå°‘æ¬¡<br>        for (int j = 0; j&lt;mutArr.count-1-i; j++) &#123;<br>            if ([mutArr[j] intValue]&gt;[mutArr[j+1] intValue]) &#123;<br>                [mutArr exchangeObjectAtIndex:j withObjectAtIndex:j+1];<br>            &#125;<br>        &#125;<br>    &#125;<br>    return  [mutArr copy];<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-æ—¶é—´å¤æ‚åº¦ï¼šO-N-2"><a href="#4-æ—¶é—´å¤æ‚åº¦ï¼šO-N-2" class="headerlink" title="4. æ—¶é—´å¤æ‚åº¦ï¼šO(N^2)"></a>4. æ—¶é—´å¤æ‚åº¦ï¼šO(N^2)</h4><h4 id="5-ç©ºé—´å¤æ‚åº¦ï¼šO-1"><a href="#5-ç©ºé—´å¤æ‚åº¦ï¼šO-1" class="headerlink" title="5. ç©ºé—´å¤æ‚åº¦ï¼šO(1)"></a>5. ç©ºé—´å¤æ‚åº¦ï¼šO(1)</h4><h3 id="äºŒã€é€‰æ‹©æ’åº"><a href="#äºŒã€é€‰æ‹©æ’åº" class="headerlink" title="äºŒã€é€‰æ‹©æ’åº"></a>äºŒã€é€‰æ‹©æ’åº</h3><p>é€‰æ‹©æ’åºæ˜¯ä¸€ç§ç›´è§‚çš„æ’åºç®—æ³•</p><h4 id="1-ç®—æ³•æ­¥éª¤-1"><a href="#1-ç®—æ³•æ­¥éª¤-1" class="headerlink" title="1. ç®—æ³•æ­¥éª¤"></a>1. ç®—æ³•æ­¥éª¤</h4><ul><li><p>é¦–å…ˆåœ¨æœªæ’åºåºåˆ—ä¸­æ‰¾åˆ°æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œå­˜æ”¾åˆ°æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®</p></li><li><p>å†ä»å‰©ä½™æœªæ’åºå…ƒç´ ä¸­å¯»æ‰¾æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œç„¶åæ”¾åˆ°å·²æ’åºåºåˆ—çš„æœ«å°¾ã€‚</p></li><li><p>ä»¥æ­¤ç±»æ¨ï¼ŒçŸ¥é“æ‰€æœ‰å…ƒç´ æ’åºå®Œæ¯•ã€‚</p></li></ul><h4 id="2-åŠ¨å›¾æ¼”ç¤º-1"><a href="#2-åŠ¨å›¾æ¼”ç¤º-1" class="headerlink" title="2. åŠ¨å›¾æ¼”ç¤º"></a>2. åŠ¨å›¾æ¼”ç¤º</h4><img src="https://www.runoob.com/wp-content/uploads/2019/03/selectionSort.gif" alt="é€‰æ‹©æ’åº" style="zoom:120%;margin-left:10px" /><h4 id="3-OCè¯­è¨€å®ç°-1"><a href="#3-OCè¯­è¨€å®ç°-1" class="headerlink" title="3. OCè¯­è¨€å®ç°"></a>3. OCè¯­è¨€å®ç°</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">-(NSArray*)selection_sort:(NSArray*)array&#123;<br>    NSMutableArray * mutArr = [[NSMutableArray alloc]initWithArray:array];<br>    for (int i = 0; i&lt;mutArr.count - 1; i++) &#123;<br>        int min = i;<br>        for (int j = i+1; j&lt;mutArr.count; j++) &#123;<br>            if([mutArr[min] intValue] &gt; [mutArr[j] intValue])&#123;<br>                min = j;<br>            &#125;<br>        &#125;<br>        [mutArr exchangeObjectAtIndex:i withObjectAtIndex:min];<br>    &#125;<br>    return  mutArr;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-æ—¶é—´å¤æ‚åº¦ï¼šO-N-2-1"><a href="#4-æ—¶é—´å¤æ‚åº¦ï¼šO-N-2-1" class="headerlink" title="4. æ—¶é—´å¤æ‚åº¦ï¼šO(N^2)"></a>4. æ—¶é—´å¤æ‚åº¦ï¼šO(N^2)</h4><h4 id="5-ç©ºé—´å¤æ‚åº¦ï¼šO-1-1"><a href="#5-ç©ºé—´å¤æ‚åº¦ï¼šO-1-1" class="headerlink" title="5. ç©ºé—´å¤æ‚åº¦ï¼šO(1)"></a>5. ç©ºé—´å¤æ‚åº¦ï¼šO(1)</h4><h3 id="ä¸‰ã€æ’å…¥æ’åº"><a href="#ä¸‰ã€æ’å…¥æ’åº" class="headerlink" title="ä¸‰ã€æ’å…¥æ’åº"></a>ä¸‰ã€æ’å…¥æ’åº</h3>]]></content>
    
    
    <categories>
      
      <category>ç®—æ³•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦</title>
    <link href="/2022/03/17/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E7%9A%84%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%92%8C%E7%A9%BA%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6/"/>
    <url>/2022/03/17/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95%E7%9A%84%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%92%8C%E7%A9%BA%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6/</url>
    
    <content type="html"><![CDATA[<h3 id="ä¸€ã€æ—¶é—´å¤æ‚åº¦"><a href="#ä¸€ã€æ—¶é—´å¤æ‚åº¦" class="headerlink" title="ä¸€ã€æ—¶é—´å¤æ‚åº¦"></a>ä¸€ã€æ—¶é—´å¤æ‚åº¦</h3><h3 id="äºŒã€ç©ºé—´å¤æ‚åº¦"><a href="#äºŒã€ç©ºé—´å¤æ‚åº¦" class="headerlink" title="äºŒã€ç©ºé—´å¤æ‚åº¦"></a>äºŒã€ç©ºé—´å¤æ‚åº¦</h3>]]></content>
    
    
    <categories>
      
      <category>ç®—æ³•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>GCD</title>
    <link href="/2022/03/12/iOS/%E5%A4%87%E8%80%83/%E5%A4%9A%E7%BA%BF%E7%A8%8B/GCD/"/>
    <url>/2022/03/12/iOS/%E5%A4%87%E8%80%83/%E5%A4%9A%E7%BA%BF%E7%A8%8B/GCD/</url>
    
    <content type="html"><![CDATA[<h3 id="ä¸€ã€åŸºç¡€æ¦‚å¿µ"><a href="#ä¸€ã€åŸºç¡€æ¦‚å¿µ" class="headerlink" title="ä¸€ã€åŸºç¡€æ¦‚å¿µ"></a>ä¸€ã€åŸºç¡€æ¦‚å¿µ</h3><h4 id="1-è¿›ç¨‹ä¸çº¿ç¨‹"><a href="#1-è¿›ç¨‹ä¸çº¿ç¨‹" class="headerlink" title="1. è¿›ç¨‹ä¸çº¿ç¨‹"></a>1. è¿›ç¨‹ä¸çº¿ç¨‹</h4><ol><li><p>è¿›ç¨‹</p><p>è¿›ç¨‹æ˜¯æŒ‡ç³»ç»Ÿä¸­<font color=orange>æ­£åœ¨è¿è¡Œ</font>çš„ä¸€ä¸ªåº”ç”¨ç¨‹åº</p><p>æ¯ä¸ªè¿›ç¨‹ä¹‹é—´æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œæ¯ä¸ªè¿›ç¨‹å‡è¿è¡Œåœ¨ä¸“ç”¨ä¸”å—ä¿æŠ¤çš„å†…å­˜ç©ºé—´å†…</p><p>æ¯”å¦‚åŒæ—¶æ‰“å¼€è¿…é›·ã€Xcodeï¼Œç³»ç»Ÿå°±ä¼šåˆ†åˆ«å¯åŠ¨ä¸¤ä¸ªè¿›ç¨‹</p></li><li><p>çº¿ç¨‹</p><p>1ä¸ªè¿›ç¨‹æƒ³è¦æ‰§è¡Œä»»åŠ¡ï¼Œå¿…é¡»å¾—æœ‰çº¿ç¨‹ï¼ˆæ¯1ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€æ¡çº¿ç¨‹ï¼‰</p><p>ä¸€ä¸ªè¿›ç¨‹ï¼ˆç¨‹åºï¼‰ä¸­çš„æ‰€æœ‰ä»»åŠ¡éƒ½æ˜¯åœ¨çº¿ç¨‹ä¸­æ‰§è¡Œ</p></li><li><p>çº¿ç¨‹çš„ä¸²è¡Œ</p><p>1æ¡çº¿ç¨‹ä¸­çš„ä»»åŠ¡æ˜¯<font color=orange>ä¸²è¡Œ</font>æ‰§è¡Œçš„ï¼ˆå¦‚æœä¸€ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œé‚£ä¹ˆåªèƒ½ä¸€ä¸ªä¸€ä¸ªçš„æŒ‰é¡ºåºæ‰§è¡Œï¼‰</p></li><li><p>è¿›ç¨‹ä¸çº¿ç¨‹çš„æ¯”è¾ƒ</p><p>çº¿ç¨‹æ˜¯CPUè°ƒç”¨ï¼ˆæ‰§è¡Œä»»åŠ¡ï¼‰çš„æœ€å°å•ä½</p><p>è¿›ç¨‹æ˜¯CPUåˆ†é…èµ„æºå’Œè°ƒåº¦çš„å•ä½</p><p>ä¸€ä¸ªç¨‹åºå¯ä»¥å¯¹åº”å¤šä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ï¼ˆè‡³å°‘è¦æœ‰ä¸€ä¸ªçº¿ç¨‹ï¼‰</p><p>åŒä¸€ä¸ªè¿›ç¨‹å†…çš„çº¿ç¨‹å…±äº«è¿›ç¨‹çš„èµ„æº</p></li></ol><h4 id="2-å¤šçº¿ç¨‹"><a href="#2-å¤šçº¿ç¨‹" class="headerlink" title="2. å¤šçº¿ç¨‹"></a>2. å¤šçº¿ç¨‹</h4><p>1ä¸ªè¿›ç¨‹ä¸­å¯ä»¥å¼€å¯å¤šæ¡çº¿ç¨‹ï¼Œå¤šæ¡çº¿ç¨‹å¯ä»¥<font color= orange>å¹¶è¡Œ</font>æ‰§è¡Œä¸åŒçš„ä»»åŠ¡ï¼ˆå•ä¸ªçº¿ç¨‹å†…ä»»åŠ¡çš„æ‰§è¡Œæ˜¯ä¸²è¡Œçš„ï¼‰</p><p>å¤šçº¿ç¨‹çš„åŸç†ï¼ˆå•CPUï¼‰ï¼š</p><ol><li>åŒä¸€æ—¶é—´ï¼ŒCPUåªèƒ½å¤„ç†1æ¡çº¿ç¨‹</li><li>å¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œï¼Œå…¶å®æ˜¯CPUå¿«é€Ÿçš„åœ¨å¤šæ¡çº¿ç¨‹ä¹‹é—´è°ƒåº¦ï¼ˆåˆ‡æ¢ï¼‰</li><li>å¦‚æœCPUè°ƒåº¦çº¿ç¨‹çš„æ—¶é—´è¶³å¤Ÿå¿«ï¼Œå°±é€ æˆäº†å¤šçº¿ç¨‹å¹¶å‘çš„å‡è±¡ã€‚</li></ol><p>å¤šçº¿ç¨‹çš„ä¼˜ç‚¹ï¼š</p><ol><li>èƒ½å¤Ÿé€‚å½“æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡</li><li>èƒ½é€‚å½“æé«˜èµ„æºåˆ©ç”¨ç‡ï¼ˆCPUã€å†…å­˜åˆ©ç”¨ç‡ï¼‰</li></ol><p>å¤šçº¿ç¨‹çš„ç¼ºç‚¹ï¼š</p><ol><li>åˆ›å»ºçº¿ç¨‹éƒ½æ˜¯æœ‰å¼€é”€çš„ï¼ŒiOSä¸‹ä¸»è¦æˆæœ¬åŒ…æ‹¬ï¼šå†…æ ¸æ•°æ®ç»“æ„ï¼ˆå¤§çº¦1KBï¼‰ã€æ ˆç©ºé—´ï¼ˆå­çº¿ç¨‹512KBã€ä¸»çº¿ç¨‹1Mï¼‰ï¼Œåˆ›å»ºçº¿ç¨‹å¤§çº¦éœ€è¦90æ¯«ç§’çš„åˆ›å»ºæ—¶é—´</li><li>å¦‚æœå¼€å¯å¤§é‡çº¿ç¨‹ï¼Œä¼šé™ä½ç¨‹åºçš„æ€§èƒ½</li><li>çº¿ç¨‹è¶Šå¤šï¼ŒCPUåœ¨è°ƒåº¦çº¿ç¨‹ä¸Šå¼€é”€å°±è¶Šå¤§</li><li>ç¨‹åºè®¾è®¡æ›´åŠ å¤æ‚ï¼Œæ¯”å¦‚çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ã€å¤šçº¿ç¨‹çš„æ•°æ®å…±äº«</li></ol><h4 id="3-ä¸»çº¿ç¨‹"><a href="#3-ä¸»çº¿ç¨‹" class="headerlink" title="3. ä¸»çº¿ç¨‹"></a>3. ä¸»çº¿ç¨‹</h4><p>ä¸€ä¸ªiOSç¨‹åºè¿è¡Œåï¼Œé»˜è®¤ä¼šå¼€å¯1æ¡çº¿ç¨‹ï¼Œæˆä¸º<font color=orange>ä¸»çº¿ç¨‹</font>æˆ–<font color=orange>UIçº¿ç¨‹</font></p><p>ä¸»çº¿ç¨‹çš„ç»„è¦ä½œç”¨ï¼š</p><ol><li>æ˜¾ç¤º/åˆ·æ–°UIç•Œé¢</li><li>å¤„ç†UIäº‹ä»¶</li></ol><p>ä¸»çº¿ç¨‹çš„ä½¿ç”¨æ³¨æ„ï¼š</p><ol><li>åˆ«å°†æ¯”è¾ƒè€—æ—¶çš„æ“ä½œæ”¾åˆ°ä¸»çº¿ç¨‹ä¸­</li><li>è€—æ—¶æ“ä½œä¼šå¡ä¸»ä¸»çº¿ç¨‹ï¼Œä¸¥é‡å½±å“UIçš„æµç•…åº¦</li></ol><h3 id="äºŒã€iOSä¸­å¤šçº¿ç¨‹çš„å®ç°æ–¹æ¡ˆ"><a href="#äºŒã€iOSä¸­å¤šçº¿ç¨‹çš„å®ç°æ–¹æ¡ˆ" class="headerlink" title="äºŒã€iOSä¸­å¤šçº¿ç¨‹çš„å®ç°æ–¹æ¡ˆ"></a>äºŒã€iOSä¸­å¤šçº¿ç¨‹çš„å®ç°æ–¹æ¡ˆ</h3><table><thead><tr><th>æŠ€æœ¯æ–¹æ¡ˆ</th><th>ç®€ä»‹</th><th>è¯­è¨€</th><th>çº¿ç¨‹å£°æ˜å‘¨æœŸ</th><th>ä½¿ç”¨é¢‘ç‡</th></tr></thead><tbody><tr><td>pthread</td><td>ä¸€å¥—é€šç”¨çš„å¤šçº¿ç¨‹API ã€é€‚ç”¨äºUnic\Linux\Windowsç­‰ç³»ç»Ÿã€è·¨å¹³å°\å¯ç§»æ¤</td><td>C</td><td>ç¨‹åºå‘˜ç®¡ç†</td><td>å‡ ä¹ä¸ç”¨</td></tr><tr><td>NSThread</td><td>ä½¿ç”¨æ›´åŠ é¢å‘å¯¹è±¡ã€ç®€å•æ˜“ç”¨å¯ç›´æ¥æ“ä½œçº¿ç¨‹å¯¹è±¡</td><td>OC</td><td>ç¨‹åºå‘˜ç®¡ç†ï¼ˆåªç®¡åˆ›å»ºï¼‰</td><td>å¶å°”ä½¿ç”¨</td></tr><tr><td>GCD</td><td>æ—¨åœ¨æ›¿ä»£NSTreadç­‰çº¿ç¨‹æŠ€æœ¯ã€å……åˆ†åˆ©ç”¨è®¾å¤‡å¤šæ ¸</td><td>C</td><td>è‡ªåŠ¨ç®¡ç†</td><td>ç»å¸¸ä½¿ç”¨</td></tr><tr><td>NSOperation</td><td>åŸºäºGCDï¼ˆåº•å±‚æ˜¯GCDï¼‰ã€æ¯”GCDå¤šäº†äº›æ›´ç®€å•å®ç”¨çš„åŠŸèƒ½ ã€æ›´åŠ é¢å‘å¯¹è±¡</td><td>OC</td><td>è‡ªåŠ¨ç®¡ç†</td><td>ç»å¸¸ä½¿ç”¨</td></tr></tbody></table><h4 id="1-NSTread"><a href="#1-NSTread" class="headerlink" title="1. NSTread"></a>1. NSTread</h4><h5 id="1-1-NSThreadåˆ›å»ºçº¿ç¨‹çš„ä¸‰ç§æ–¹æ³•ï¼š"><a href="#1-1-NSThreadåˆ›å»ºçº¿ç¨‹çš„ä¸‰ç§æ–¹æ³•ï¼š" class="headerlink" title="1.1 NSThreadåˆ›å»ºçº¿ç¨‹çš„ä¸‰ç§æ–¹æ³•ï¼š"></a>1.1 NSThreadåˆ›å»ºçº¿ç¨‹çš„ä¸‰ç§æ–¹æ³•ï¼š</h5><ol><li><p>alloc init åˆ›å»ºçº¿ç¨‹ï¼Œéœ€è¦æ‰‹åŠ¨å¯åŠ¨çº¿ç¨‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">/**<br> ç¬¬ä¸€ä¸ªå‚æ•°ï¼šç›®æ ‡å¯¹è±¡ self<br> ç¬¬äºŒä¸ªå‚æ•°ï¼šæ–¹æ³•é€‰æ‹©å™¨ è°ƒç”¨çš„æ–¹æ³•<br> ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šå‰é¢è°ƒç”¨æ–¹æ³•éœ€è¦ä¼ é€’çš„å‚æ•°<br>*/<br>NSThread *thread = [[NSThread alloc]initWithTarget:self selector:@selector(run:) object:@&quot;123&quot;];<br>// è®¾ç½®å±æ€§<br>thread.name = @&quot;å­çº¿ç¨‹1&quot;;<br>// è®¾ç½®ä¼˜å…ˆçº§ å–å€¼èŒƒå›´ 0.0~1.0 é»˜è®¤ä¼˜å…ˆçº§æ˜¯0.5<br>thread.threadPriority = 1.0;<br>// å¯åŠ¨çº¿ç¨‹<br>[thread start];<br><br>-(void)run:(NSString*)param&#123;<br>    NSLog(@&quot;%@--%@&quot;,param,[NSThread currentThread]);<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ç±»æ–¹æ³• ï¼Œåˆ†ç¦»å‡ºå­çº¿ç¨‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">[NSThread detachNewThreadSelector:@selector(run:) toTarget:self withObject:@&quot;123&quot;];<br></code></pre></td></tr></table></figure></li><li><p>åˆ›å»ºåå°çº¿ç¨‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">[self performSelectorInBackground:@selector(run:) withObject:@&quot;123&quot;];<br></code></pre></td></tr></table></figure></li></ol><p>åé¢ä¸¤ç§æ–¹æ³•å¯ä»¥æ›´åŠ å¿«é€Ÿçš„åˆ›å»ºçº¿ç¨‹ï¼Œä½†æ˜¯æ— æ³•æ‹¿åˆ°çº¿ç¨‹å¯¹è±¡ï¼Œå¯¹çº¿ç¨‹è¿›è¡Œæ›´è¯¦ç»†çš„è®¾ç½®ã€‚</p><h5 id="1-2-çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼š"><a href="#1-2-çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼š" class="headerlink" title="1.2 çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼š"></a>1.2 çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼š</h5><ol><li><p>å¯åŠ¨çº¿ç¨‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// æ–°å»ºçŠ¶æ€-&gt;å°±ç»ªçŠ¶æ€ï¼ˆå¯è°ƒåº¦çº¿ç¨‹æ± ï¼‰-&gt;è¿è¡ŒçŠ¶æ€-&gt;é˜»å¡çŠ¶æ€-&gt;æ­»äº¡çŠ¶æ€ã€‚å½“å‰çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œè‡ªåŠ¨è¿›å…¥æ­»äº¡çŠ¶æ€<br>// è¿è¡ŒçŠ¶æ€<br>- (void)start;<br></code></pre></td></tr></table></figure></li><li><p>é˜»å¡ï¼ˆæš‚åœï¼‰çº¿ç¨‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// è¿›å…¥é˜»å¡çŠ¶æ€<br>+ (void)sleepUntilDate:(NSDate*)date;<br>+ (void)sleepForTimeInterval:(NSTimeInterval)ti;<br></code></pre></td></tr></table></figure></li><li><p>å¼ºåˆ¶åœæ­¢çº¿ç¨‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// è¿›å…¥æ­»äº¡çŠ¶æ€<br>+ (void)exit;<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šä¸€æ—¦çº¿ç¨‹åœæ­¢äº†ï¼Œå°±ä¸èƒ½å†æ¬¡å¯åŠ¨çº¿ç¨‹</p></blockquote></li></ol><h5 id="1-3-åŸå­å’ŒéåŸå­å±æ€§"><a href="#1-3-åŸå­å’ŒéåŸå­å±æ€§" class="headerlink" title="1.3 åŸå­å’ŒéåŸå­å±æ€§"></a>1.3 åŸå­å’ŒéåŸå­å±æ€§</h5><ol><li><p>OCåœ¨å®šä¹‰å±æ€§æ—¶æœ‰noatomicå’Œatomicä¸¤ç§é€‰æ‹©</p><p>atomicï¼šåŸå­å±æ€§ï¼Œä¸ºsetteræ–¹æ³•åŠ é”ï¼ˆé»˜è®¤ä½¿ç”¨ï¼‰</p><p>noatomicï¼šéåŸå­å±æ€§ ï¼Œä¸ä¼šä¸ºsetteræ–¹æ³•åŠ é”</p></li><li><p>åŸå­å’ŒéåŸå­å±æ€§çš„é€‰æ‹©</p><p>atomicï¼šçº¿ç¨‹å®‰å…¨ï¼Œéœ€è¦æ¶ˆè€—å¤§é‡èµ„æº</p><p>noatomicï¼šéçº¿ç¨‹å®‰å…¨ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸€èˆ¬è¿˜æ˜¯ä¼šé€‰æ‹©ä½¿ç”¨noatomicï¼ˆappä½“é‡å†³å®šäº†æˆ‘ä»¬å¾ˆå°‘ä¼šé‡åˆ°å¤šçº¿ç¨‹èµ„æºæŠ¢å¤ºçš„é—®é¢˜ï¼‰</p></li></ol><h5 id="1-4-çº¿ç¨‹é—´é€šè®¯"><a href="#1-4-çº¿ç¨‹é—´é€šè®¯" class="headerlink" title="1.4 çº¿ç¨‹é—´é€šè®¯"></a>1.4 çº¿ç¨‹é—´é€šè®¯</h5><ol><li><p>ä»€ä¹ˆå«çº¿ç¨‹é—´é€šè®¯</p><p>åœ¨1ä¸ªè¿›ç¨‹ä¸­ï¼Œçº¿ç¨‹å¾€å¾€ä¸æ˜¯å­¤ç«‹å­˜åœ¨çš„ï¼Œå¤šä¸ªçº¿ç¨‹ä¹‹é—´éœ€è¦ç»å¸¸è¿›è¡Œé€šè®¯</p></li><li><p>çº¿ç¨‹é—´é€šè®¯çš„ä½“ç°</p><p>1ä¸ªçº¿ç¨‹ä¼ é€’æ•°æ®ç»™å¦1ä¸ªçº¿ç¨‹</p><p>åœ¨1ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œå®Œå¾…å®šä»»åŠ¡åï¼Œè½¬åˆ°å¦1ä¸ªçº¿ç¨‹ä¸­ç»§ç»­æ‰§è¡Œä»»åŠ¡</p></li><li><p>çº¿ç¨‹é—´é€šè®¯å¸¸ç”¨æ–¹æ³•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">- (void)performSelectorOnMainThread:(SEL)aSelector withObject:(nullable id)arg waitUntilDone:(BOOL)wait;<br>- (void)performSelector:(SEL)aSelector onThread:(NSThread *)thr withObject:(nullable id)arg waitUntilDone:(BOOL)wait<br></code></pre></td></tr></table></figure></li></ol><h4 id="2-GCD"><a href="#2-GCD" class="headerlink" title="2. GCD"></a>2. GCD</h4><h5 id="2-1-ç®€ä»‹"><a href="#2-1-ç®€ä»‹" class="headerlink" title="2.1 ç®€ä»‹"></a>2.1 ç®€ä»‹</h5><ol><li><p>ä»€ä¹ˆæ˜¯GCD?</p><p>å…¨ç§°Grand Central Dispatchï¼Œçº¯Cè¯­è¨€ï¼Œæä¾›äº†éå¸¸å¤šä¸”å¼ºå¤§çš„å‡½æ•°</p></li><li><p>GCDçš„ä¼˜åŠ¿ï¼Ÿ</p><p>GCDæ˜¯è‹¹æœå…¬å¸ä¸ºå¤šæ ¸å’Œå¹¶è¡Œè¿ç®—æå‡ºçš„è§£å†³æ–¹æ¡ˆ</p><p>GCDä¼šè‡ªåŠ¨åˆ©ç”¨æ›´å¤šçš„CPUå†…æ ¸ï¼ˆæ¯”å¦‚åŒæ ¸ã€å››æ ¸ï¼‰</p><p>GCDä¼šè‡ªåŠ¨ç®¡ç†çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼ˆåˆ›å»ºçº¿ç¨‹ã€è°ƒåº¦ä»»åŠ¡ã€é”€æ¯çº¿ç¨‹ï¼‰</p><p>ç¨‹åºå‘˜åªéœ€è¦å‘Šè¯‰GCDæƒ³è¦æ‰§è¡Œä»€ä¹ˆä»»åŠ¡ï¼Œä¸éœ€è¦ç¼–å†™ä»»åŠ¡çº¿ç¨‹ç®¡ç†ä»£ç </p></li></ol><h5 id="2-2-ä»»åŠ¡å’Œé˜Ÿåˆ—"><a href="#2-2-ä»»åŠ¡å’Œé˜Ÿåˆ—" class="headerlink" title="2.2 ä»»åŠ¡å’Œé˜Ÿåˆ—"></a>2.2 ä»»åŠ¡å’Œé˜Ÿåˆ—</h5><p><font>ä»»åŠ¡å’Œé˜Ÿåˆ—æ˜¯GCDä¸­2ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š</font></p><ul><li><p>ä»»åŠ¡ï¼šæ‰§è¡Œä»€ä¹ˆæ“ä½œ</p></li><li><p>é˜Ÿåˆ—ï¼šç”¨æ¥å­˜æ”¾ä»»åŠ¡</p></li></ul><p>GCDçš„ä½¿ç”¨å°±ä¸¤ä¸ªæ­¥éª¤ï¼š</p><ul><li><p>å®šåˆ¶ä»»åŠ¡</p><p>ç¡®å®šè¦åšçš„äº‹æƒ…</p></li><li><p>å°†ä»»åŠ¡æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­</p><p>GCDä¼šè‡ªåŠ¨å°†é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡å–å‡ºï¼Œæ”¾åˆ°å¯¹åº”çš„çº¿ç¨‹ä¸­æ‰§è¡Œ</p><p>ä»»åŠ¡çš„å–å‡ºéµå¾ªé˜Ÿåˆ—çš„FIFOåŸåˆ™</p></li></ul><h6 id="2-2-1-GCDä¸­æœ‰ä¸¤ä¸ªæ‰§è¡Œä»»åŠ¡å¸¸ç”¨çš„å‡½æ•°ï¼š"><a href="#2-2-1-GCDä¸­æœ‰ä¸¤ä¸ªæ‰§è¡Œä»»åŠ¡å¸¸ç”¨çš„å‡½æ•°ï¼š" class="headerlink" title="2.2.1 GCDä¸­æœ‰ä¸¤ä¸ªæ‰§è¡Œä»»åŠ¡å¸¸ç”¨çš„å‡½æ•°ï¼š"></a>2.2.1 GCDä¸­æœ‰ä¸¤ä¸ªæ‰§è¡Œä»»åŠ¡å¸¸ç”¨çš„å‡½æ•°ï¼š</h6><ol><li>ç”¨åŒæ­¥çš„æ–¹å¼æ‰§è¡Œä»»åŠ¡</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">dispatch_sync(dispatch_queue_t queue, DISPATCH_NOESCAPE dispatch_block_t block);<br></code></pre></td></tr></table></figure><ol start="2"><li>ç”¨å¼‚æ­¥çš„æ–¹å¼æ¥æ‰§è¡Œä»»åŠ¡</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">dispatch_async(dispatch_queue_t queue, dispatch_block_t block);<br></code></pre></td></tr></table></figure><ol start="3"><li>åŒæ­¥å’Œå¼‚æ­¥çš„ä¸»è¦å½±å“ï¼šèƒ½ä¸èƒ½å¼€å¯æ–°çš„çº¿ç¨‹</li></ol><p>åŒæ­¥ï¼šåªèƒ½åœ¨å½“å‰çº¿ç¨‹ä¸­æ‰§è¡Œä»»åŠ¡ï¼Œä¸å…·å¤‡å¼€å¯æ–°çš„çº¿ç¨‹çš„èƒ½åŠ›ã€‚</p><p>å¼‚æ­¥ï¼šå¯ä»¥åœ¨æ–°çš„çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œå…·å¤‡å¼€å¯æ–°çš„çº¿ç¨‹çš„èƒ½åŠ›ã€‚</p><h6 id="2-2-2-é˜Ÿåˆ—çš„ç±»å‹"><a href="#2-2-2-é˜Ÿåˆ—çš„ç±»å‹" class="headerlink" title="2.2.2 é˜Ÿåˆ—çš„ç±»å‹"></a>2.2.2 é˜Ÿåˆ—çš„ç±»å‹</h6><p>GCDçš„é˜Ÿåˆ—å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»å‹ï¼š</p><ol><li><p>å¹¶å‘é˜Ÿåˆ—</p><p>å¯ä»¥è®©å¤šä¸ªä»»åŠ¡å¹¶å‘ï¼ˆåŒæ—¶ï¼‰æ‰§è¡Œï¼ˆè‡ªåŠ¨å¼€å¯å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œä»»åŠ¡ï¼‰</p><blockquote><p>æ³¨æ„ï¼šå¹¶å‘åŠŸèƒ½åªåœ¨å¼‚æ­¥å‡½æ•°ä¸‹æ‰æœ‰æ•ˆ</p></blockquote><p>åˆ›å»ºå¹¶å‘é˜Ÿåˆ—ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">/**</span><br><span class="hljs-comment">ç¬¬ä¸€ä¸ªå‚æ•°ï¼šCè¯­è¨€å­—ç¬¦ä¸²ï¼Œæ ‡ç­¾</span><br><span class="hljs-comment">ç¬¬äºŒä¸ªå‚æ•°ï¼šé˜Ÿåˆ—çš„ç±»å‹ 1. DISPATCH_QUEUE_CONCURRENTï¼ˆå¹¶å‘ï¼‰2.DISPATCH_QUEUE_SERIALï¼ˆä¸²è¡Œï¼‰</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">dispatch_queue_t</span> <span class="hljs-built_in">queue</span> = dispatch_queue_create(<span class="hljs-string">&quot;myQueue&quot;</span>, DISPATCH_QUEUE_CONCURRENT);<br></code></pre></td></tr></table></figure><p>GCDé»˜è®¤å·²ç»æä¾›äº†å…¨å±€å¹¶å‘é˜Ÿåˆ—ï¼Œä¾›æ•´ä¸ªåº”ç”¨ä½¿ç”¨ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">/**</span><br><span class="hljs-comment">ç¬¬ä¸€ä¸ªå‚æ•°ï¼šé˜Ÿåˆ—çš„ä¼˜å…ˆçº§</span><br><span class="hljs-comment">ç¬¬äºŒä¸ªå‚æ•°ï¼šä¼ 0å³å¯</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">dispatch_queue_t</span> globalQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="hljs-number">0</span>);<br></code></pre></td></tr></table></figure></li><li><p>ä¸²è¡Œé˜Ÿåˆ—</p><p>è®©ä»»åŠ¡ä¸€ä¸ªæ¥ä¸€ä¸ªçš„æ‰§è¡Œï¼ˆä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œæ‰ä¼šæ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼‰</p><p>åˆ›å»ºä¸²è¡Œé˜Ÿåˆ—ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">/**</span><br><span class="hljs-comment">ç¬¬ä¸€ä¸ªå‚æ•°ï¼šCè¯­è¨€å­—ç¬¦ä¸²ï¼Œæ ‡ç­¾</span><br><span class="hljs-comment">ç¬¬äºŒä¸ªå‚æ•°ï¼šé˜Ÿåˆ—çš„ç±»å‹ 1. DISPATCH_QUEUE_CONCURRENTï¼ˆå¹¶å‘ï¼‰2.DISPATCH_QUEUE_SERIALï¼ˆä¸²è¡Œï¼‰</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">dispatch_queue_t</span> <span class="hljs-built_in">queue</span> = dispatch_queue_create(<span class="hljs-string">&quot;myQueue&quot;</span>, DISPATCH_QUEUE_SERIAL);<br></code></pre></td></tr></table></figure><p>ä¸»é˜Ÿåˆ—ï¼š</p><p>ä¸»é˜Ÿåˆ—æ˜¯GCDè‡ªå¸¦çš„ä¸€ç§ç‰¹æ®Šçš„ä¸²è¡Œé˜Ÿåˆ—</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">dispatch_queue_t</span> <span class="hljs-built_in">queue</span> = dispatch_get_main_queue();<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šæ”¾åœ¨ä¸»é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œéƒ½ä¼šæ”¾åˆ°ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œ</p></blockquote></li><li><p>å¹¶å‘å’Œä¸²è¡Œä¸»è¦å½±å“ï¼šä»»åŠ¡çš„æ‰§è¡Œæ–¹å¼</p></li></ol><h6 id="2-2-3-å„ç§é˜Ÿåˆ—çš„æ‰§è¡Œæ•ˆæœ"><a href="#2-2-3-å„ç§é˜Ÿåˆ—çš„æ‰§è¡Œæ•ˆæœ" class="headerlink" title="2.2.3 å„ç§é˜Ÿåˆ—çš„æ‰§è¡Œæ•ˆæœ"></a>2.2.3 å„ç§é˜Ÿåˆ—çš„æ‰§è¡Œæ•ˆæœ</h6><table><thead><tr><th></th><th>å¹¶å‘é˜Ÿåˆ—</th><th>æ‰‹åŠ¨åˆ›å»ºçš„ä¸²è¡Œé˜Ÿåˆ—</th><th>ä¸»é˜Ÿåˆ—</th></tr></thead><tbody><tr><td>åŒæ­¥ï¼ˆsyncï¼‰</td><td>æ²¡æœ‰å¼€å¯æ–°çš„çº¿ç¨‹ã€ä¸²è¡Œæ‰§è¡Œä»»åŠ¡</td><td>æ²¡æœ‰å¼€å¯æ–°çš„çº¿ç¨‹ã€ä¸²è¡Œæ‰§è¡Œä»»åŠ¡</td><td>æ­»é”</td></tr><tr><td>å¼‚æ­¥ï¼ˆasyncï¼‰</td><td>æœ‰å¼€å¯æ–°çš„çº¿ç¨‹ã€å¹¶è¡Œæ‰§è¡Œä»»åŠ¡</td><td>å¼€å¯äº†ä¸€æ¡çº¿ç¨‹ã€ä¸²è¡Œæ‰§è¡Œä»»åŠ¡</td><td>æ²¡æœ‰å¼€å¯æ–°çš„çº¿ç¨‹ã€ä¸²è¡Œæ‰§è¡Œä»»åŠ¡</td></tr></tbody></table><blockquote><p>æ³¨æ„ï¼šä½¿ç”¨syncå‡½æ•°å¾€å½“å‰ä¸²è¡Œé˜Ÿåˆ—æ·»åŠ ä»»åŠ¡ï¼Œä¼šå¡ä½å½“å‰ä¸²è¡Œé˜Ÿåˆ—</p></blockquote><h5 id="2-3-GCDå¸¸ç”¨å‡½æ•°"><a href="#2-3-GCDå¸¸ç”¨å‡½æ•°" class="headerlink" title="2.3 GCDå¸¸ç”¨å‡½æ•°"></a>2.3 GCDå¸¸ç”¨å‡½æ•°</h5><h6 id="2-3-1-å»¶è¿Ÿæ‰§è¡Œ"><a href="#2-3-1-å»¶è¿Ÿæ‰§è¡Œ" class="headerlink" title="2.3.1 å»¶è¿Ÿæ‰§è¡Œ"></a>2.3.1 å»¶è¿Ÿæ‰§è¡Œ</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">//1.performSelector<br>[self performSelector:@selector(task) withObject:nil afterDelay:2.0];<br>//2.NSTimer<br>[NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(task) userInfo:nil repeats:NO];<br>-(void)task&#123;<br>    NSLog(@&quot;2såæ‰§è¡Œ&quot;);<br>&#125;<br>//3.GCD<br>dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(2 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;<br>   NSLog(@&quot;2såæ‰§è¡Œ&quot;);<br>&#125;);<br></code></pre></td></tr></table></figure><h6 id="2-3-2-ä¸€æ¬¡æ€§æ‰§è¡Œ"><a href="#2-3-2-ä¸€æ¬¡æ€§æ‰§è¡Œ" class="headerlink" title="2.3.2 ä¸€æ¬¡æ€§æ‰§è¡Œ"></a>2.3.2 ä¸€æ¬¡æ€§æ‰§è¡Œ</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">static dispatch_once_t onceToken;<br>dispatch_once(&amp;onceToken, ^&#123;<br>  NSLog(@&quot;åªæ‰§è¡Œä¸€æ¬¡&quot;);<br>&#125;);<br></code></pre></td></tr></table></figure><h6 id="2-3-3-æ …æ å‡½æ•°"><a href="#2-3-3-æ …æ å‡½æ•°" class="headerlink" title="2.3.3 æ …æ å‡½æ•°"></a>2.3.3 æ …æ å‡½æ•°</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// ä½œç”¨ï¼šæ§åˆ¶å¤šçº¿ç¨‹å¼‚æ­¥æ‰§è¡Œé¡ºåº(ä»»åŠ¡1ã€2æ‰§è¡Œå®Œæˆåæ‰ä¼šæ‰§è¡Œ3)<br>dispatch_queue_t queue = dispatch_queue_create(&quot;myQueue&quot;, DISPATCH_QUEUE_CONCURRENT);<br>dispatch_async(queue, ^&#123;<br>NSLog(@&quot;ä»»åŠ¡1---%@&quot;,[NSThread currentThread]);<br>&#125;);<br>dispatch_async(queue, ^&#123;<br>NSLog(@&quot;ä»»åŠ¡2---%@&quot;,[NSThread currentThread]);<br>&#125;);<br>dispatch_barrier_async(queue, ^&#123;<br>NSLog(@&quot;++++&quot;);<br>&#125;);<br>dispatch_async(queue, ^&#123;<br>NSLog(@&quot;ä»»åŠ¡3---%@&quot;,[NSThread currentThread]);<br>&#125;);<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šå…¨å±€å¹¶å‘é˜Ÿåˆ—ä¸èƒ½ä½¿ç”¨æ …æ å‡½æ•°</p></blockquote><h6 id="2-3-4-å¿«é€Ÿè¿­ä»£"><a href="#2-3-4-å¿«é€Ÿè¿­ä»£" class="headerlink" title="2.3.4 å¿«é€Ÿè¿­ä»£"></a>2.3.4 å¿«é€Ÿè¿­ä»£</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">/**<br>ç¬¬ä¸€ä¸ªå‚æ•°ï¼šéå†æ¬¡æ•°<br>ç¬¬äºŒä¸ªå‚æ•°ï¼šé˜Ÿåˆ—ï¼ˆå¹¶å‘é˜Ÿåˆ—ï¼‰<br>ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šindex ç´¢å¼•<br>*/<br>//å¼€å­çº¿ç¨‹ï¼Œå’Œä¸»çº¿ç¨‹ä¸€èµ·å®Œæˆéå†ä»»åŠ¡ï¼Œä»»åŠ¡æ‰§è¡Œæ˜¯å¹¶å‘çš„<br>dispatch_apply(10, dispatch_get_global_queue(0, 0), ^(size_t index) &#123;<br>NSLog(@&quot;%ld--%@&quot;,index,[NSThread currentThread]);<br>&#125;);<br></code></pre></td></tr></table></figure><h6 id="2-3-5-é˜Ÿåˆ—ç»„"><a href="#2-3-5-é˜Ÿåˆ—ç»„" class="headerlink" title="2.3.5 é˜Ÿåˆ—ç»„"></a>2.3.5 é˜Ÿåˆ—ç»„</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// åˆ›å»ºå…¨å±€é˜Ÿåˆ—<br>dispatch_queue_t queue = dispatch_get_global_queue(0, 0);<br>// åˆ›å»ºé˜Ÿåˆ—ç»„<br>dispatch_group_t group = dispatch_group_create();<br>/**<br>1. å°è£…ä»»åŠ¡<br>2. æŠŠä»»åŠ¡æ·»åŠ åˆ°é˜Ÿåˆ—<br>3. ç›‘å¬ä»»åŠ¡çš„æ‰§è¡Œæƒ…å†µï¼Œé€šçŸ¥group<br>*/<br>dispatch_group_async(group, queue, ^&#123;<br>NSLog(@&quot;ä»»åŠ¡1--%@&quot;,[NSThread currentThread]);<br>&#125;);<br>dispatch_group_async(group, queue, ^&#123;<br>NSLog(@&quot;ä»»åŠ¡2--%@&quot;,[NSThread currentThread]);<br>&#125;);<br>dispatch_group_async(group, queue, ^&#123;<br>NSLog(@&quot;ä»»åŠ¡3--%@&quot;,[NSThread currentThread]);<br>&#125;);<br>// æ‹¦æˆªé€šçŸ¥ï¼Œå½“é˜Ÿåˆ—ç»„ä¸­æ‰€æœ‰ä»»åŠ¡éƒ½æ‰§è¡Œå®Œæ¯•çš„æ—¶å€™è¿›å…¥ä¸‹é¢çš„æ–¹æ³•<br>dispatch_group_notify(group, queue, ^&#123;<br>NSLog(@&quot;ä»»åŠ¡å®Œæˆ&quot;);<br>&#125;);<br>NSLog(@&quot;--end---&quot;);<br><br>// log <br>--end---<br>ä»»åŠ¡2--&lt;NSThread: 0x600001e79ec0&gt;&#123;number = 6, name = (null)&#125;<br>ä»»åŠ¡1--&lt;NSThread: 0x600001e66440&gt;&#123;number = 7, name = (null)&#125;<br>ä»»åŠ¡3--&lt;NSThread: 0x600001e7aec0&gt;&#123;number = 8, name = (null)&#125;<br>ä»»åŠ¡å®Œæˆ<br></code></pre></td></tr></table></figure><h4 id="3-NSOperation"><a href="#3-NSOperation" class="headerlink" title="3. NSOperation"></a>3. NSOperation</h4><p><code>NSOperation</code>é…åˆ<code>NSOperationQueue</code>ä¹Ÿèƒ½å®ç°å¤šçº¿ç¨‹ç¼–ç¨‹</p><p><code>NSOperation</code>å’Œ<code>NSOperationQueue</code>å®ç°å¤šçº¿ç¨‹çš„å…·ä½“æ­¥éª¤ï¼š</p><ul><li>å…ˆå°†éœ€è¦æ‰§è¡Œçš„æ“ä½œå°è£…åˆ°ä¸€ä¸ª<code>NSOperation</code>å¯¹è±¡ä¸­</li><li>ç„¶åå°†<code>NSOperation</code>å¯¹è±¡æ·»åŠ åˆ°<code>NSOperationQueue</code>ä¸­</li><li>ç³»ç»Ÿä¼šè‡ªåŠ¨å°†<code>NSOperationQueue</code>ä¸­çš„<code>NSOperation</code>å–å‡ºæ¥</li><li>å°†å–å‡ºçš„<code>NSOperation</code>å°è£…çš„æ“ä½œæ”¾åˆ°ä¸€æ¡æ–°çº¿ç¨‹ä¸­æ‰§è¡Œ</li></ul><h5 id="3-1-NSOperationçš„å­ç±»"><a href="#3-1-NSOperationçš„å­ç±»" class="headerlink" title="3.1 NSOperationçš„å­ç±»"></a>3.1 NSOperationçš„å­ç±»</h5><p>NSOperationæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå¹¶ä¸å…·å¤‡å°è£…æ“ä½œçš„èƒ½åŠ›ï¼Œå¿…é¡»ä½¿ç”¨å®ƒçš„å­ç±»</p><p>ä½¿ç”¨NSOperationå­ç±»çš„æ–¹å¼æœ‰3ä¸­ï¼š</p><ul><li>NSInvocationOperation</li><li>NSBLockOperation</li><li>è‡ªå®šä¹‰å­ç±»ç»§æ‰¿NSOperationï¼Œå®ç°å†…éƒ¨ç›¸åº”çš„æ–¹æ³•</li></ul><h6 id="3-1-1-NSInvocationOperation"><a href="#3-1-1-NSInvocationOperation" class="headerlink" title="3.1.1 NSInvocationOperation"></a>3.1.1 NSInvocationOperation</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// åˆ›å»ºæ“ä½œå°è£…ä»»åŠ¡<br>/**<br>ç¬¬ä¸€ä¸ªå‚æ•°ï¼šç›®æ ‡å¯¹è±¡<br>ç¬¬äºŒä¸ªå‚æ•°ï¼šè°ƒç”¨æ–¹æ³•çš„åç§°<br>ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šå‰é¢æ–¹æ³•éœ€è¦æ¥æ”¶çš„å‚æ•°<br>*/<br>NSInvocationOperation *op = [[NSInvocationOperation alloc]initWithTarget:self selector:@selector(task) object:nil];<br>// æ‰§è¡Œæ“ä½œ<br>[op start];<br><br>-(void)task&#123;<br>    NSLog(@&quot;%s--%@&quot;,__func__,[NSThread currentThread]);<br>&#125;<br><br>// log <br>-[ViewController task]--&lt;_NSMainThread: 0x6000039c4040&gt;&#123;number = 1, name = main&#125;<br></code></pre></td></tr></table></figure><p>å’ŒNSOperationQueueä¸€èµ·ä½¿ç”¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// åˆ›å»ºæ“ä½œå°è£…ä»»åŠ¡<br>NSInvocationOperation *op1 = [[NSInvocationOperation alloc]initWithTarget:self selector:@selector(task1) object:nil];<br> NSInvocationOperation *op2 = [[NSInvocationOperation alloc]initWithTarget:self selector:@selector(task2) object:nil];<br>NSInvocationOperation *op3 = [[NSInvocationOperation alloc]initWithTarget:self selector:@selector(task3) object:nil];<br>// åˆ›å»ºé˜Ÿåˆ—<br>/**<br>ä¸»é˜Ÿåˆ—ï¼š[NSOperationQueue mainQueue]å’ŒGCDä¸»é˜Ÿåˆ—ä¸€æ ·ï¼Œä¸²è¡Œæ‰§è¡Œ<br>éä¸»é˜Ÿåˆ—ï¼š[[NSOperationQueue alloc]init] éå¸¸ç‰¹æ®Šï¼ˆåŒæ—¶å…·å¤‡ä¸²è¡Œå’Œå¹¶å‘çš„åŠŸèƒ½ï¼‰é»˜è®¤æƒ…å†µä¸‹éä¸»é˜Ÿåˆ—æ˜¯å¹¶å‘é˜Ÿåˆ—<br>*/<br>NSOperationQueue *queue = [[NSOperationQueue alloc]init];<br>[queue addOperation:op1]; //å†…éƒ¨è°ƒç”¨äº†[op1 start]<br>[queue addOperation:op2];<br>[queue addOperation:op3];<br><br>-(void)task1&#123;<br>    NSLog(@&quot;%s--%@&quot;,__func__,[NSThread currentThread]);<br>&#125;<br>-(void)task2&#123;<br>    NSLog(@&quot;%s--%@&quot;,__func__,[NSThread currentThread]);<br>&#125;<br>-(void)task3&#123;<br>    NSLog(@&quot;%s--%@&quot;,__func__,[NSThread currentThread]);<br>&#125;<br><br>// log<br>-[ViewController task1]--&lt;NSThread: 0x600003d04880&gt;&#123;number = 7, name = (null)&#125;<br>-[ViewController task2]--&lt;NSThread: 0x600003d16340&gt;&#123;number = 8, name = (null)&#125;<br>-[ViewController task3]--&lt;NSThread: 0x600003d002c0&gt;&#123;number = 9, name = (null)&#125;<br></code></pre></td></tr></table></figure><h6 id="3-1-2-NSBlockOperation"><a href="#3-1-2-NSBlockOperation" class="headerlink" title="3.1.2 NSBlockOperation"></a>3.1.2 NSBlockOperation</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// åˆ›å»ºæ“ä½œ<br>NSBlockOperation *op1 = [NSBlockOperation blockOperationWithBlock:^&#123;<br>NSLog(@&quot;ä»»åŠ¡1--%@&quot;,[NSThread currentThread]);<br>&#125;];<br>NSBlockOperation *op2 = [NSBlockOperation blockOperationWithBlock:^&#123;<br>NSLog(@&quot;ä»»åŠ¡2--%@&quot;,[NSThread currentThread]);<br>&#125;];<br>NSBlockOperation *op3 = [NSBlockOperation blockOperationWithBlock:^&#123;<br>NSLog(@&quot;ä»»åŠ¡3--%@&quot;,[NSThread currentThread]);<br>&#125;];<br>// è¿½åŠ ä»»åŠ¡<br>// æ³¨æ„ï¼šå¦‚æœä¸€ä¸ªæ“ä½œçš„ä»»åŠ¡æ•°é‡å¤§äº1ï¼Œé‚£ä¹ˆä¼šå¼€å­çº¿ç¨‹å¹¶å‘æ‰§è¡Œ<br>// æ³¨æ„ï¼šä¸ä¸€å®šæ˜¯å­çº¿ç¨‹ï¼Œæœ‰å¯èƒ½æ˜¯ä¸»çº¿ç¨‹<br>[op3 addExecutionBlock:^&#123;<br>NSLog(@&quot;ä»»åŠ¡4--%@&quot;,[NSThread currentThread]);<br>&#125;];<br>[op3 addExecutionBlock:^&#123;<br>NSLog(@&quot;ä»»åŠ¡5--%@&quot;,[NSThread currentThread]);<br>&#125;];<br>[op3 addExecutionBlock:^&#123;<br>NSLog(@&quot;ä»»åŠ¡6--%@&quot;,[NSThread currentThread]);<br>&#125;];<br>    <br>[op1 start];<br>[op2 start];<br>[op3 start];<br>// log<br>ä»»åŠ¡1--&lt;_NSMainThread: 0x60000116c1c0&gt;&#123;number = 1, name = main&#125;<br>ä»»åŠ¡2--&lt;_NSMainThread: 0x60000116c1c0&gt;&#123;number = 1, name = main&#125;<br>ä»»åŠ¡5--&lt;_NSMainThread: 0x60000116c1c0&gt;&#123;number = 1, name = main&#125;<br>ä»»åŠ¡3--&lt;NSThread: 0x600001177a00&gt;&#123;number = 4, name = (null)&#125;<br>ä»»åŠ¡4--&lt;NSThread: 0x60000113d2c0&gt;&#123;number = 7, name = (null)&#125;<br>ä»»åŠ¡6--&lt;NSThread: 0x600001122640&gt;&#123;number = 6, name = (null)&#125;<br></code></pre></td></tr></table></figure><p>å’ŒNSOperationQueueä¸€èµ·ä½¿ç”¨ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// åˆ›å»ºæ“ä½œ<br>NSBlockOperation *op1 = [NSBlockOperation blockOperationWithBlock:^&#123;<br>NSLog(@&quot;ä»»åŠ¡1--%@&quot;,[NSThread currentThread]);<br>&#125;];<br>NSBlockOperation *op2 = [NSBlockOperation blockOperationWithBlock:^&#123;<br>NSLog(@&quot;ä»»åŠ¡2--%@&quot;,[NSThread currentThread]);<br>&#125;];<br>NSBlockOperation *op3 = [NSBlockOperation blockOperationWithBlock:^&#123;<br>NSLog(@&quot;ä»»åŠ¡3--%@&quot;,[NSThread currentThread]);<br>&#125;];<br>[op3 addExecutionBlock:^&#123;<br>NSLog(@&quot;ä»»åŠ¡4--%@&quot;,[NSThread currentThread]);<br>&#125;];<br>[op3 addExecutionBlock:^&#123;<br>NSLog(@&quot;ä»»åŠ¡5--%@&quot;,[NSThread currentThread]);<br>&#125;];<br>[op3 addExecutionBlock:^&#123;<br>NSLog(@&quot;ä»»åŠ¡6--%@&quot;,[NSThread currentThread]);<br>&#125;];<br>// åˆ›å»ºé˜Ÿåˆ—<br>NSOperationQueue *queue = [[NSOperationQueue alloc]init];<br>// å°†æ“ä½œæ·»åŠ åˆ°é˜Ÿåˆ—ä¸­<br>[queue addOperation:op1];<br>[queue addOperation:op2];<br>[queue addOperation:op3];<br><br>// log<br>ä»»åŠ¡3--&lt;NSThread: 0x600001b282c0&gt;&#123;number = 5, name = (null)&#125;<br>ä»»åŠ¡2--&lt;NSThread: 0x600001b32640&gt;&#123;number = 6, name = (null)&#125;<br>ä»»åŠ¡1--&lt;NSThread: 0x600001b67680&gt;&#123;number = 4, name = (null)&#125;<br>ä»»åŠ¡4--&lt;NSThread: 0x600001b2cb40&gt;&#123;number = 3, name = (null)&#125;<br>ä»»åŠ¡5--&lt;NSThread: 0x600001b3fc80&gt;&#123;number = 7, name = (null)&#125;<br>ä»»åŠ¡6--&lt;NSThread: 0x600001b62340&gt;&#123;number = 8, name = (null)&#125;<br><br>// ç®€å•ä½¿ç”¨<br>[queue addOperationWithBlock:^&#123;// ç›¸å½“äºåˆ›å»ºæ“ä½œåå°†æ“ä½œæ·»åŠ åˆ°é˜Ÿåˆ—ä¸­<br>NSLog(@&quot;ä»»åŠ¡7--%@&quot;,[NSThread currentThread]);<br>&#125;];<br></code></pre></td></tr></table></figure><h6 id="3-1-3-è‡ªå®šä¹‰å­ç±»"><a href="#3-1-3-è‡ªå®šä¹‰å­ç±»" class="headerlink" title="3.1.3 è‡ªå®šä¹‰å­ç±»"></a>3.1.3 è‡ªå®šä¹‰å­ç±»</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// ç»§æ‰¿NSOperationï¼Œé‡å†™mianæ–¹æ³•<br>/**<br> å‘ŠçŸ¥è¦æ‰§è¡Œçš„ä»»åŠ¡<br> 1. æœ‰åˆ©äºä»£ç éšè—<br> 2. å¤ç”¨æ€§<br> */<br>- (void)main&#123;<br>    NSLog(@&quot;main---%@&quot;,[NSThread currentThread]);<br>&#125;<br>---------------------------------------<br>TOperation *op1 = [[TOperation alloc]init];<br>TOperation *op2 = [[TOperation alloc]init];<br>NSOperationQueue *queue = [[NSOperationQueue alloc]init];<br>[queue addOperation:op1];<br>[queue addOperation:op2];<br><br>// log<br>main---&lt;NSThread: 0x60000149acc0&gt;&#123;number = 7, name = (null)&#125;<br>main---&lt;NSThread: 0x600001496580&gt;&#123;number = 8, name = (null)&#125;<br></code></pre></td></tr></table></figure><h5 id="3-2-NSOperationçš„å…¶å®ƒç”¨æ³•"><a href="#3-2-NSOperationçš„å…¶å®ƒç”¨æ³•" class="headerlink" title="3.2 NSOperationçš„å…¶å®ƒç”¨æ³•"></a>3.2 NSOperationçš„å…¶å®ƒç”¨æ³•</h5><h6 id="3-2-1-æœ€å¤§å¹¶å‘æ•°"><a href="#3-2-1-æœ€å¤§å¹¶å‘æ•°" class="headerlink" title="3.2.1 æœ€å¤§å¹¶å‘æ•°"></a>3.2.1 æœ€å¤§å¹¶å‘æ•°</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// åŒä¸€æ—¶é—´æœ€å¤šæœ‰å¤šå°‘ä»»åŠ¡å¯ä»¥æ‰§è¡Œ<br>// maxConcurrentOperationCount &gt; 1 å¹¶å‘é˜Ÿåˆ—<br>// maxConcurrentOperationCount == 1 ä¸²è¡Œé˜Ÿåˆ—<br>// maxConcurrentOperationCount == 0 ä¸ä¼šæ‰§è¡Œ<br>// maxConcurrentOperationCount == -1 ç‰¹æ®Šæ„ä¹‰ æœ€å¤§å€¼ è¡¨ç¤ºä¸å—é™åˆ¶<br>queue.maxConcurrentOperationCount = 1;<br>// æ³¨æ„ï¼šä¸²è¡Œæ‰§è¡Œä»»åŠ¡ != åªå¼€ä¸€æ¡çº¿ç¨‹ï¼ˆçº¿ç¨‹åŒæ­¥ï¼‰<br></code></pre></td></tr></table></figure><h6 id="3-2-2-æš‚åœ"><a href="#3-2-2-æš‚åœ" class="headerlink" title="3.2.2 æš‚åœ"></a>3.2.2 æš‚åœ</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// ä¸èƒ½æš‚åœå½“å‰æ­£åœ¨å¤„äºæ‰§è¡ŒçŠ¶æ€çš„ä»»åŠ¡<br>[queue setSuspended:YES];<br></code></pre></td></tr></table></figure><h6 id="3-2-3-æ¢å¤"><a href="#3-2-3-æ¢å¤" class="headerlink" title="3.2.3 æ¢å¤"></a>3.2.3 æ¢å¤</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">[queue setSuspended:NO];<br></code></pre></td></tr></table></figure><h6 id="3-2-4-å–æ¶ˆ"><a href="#3-2-4-å–æ¶ˆ" class="headerlink" title="3.2.4 å–æ¶ˆ"></a>3.2.4 å–æ¶ˆ</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// å–æ¶ˆï¼Œä¸å¯æ¢å¤<br>[queue cancelAllOperations];<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„è‡ªå®šä¹‰çš„<code>NSOperation</code>ï¼Œ<code>mian</code>å‡½æ•°çš„å¤šä¸ªä»»åŠ¡æ˜¯æ— æ³•è¢«æš‚åœçš„ï¼Œå®ƒå¯¹äº<code>queue</code>æ¥è¯´è¿™ä¸ª<code>main</code>å‡½æ•°é‡Œé¢æ˜¯ä¸€ä¸ªä»»åŠ¡ã€‚</p><p>å¯ä»¥é€šè¿‡åˆ¤æ–­<code>isCancelled</code>çš„çŠ¶æ€ï¼Œå–æ¶ˆä»»åŠ¡ï¼ˆ<code>if(self.isCancelled) Return</code>ï¼‰</p></blockquote><h6 id="3-2-5-æ“ä½œä¾èµ–å’Œç›‘å¬"><a href="#3-2-5-æ“ä½œä¾èµ–å’Œç›‘å¬" class="headerlink" title="3.2.5 æ“ä½œä¾èµ–å’Œç›‘å¬"></a>3.2.5 æ“ä½œä¾èµ–å’Œç›‘å¬</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// æ·»åŠ æ“ä½œä¾èµ– å¯ä»¥å¤¸é˜Ÿåˆ—ä¾èµ–<br>[op1 addDependency:op2];<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šä¸èƒ½å¾ªç¯ä¾èµ–</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// æ“ä½œç›‘å¬<br>op1.completionBlock = ^&#123;<br>NSLog(@&quot;æ“ä½œå®Œæˆ&quot;);<br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="ä¸‰ã€å¤šçº¿ç¨‹å®‰å…¨éšæ‚£åŠè§£å†³æ–¹æ¡ˆ"><a href="#ä¸‰ã€å¤šçº¿ç¨‹å®‰å…¨éšæ‚£åŠè§£å†³æ–¹æ¡ˆ" class="headerlink" title="ä¸‰ã€å¤šçº¿ç¨‹å®‰å…¨éšæ‚£åŠè§£å†³æ–¹æ¡ˆ"></a>ä¸‰ã€å¤šçº¿ç¨‹å®‰å…¨éšæ‚£åŠè§£å†³æ–¹æ¡ˆ</h3><ul><li><p>èµ„æºå…±äº«</p><p>ä¸€å—èµ„æºå¯èƒ½ä¼šè¢«å¤šä¸ªçº¿ç¨‹å…±äº«ï¼Œä¹Ÿå°±æ˜¯å¤šä¸ªçº¿ç¨‹å¯èƒ½ä¼šè®¿é—®åŒä¸€å—èµ„æº</p></li><li><p>å½“å¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€å—èµ„æºï¼Œå¾ˆå®¹æ˜“å¼•èµ·æ•°æ®é”™ä¹±å’Œæ•°æ®å®‰å…¨é—®é¢˜</p></li></ul><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202203151723521.png" alt="å®‰å…¨éšæ‚£" style="zoom:40%;margin-left:10px" /><p>è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨çº¿ç¨‹åŒæ­¥æŠ€æœ¯ï¼ˆåŒæ­¥ï¼Œå°±æ˜¯ååŒæ­¥è°ƒï¼ŒæŒ‰é¢„å®šçš„å…ˆåæ¬¡åºè¿›è¡Œï¼‰</p><p>å¸¸è§çš„çº¿ç¨‹åŒæ­¥æŠ€æœ¯æ˜¯ï¼šåŠ é”</p><p>äº’æ–¥é”</p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202203151726535.png" alt="äº’æ–¥é”" style="zoom: 25%;margin-left:10px" /><p>äº’æ–¥é”ä½¿ç”¨å‰æï¼šå¤šæ¡çº¿ç¨‹æŠ¢ç”¨åŒä¸€å—èµ„æº</p><p>äº’æ–¥é”ä½¿ç”¨æ ¼å¼ï¼š</p> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// æ˜¯å¯¹mutex recursiveçš„å°è£… <br>@synchronized (é”å¯¹è±¡ï¼ˆä¸€èˆ¬æ˜¯selfï¼‰) &#123;// éœ€è¦é”å®šçš„ä»£ç &#125;<br></code></pre></td></tr></table></figure><p>äº’æ–¥é”çš„ä¼˜ç¼ºç‚¹ï¼š</p><ul><li>ä¼˜ç‚¹ï¼šèƒ½æœ‰æ•ˆé˜²æ­¢å› å¤šçº¿ç¨‹æŠ¢å¤ºèµ„æºé€ æˆçš„æ•°æ®å®‰å…¨é—®é¢˜</li><li>ç¼ºç‚¹ï¼šéœ€è¦æ¶ˆè€—å¤§é‡çš„CPUèµ„æº</li></ul><p>å¦å¤–ä»‹ç»æ¥ç§é”ğŸ”ï¼š</p><h4 id="1-OSSpinLock"><a href="#1-OSSpinLock" class="headerlink" title="1. OSSpinLock"></a>1. OSSpinLock</h4><p>OSSpinLockå«åšâ€œè‡ªæ—‹é”â€ï¼Œç­‰å¾…æ‰€çš„çº¿ç¨‹ä¼šå¤„äºå¿™ç­‰ï¼ˆbusy-waitï¼‰çŠ¶æ€ï¼Œä¸€ç›´å ç”¨ç€CPUèµ„æº </p><blockquote><p>æ³¨æ„ï¼šç›®å‰å·²ç»ä¸å†å®‰å…¨ï¼Œå¯èƒ½ä¼šå‡ºç°ä¼˜å…ˆçº§åè½¬é—®é¢˜ï¼ˆå¦‚æœç­‰å¾…é”çš„çº¿ç¨‹ä¼˜å…ˆçº§æ¯”è¾ƒé«˜ï¼Œå®ƒä¼šä¸€ç›´å ç”¨ç€CPUèµ„æºï¼Œä¼˜å…ˆçº§ä½çš„çº¿ç¨‹å°±æ— æ³•é‡Šæ”¾é”ï¼‰</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">#import &lt;libkern/OSAtomic.h&gt;<br><br>// åˆå§‹åŒ–<br>OSSpinLock lock = OS_SPINLOCK_INIT;<br>// å°è¯•åŠ é”ï¼ˆå¦‚æœéœ€è¦ç­‰å¾…å°±ä¸åŠ é”ï¼Œç›´æ¥è¿”å›falseï¼›å¦‚æœä¸éœ€è¦ç­‰å¾…å°±åŠ é”ï¼Œè¿”å›trueï¼‰<br>bool result = OSSpinLockTry(&amp;lock)ï¼›<br>// åŠ é”<br>OSSpinLockLock(&amp;lock);<br>// è§£é”<br>OSSpinLockUnlock(&amp;lock);<br></code></pre></td></tr></table></figure><h4 id="2-os-unfair-lock"><a href="#2-os-unfair-lock" class="headerlink" title="2. os_unfair_lock"></a>2. os_unfair_lock</h4><p>os_unfair_lockç”¨äºå–ä»£ä¸å®‰å…¨çš„NSSpinLockï¼Œä»iOS10 æ‰å¼€å§‹æ”¯æŒ</p><p>ä»åº•å±‚è°ƒç”¨çœ‹ï¼Œç­‰å¾…os_unfair_locké”çš„çº¿ç¨‹ä¼šå¤„äºä¼‘çœ çŠ¶æ€ï¼Œå¹¶éå¿™ç­‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">#import &lt;os/lock.h&gt;<br><br>// åˆå§‹åŒ–<br>os_unfair_lock lock = OS_UNFAIR_LOCK_INIT;<br>// å°è¯•åŠ é”<br>os_unfair_lock_trylock(&amp;lock);<br>// åŠ é”<br>os_unfair_lock_lock(&amp;lock);<br>// è§£é”<br>os_unfair_lock_unlock(&amp;lock);<br></code></pre></td></tr></table></figure><h4 id="3-pthread-mutex"><a href="#3-pthread-mutex" class="headerlink" title="3. pthread_mutex"></a>3. pthread_mutex</h4><p>mutexå«åš<font color=orange>äº’æ–¥é”</font>ï¼Œç­‰å¾…é”çš„çº¿ç¨‹ä¼šå¤„äºä¼‘çœ çŠ¶æ€</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">#import &lt;pthread.h&gt;<br><br>@property(nonatomic, assign) pthread_mutex_t mutex;<br><br>// åˆå§‹åŒ–é”çš„å±æ€§<br>pthread_mutexattr_t attr;<br>pthread_mutexattr_init(&amp;attr);<br>// è®¾ç½®å±æ€§<br>/**<br>Mutex type attributes<br>#define PTHREAD_MUTEX_NORMAL        0<br>#define PTHREAD_MUTEX_ERRORCHECK    1<br>#define PTHREAD_MUTEX_RECURSIVE        2  //é€’å½’é”<br>#define PTHREAD_MUTEX_DEFAULT        PTHREAD_MUTEX_NORMAL<br>*/<br>pthread_mutexattr_settype(&amp;attr, PTHREAD_MUTEX_DEFAULT);<br>// åˆå§‹åŒ–é”<br>pthread_mutex_init(&amp;_mutex, &amp;attr);<br><br>// å°è¯•åŠ é”<br>pthread_mutex_trylock(&amp;_mutex);<br>// åŠ é”<br>pthread_mutex_lock(&amp;_mutex);<br>// è§£é”<br>pthread_mutex_unlock(&amp;_mutex);<br>// é”€æ¯ç›¸å…³èµ„æº<br>pthread_mutexattr_destroy(&amp;attr);<br>pthread_mutex_destroy(&amp;_mutex);<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// æ¡ä»¶<br>// åˆå§‹åŒ–é”<br>pthread_mutex_t mutex;<br>// NULLå²±åº™ä½¿ç”¨é»˜è®¤å±æ€§<br>pthread_mutex_init(&amp;mutex, NULL);<br>// åˆå§‹åŒ–æ¡ä»¶<br>pthread_cond_t cond;<br>pthread_cond_init(&amp;condï¼ŒNULL);<br>// ç­‰å¾…æ¡ä»¶(è¿›å…¥ä¼‘çœ çŠ¶æ€ï¼Œæ”¾å¼€mutexé”ï¼›è¢«å”¤é†’åï¼Œä¼šå†æ¬¡å¯¹mutexåŠ é”)<br>pthread_cond_wait(condï¼Œ&amp;mutex);<br>// æ¿€æ´»ä¸€ä¸ªç­‰å¾…è¯¥æ¡ä»¶çš„çº¿ç¨‹<br>pthread_cond_signal(&amp;cond);<br>// æ¿€æ´»æ‰€æœ‰ç­‰å¾…è¯¥æ¡ä»¶çš„çº¿ç¨‹<br>pthread_cond_broadcast(&amp;cond);<br>// é”€æ¯èµ„æº<br>pthread_mutex_destroy(&amp;mutex);<br>pthread_cond_destory(&amp;cond);<br><br></code></pre></td></tr></table></figure><h4 id="4-NSLockã€NSRecursiveLockã€NSCondition"><a href="#4-NSLockã€NSRecursiveLockã€NSCondition" class="headerlink" title="4. NSLockã€NSRecursiveLockã€NSCondition"></a>4. NSLockã€NSRecursiveLockã€NSCondition</h4><p>NSLockæ˜¯å¯¹mutexæ™®é€šé”çš„å°è£…ã€‚</p><p>NSRecursiveLockæ˜¯å¯¹mutexé€’å½’é”çš„å°è£…ï¼ŒAPIè·ŸNSLockåŸºæœ¬ä¸€è‡´ã€‚</p><p>NSConditionæ˜¯å¯¹mutexå’Œconditionçš„å°è£…</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// åˆå§‹åŒ–é”<br>NSLock *lock = [[NSlock alloc] init];<br>// å°è¯•åŠ é”<br>[lock tryLock];<br>// åŠ é”<br>[lock lock];<br>// è§£é”<br>[lock unlock];<br></code></pre></td></tr></table></figure><h4 id="5-dispatch-queue"><a href="#5-dispatch-queue" class="headerlink" title="5. dispatch_queue"></a>5. dispatch_queue</h4><p>ç›´æ¥ä½¿ç”¨GCDçš„ä¸²è¡Œé˜Ÿåˆ—ï¼Œä¹Ÿå¯ä»¥å®ç°çº¿ç¨‹åŒæ­¥</p><h4 id="6-dispatch-semaphore"><a href="#6-dispatch-semaphore" class="headerlink" title="6. dispatch_semaphore"></a>6. dispatch_semaphore</h4><ul><li>semaphoreå«åšâ€ä¿¡å·é‡â€œ</li><li>ä¿¡å·é‡çš„åˆå§‹å€¼ï¼Œå¯ä»¥ç”¨æ¥æ§åˆ¶çº¿ç¨‹å¹¶å‘è®¿é—®çš„æœ€å¤§æ•°é‡</li><li>ä¿¡å·é‡åˆå§‹å€¼ä¸º1ï¼Œä»£è¡¨åŒæ—¶åªå…è®¸ä¸€æ¡çº¿ç¨‹è®¿é—®èµ„æºï¼Œä¿è¯çº¿ç¨‹åŒæ­¥</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// ä¿¡å·é‡çš„åˆå§‹å€¼<br>int value = 1;<br>dispatch_semaphore_t semaphore = dispatch_semophore_creat(value);<br>// å¦‚æœä¿¡å·é‡çš„å€¼&lt;=0ï¼Œå½“å‰çº¿ç¨‹å°±ä¼šåŠå¦‚ä¼‘çœ çŠ¶æ€ï¼ˆç›´åˆ°ä¿¡å·é‡çš„å€¼&gt;0ï¼‰<br>// å¦‚æœä¿¡å·é‡çš„å€¼&gt;0ï¼Œå°±å‡1ï¼Œç„¶åå¾€ä¸‹æ‰§è¡Œåé¢çš„ä»£ç <br>dispatch_semaphore_wait(semaphore,DISAPTCH_TIME_FOREVER)ï¼›<br>// è®©ä¿¡å·é‡çš„å€¼åŠ 1<br>dispatch_semaphore_signal(semaphore);<br></code></pre></td></tr></table></figure><h3 id="å››ã€iOSä¸­è¯»å†™å®‰å…¨æ–¹æ¡ˆ"><a href="#å››ã€iOSä¸­è¯»å†™å®‰å…¨æ–¹æ¡ˆ" class="headerlink" title="å››ã€iOSä¸­è¯»å†™å®‰å…¨æ–¹æ¡ˆ"></a>å››ã€iOSä¸­è¯»å†™å®‰å…¨æ–¹æ¡ˆ</h3><p>ç»å…¸åœºæ™¯â€œå¤šè¯»å•å†™â€</p><h4 id="1-pthread-rwlock"><a href="#1-pthread-rwlock" class="headerlink" title="1. pthread_rwlock"></a>1. pthread_rwlock</h4><p>è¯»å†™é”</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">#import &quot;pthread.h&quot;<br><br>@property(nonatomic, assign) pthread_rwlock_t lock;<br><br>// åˆå§‹åŒ–é”<br>pthread_rwlock_t lock;<br>// è¯»-åŠ é”<br>pthread_rwlock_rdlock(&amp;_lock);<br>// è¯»-å°è¯•åŠ é”<br>pthread_rwlock_tryrdlock(&amp;_lock);<br>// å†™-åŠ é”<br>pthread_rwlock_wrlock(&amp;_lock);<br>// å†™-å°è¯•åŠ é”<br>pthread_rwlock_trywrlock(&amp;_lock);<br>// è§£é”<br>pthread_rwlock_unlock(&amp;_lock);<br>// é”€æ¯<br>pthread_rwlock_destroy(&amp;_lock);<br></code></pre></td></tr></table></figure><h4 id="2-dispatch-barrrier-async"><a href="#2-dispatch-barrrier-async" class="headerlink" title="2. dispatch_barrrier_async"></a>2. dispatch_barrrier_async</h4><p>å¼‚æ­¥æ …æ è°ƒç”¨</p><ul><li>è¿™ä¸ªå‡½æ•°ä¼ å…¥çš„å¹¶å‘é˜Ÿåˆ—å¿…é¡»æ˜¯è‡ªå·±é€šè¿‡dispatch_queue_createåˆ›å»ºçš„</li><li>å¦‚æœä¼ å…¥çš„æ˜¯ä¸€ä¸ªä¸²è¡Œæˆ–æ˜¯ä¸€ä¸ªå…¨å±€çš„å¹¶å‘é˜Ÿåˆ—ï¼Œé‚£è¿™ä¸ªå‡½æ•°ç­‰åŒäºdispatch_asyncå‡½æ•°çš„ç»“æœ</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">dispatch_queue_t queue = dispatch_queue_create(&quot;myQueue&quot;, DISPATCH_QUEUE_CONCURRENT);<br>// è¯»<br>dispatch_async(queue, ^&#123;<br><br>&#125;);<br>// å†™<br>dispatch_barrier_async(queue, ^&#123;<br><br>&#125;);<br></code></pre></td></tr></table></figure><h3 id="é¢è¯•é¢˜"><a href="#é¢è¯•é¢˜" class="headerlink" title="é¢è¯•é¢˜"></a>é¢è¯•é¢˜</h3><ol><li><p>ä¸‹é¢ä»£ç æ‰“å°ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">dispatch_queue_t queue = dispatch_get_global_queue(0, 0);<br>dispatch_async(queue, ^&#123;<br>   NSLog(@&quot;1&quot;);<br>   [self performSelector:@selector(test) withObject:nil afterDelay:.0];<br>   NSLog(@&quot;3&quot;);<br>&#125;);<br><br>-(void)test&#123;<br>    NSLog(@&quot;2&quot;);<br>&#125;<br></code></pre></td></tr></table></figure><p>æ‰“å°ç»“æœï¼š1ã€3</p><p>åŸå› ï¼š</p><p>performSelect:withObject:afterDely:çš„æœ¬è´¨æ˜¯å¾€runloopä¸­æ·»åŠ å®šæ—¶å™¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// åœ¨GNUStepä¸­æŸ¥çœ‹performSelectçš„åº•å±‚å®ç°<br>- (void) performSelector: (SEL)aSelector<br>      withObject: (id)argument<br>      afterDelay: (NSTimeInterval)seconds<br>&#123;<br>  NSRunLoop*loop = [NSRunLoop currentRunLoop];<br>  GSTimedPerformer*item;<br><br>  item = [[GSTimedPerformer alloc] initWithSelector: aSelector<br>     target: self<br>   argument: argument<br>      delay: seconds];<br>  [[loop _timedPerformers] addObject: item];<br>  RELEASE(item);<br>  [loop addTimer: item-&gt;timer forMode: NSDefaultRunLoopMode];<br>&#125;<br></code></pre></td></tr></table></figure><p>å­çº¿ç¨‹é»˜è®¤æ˜¯æ²¡æœ‰å¼€å¯runloopçš„</p><p>è§£å†³æ–¹æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">dispatch_queue_t queue = dispatch_get_global_queue(0, 0);<br>    dispatch_async(queue, ^&#123;<br>        NSLog(@&quot;1&quot;);<br>        [self performSelector:@selector(test) withObject:nil afterDelay:.0];<br>        NSLog(@&quot;3&quot;);<br>        [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];<br>    &#125;);<br><br>-(void)test&#123;<br>    NSLog(@&quot;2&quot;);<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p> ä¸‹é¢ä»£ç çš„æ‰§è¡Œç»“æœï¼Ÿ</p></li></ol>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">NSThread *thread = [[NSThread alloc]initWithBlock:^&#123;<br>NSLog(@&quot;1&quot;);<br>&#125;];<br>[thread start];<br>[self performSelector:@selector(test) onThread:thread withObject:nil waitUntilDone:YES];<br><br>-(void)test&#123;<br>    NSLog(@&quot;2&quot;);<br>&#125;<br></code></pre></td></tr></table></figure><p>   æ‰§è¡Œç»“æœï¼šæ‰“å°1; æŠ›å‡º<code>target thread exited while waiting for the perform</code>å¼‚å¸¸</p><p>   åŸå› ï¼šå­çº¿ç¨‹åœ¨å®Œæˆblockä¸­çš„ä»£ç åï¼Œé€€å‡ºäº†</p><p>   è§£å†³æ–¹æ³•ï¼š</p>   <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs objc"><span class="hljs-built_in">NSThread</span> *thread = [[<span class="hljs-built_in">NSThread</span> alloc]initWithBlock:^&#123;<br><span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@&quot;1&quot;</span>);<br>[[<span class="hljs-built_in">NSRunLoop</span> currentRunLoop] addPort:[[<span class="hljs-built_in">NSPort</span> alloc]init] forMode:<span class="hljs-built_in">NSDefaultRunLoopMode</span>];<br>[[<span class="hljs-built_in">NSRunLoop</span> currentRunLoop] runMode:<span class="hljs-built_in">NSDefaultRunLoopMode</span> beforeDate:[<span class="hljs-built_in">NSDate</span> distantFuture]];<br>&#125;];<br>[thread start];<br>[<span class="hljs-keyword">self</span> performSelector:<span class="hljs-keyword">@selector</span>(test) onThread:thread withObject:<span class="hljs-literal">nil</span> waitUntilDone:<span class="hljs-literal">YES</span>];<br><br>-(<span class="hljs-keyword">void</span>)test&#123;<br>    <span class="hljs-built_in">NSLog</span>(<span class="hljs-string">@&quot;2&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><ol start="3"><li><p>å¦‚ä½•ä½¿ç”¨GCDå®ç°ä»¥ä¸‹åŠŸèƒ½ï¼Œå¼‚æ­¥å¹¶å‘æ‰§è¡Œä»»åŠ¡1å’Œä»»åŠ¡2ï¼Œéƒ½æ‰§è¡Œå®Œæˆä¹‹åå›åˆ°ä¸»çº¿ç¨‹æ‰§è¡Œä»»åŠ¡3</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// åˆ›å»ºé˜Ÿåˆ—ç»„<br>dispatch_group_t group = dispatch_group_create();<br>// åˆ›å»ºå¹¶å‘é˜Ÿåˆ—<br>dispatch_queue_t queue = dispatch_queue_create(&quot;my_queue&quot;, DISPATCH_QUEUE_CONCURRENT);<br>// æ·»åŠ å¼‚æ­¥ä»»åŠ¡<br>dispatch_group_async(group, queue, ^&#123;<br>    NSLog(@&quot;ä»»åŠ¡1&quot;);<br>&#125;);<br>dispatch_group_async(group, queue, ^&#123;<br>    NSLog(@&quot;ä»»åŠ¡2&quot;);<br>&#125;);<br>// å›åˆ°ä¸»é˜Ÿåˆ—<br>dispatch_group_notify(group, dispatch_get_main_queue(), ^&#123;<br>NSLog(@&quot;ä»»åŠ¡3&quot;);<br>&#125;);<br></code></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    <categories>
      
      <category>iOS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å¤‡è€ƒ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>iOS_RunLoop</title>
    <link href="/2022/03/08/iOS/%E5%A4%87%E8%80%83/Runtime&amp;Runloop/iOS_Runloop/"/>
    <url>/2022/03/08/iOS/%E5%A4%87%E8%80%83/Runtime&amp;Runloop/iOS_Runloop/</url>
    
    <content type="html"><![CDATA[<h3 id="ä¸€ã€ä»€ä¹ˆæ˜¯RunLoop"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯RunLoop" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯RunLoop"></a>ä¸€ã€ä»€ä¹ˆæ˜¯RunLoop</h3><p>é¡¾åæ€ä¹‰è¿è¡Œå¾ªç¯ï¼Œåœ¨ç¨‹åºè¿è¡Œä¸­å¾ªç¯åšä¸€äº›äº‹æƒ…</p><p>åº”ç”¨èŒƒç•´ï¼š</p><ul><li>å®šæ—¶å™¨ï¼ˆTimerï¼‰ã€PerformSelector</li><li>GCD  Async Main Queue</li><li>äº‹ä»¶å“åº”ã€æ‰‹åŠ¿è¯†åˆ«ã€ç•Œé¢åˆ·æ–°</li><li>ç½‘ç»œè¯·æ±‚</li><li>AutoreleasePool</li></ul><p>RunLoopçš„åŸºæœ¬ä½œç”¨ï¼š</p><ul><li>ä¿æŒç¨‹åºçš„æŒç»­è¿è¡Œï¼ˆæ²¡æœ‰runloopç¨‹åºä¼šé©¬ä¸Šé€€å‡ºï¼‰</li><li>å¤„ç†Appä¸­çš„å„ç§äº‹ä»¶ï¼ˆæ¯”å¦‚è§¦æ‘¸äº‹ä»¶ã€å®šæ—¶å™¨äº‹ä»¶ï¼‰</li><li>èŠ‚çœCPUèµ„æºï¼Œæé«˜ç¨‹åºæ€§èƒ½ï¼ˆéœ€è¦åšäº‹çš„æ—¶å€™åšäº‹ï¼Œæ²¡äº‹åšçš„æ—¶å€™ä¼‘æ¯ ï¼‰</li><li>ç­‰ç­‰</li></ul><h3 id="äºŒã€RunLoopå¯¹è±¡"><a href="#äºŒã€RunLoopå¯¹è±¡" class="headerlink" title="äºŒã€RunLoopå¯¹è±¡"></a>äºŒã€RunLoopå¯¹è±¡</h3><p>iOSä¸­æœ‰ä¸¤å¥—APIæ¥è®¿é—®å’Œä½¿ç”¨<code>RunLoop</code>ï¼Œ<code>Foundation</code>æ¡†æ¶ä¸‹çš„<code>NSRunLoop</code>å’Œ<code>Core Foundation</code>æ¡†æ¶ä¸‹çš„<code>CFRunLoopRef</code>ï¼Œå®ƒä»¬éƒ½ä»£è¡¨ç€<code>RunLoop</code>å¯¹è±¡ã€‚å…¶ä¸­<code>NSRunLoop</code>æ˜¯åŸºäº<a href="https://opensource.apple.com/tarballs/CF/">CFRunLoopRef</a>çš„ä¸€å±‚OCåŒ…è£…ã€‚</p><p>è·å–RunLoopdå¯¹è±¡ï¼š</p><ol><li><p>Foundation</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// è·å–å½“å‰çº¿ç¨‹runloop<br>[NSRunLoop currentRunLoop];<br>// è·å–ä¸»çº¿ç¨‹runloop<br>[NSRunLoop mainRunLoop];<br></code></pre></td></tr></table></figure></li><li><p>CoreFoundation</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// è·å–å½“å‰çº¿ç¨‹runloop<br>CFRunLoopGetCurrent();<br>// è·å–ä¸»çº¿ç¨‹runloop<br>CFRunLoopGetMain();<br></code></pre></td></tr></table></figure></li></ol><h3 id="ä¸‰ã€RunLoopä¸çº¿ç¨‹"><a href="#ä¸‰ã€RunLoopä¸çº¿ç¨‹" class="headerlink" title="ä¸‰ã€RunLoopä¸çº¿ç¨‹"></a>ä¸‰ã€RunLoopä¸çº¿ç¨‹</h3><ol><li>æ¯æ¡çº¿ç¨‹éƒ½æœ‰å”¯ä¸€çš„ä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„<code>RunLoop</code>å¯¹è±¡</li><li><code>RunLoop</code>ä¿å­˜åœ¨ä¸€ä¸ªå…¨å±€çš„<code>Dictionary</code>ä¸­ï¼Œçº¿ç¨‹ä½œä¸ºkeyï¼Œ<code>RunLoop</code>ä½œä¸ºvalue</li><li>çº¿ç¨‹åˆšåˆ›å»ºçš„æ—¶å€™å¹¶æ²¡æœ‰<code>RunLoop</code>å¯¹è±¡ï¼Œ<code>RunLoop</code>å¯¹è±¡ä¼šåœ¨ç¬¬ä¸€æ¬¡è·å–å®ƒçš„æ—¶å€™åˆ›å»º</li><li><code>RunLoop</code>ä¼šåœ¨çº¿ç¨‹ç»“æŸæ—¶é”€æ¯</li><li>ä¸»çº¿ç¨‹çš„<code>RunLoop</code>å·²ç»è‡ªåŠ¨è·å–ï¼ˆåˆ›å»ºï¼‰ï¼Œå­çº¿ç¨‹é»˜è®¤æ²¡æœ‰å¼€å¯<code>RunLoop</code></li></ol><h3 id="å››ã€RunLoopç›¸å…³çš„ç±»"><a href="#å››ã€RunLoopç›¸å…³çš„ç±»" class="headerlink" title="å››ã€RunLoopç›¸å…³çš„ç±»"></a>å››ã€RunLoopç›¸å…³çš„ç±»</h3><p>Core Foundationä¸­å…³äºRunLoopçš„äº”ä¸ªç±»ï¼š</p><ul><li>CFRunLoopRef</li><li>CFRunLoopModeRef</li><li>CFRunLoopScorceRef</li><li>CFRunLoopTimerRef</li><li>CFRunLoopObserverRef</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> __<span class="hljs-title">CFRunLoopRef</span>;</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> __<span class="hljs-title">CFRunLoop</span>&#123;</span><br>  <span class="hljs-keyword">pthread_t</span> _pthread; <br>  CFMutableSetRef _commonModes;<br>  CFMutableSetRef _commonModeItems;<br>  CFRunLoopModeRef _currentMoode;<br>  CFMutableSetRef _modes;<br>&#125;<br><br><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> __<span class="hljs-title">CFRunLoopMode</span> *<span class="hljs-title">CFRunLoopModeRef</span>;</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> __<span class="hljs-title">CFRunLoopMode</span>&#123;</span><br>  CFStringRef _name;<br>  CFMutableSetRef _sources0;<br>  CFMutableSetRef _sources1;<br>  CFMutableArrayRef _Observers;<br>  CFMutableArrayRef _timers;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="1-CFRunLoopModeRef"><a href="#1-CFRunLoopModeRef" class="headerlink" title="1. CFRunLoopModeRef"></a>1. CFRunLoopModeRef</h4><ul><li>CFRunLoopModeRefä»£è¡¨RunLoopçš„è¿è¡Œæ¨¡å¼</li><li>ä¸€ä¸ªRunLoopåŒ…å«è‹¥å¹²ä¸ªModeï¼Œæ¯ä¸ªModeåˆåŒ…å«è‹¥å¹²ä¸ªSources0/Sources1/Timer/Observer</li><li>RunLoopå¯åŠ¨æ—¶åªèƒ½é€‰æ‹©å…¶ä¸­ä¸€ä¸ªModeï¼Œä½œä¸ºå½“å‰çš„currentMode</li><li>å¦‚æœè¦åˆ‡æ¢Modeï¼Œåªèƒ½é€€å‡ºå½“å‰çš„loopï¼Œé‡æ–°é€‰æ‹©ä¸€ä¸ªModeè¿›å…¥ï¼ˆä¸åŒç»„çš„Sources0/Source1/Timer/Observerèƒ½åˆ†å‰²å¼€æ¥ï¼Œäº’ä¸å½±å“ï¼‰</li><li>å¦‚æœModeé‡Œé¢æ²¡æœ‰ä»»ä½•çš„Sources0/Sources1/Timer/Obsercerï¼ŒRunLoopä¼šç«‹é©¬é€€å‡º</li></ul><p>å¸¸è§çš„ä¸¤ç§CFRunLoopModeRefï¼š</p><ul><li><p>kCFRunLoopDefeaultModeï¼ˆNSDefeaultRunLoopModeï¼‰</p><p>Appçš„é»˜è®¤Modeï¼Œé€šå¸¸ä¸»çº¿ç¨‹æ˜¯åœ¨è¿™ä¸ªModeä¸‹è¿è¡Œçš„</p></li><li><p>UITrackingRunLoopMode</p><p>ç•Œé¢è·Ÿè¸ªModeï¼Œç”¨äºScrollViewè¿½è¸ªè§¦æ‘¸æ»‘åŠ¨ï¼Œä¿è¯ç•Œé¢æ»‘åŠ¨æ—¶ä¸æ”¶å…¶ä»–Modeçš„å½±å“</p></li></ul><h4 id="2-CFRunLoopObserverRef"><a href="#2-CFRunLoopObserverRef" class="headerlink" title="2. CFRunLoopObserverRef"></a>2. CFRunLoopObserverRef</h4><p>RunLoopçš„æ‰€æœ‰çŠ¶æ€æšä¸¾</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-keyword">typedef</span> <span class="hljs-title">CF_OPTIONS</span><span class="hljs-params">(CFOptionFlags, CFRunLoopActivity)</span> </span>&#123;<br>    kCFRunLoopEntry = (<span class="hljs-number">1UL</span> &lt;&lt; <span class="hljs-number">0</span>),<span class="hljs-comment">// å³å°†è¿›å…¥runloop</span><br>    kCFRunLoopBeforeTimers = (<span class="hljs-number">1UL</span> &lt;&lt; <span class="hljs-number">1</span>),    <span class="hljs-comment">// å³å°†å¤„ç†Timer</span><br>    kCFRunLoopBeforeSources = (<span class="hljs-number">1UL</span> &lt;&lt; <span class="hljs-number">2</span>),   <span class="hljs-comment">// å³å°†å¤„ç†Source</span><br>    kCFRunLoopBeforeWaiting = (<span class="hljs-number">1UL</span> &lt;&lt; <span class="hljs-number">5</span>),   <span class="hljs-comment">// å³å°†è¿›å…¥ä¼‘çœ </span><br>    kCFRunLoopAfterWaiting = (<span class="hljs-number">1UL</span> &lt;&lt; <span class="hljs-number">6</span>),    <span class="hljs-comment">// åˆšä»ä¼‘çœ ä¸­å”¤é†’</span><br>    kCFRunLoopExit = (<span class="hljs-number">1UL</span> &lt;&lt; <span class="hljs-number">7</span>),<span class="hljs-comment">// å³å°†é€€å‡ºrunloop</span><br>    kCFRunLoopAllActivities = <span class="hljs-number">0x0FFFFFFF</span>U<br>&#125;;<br></code></pre></td></tr></table></figure><p>æ·»åŠ Observerç›‘å¬RunLoopçš„æ‰€æœ‰çŠ¶æ€</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">CFRunLoopObserverRef observer = CFRunLoopObserverCreateWithHandler(kCFAllocatorDefault, kCFRunLoopAllActivities, YES, 0, ^(CFRunLoopObserverRef observer, CFRunLoopActivity activity) &#123;<br>    switch (activity) &#123;<br>        case kCFRunLoopEntry:<br>            NSLog(@&quot;kCFRunLoopEntry&quot;);<br>            break;<br>        case kCFRunLoopBeforeTimers:<br>            NSLog(@&quot;kCFRunLoopBeforeTimers&quot;);<br>            break;<br>        case kCFRunLoopBeforeSources:<br>            NSLog(@&quot;kCFRunLoopBeforeSources&quot;);<br>            break;<br>        case kCFRunLoopBeforeWaiting:<br>            NSLog(@&quot;kCFRunLoopBeforeWaiting&quot;);<br>            break;<br>        case kCFRunLoopAfterWaiting:<br>            NSLog(@&quot;kCFRunLoopAfterWaiting&quot;);<br>            break;<br>       case kCFRunLoopExit:<br>            NSLog(@&quot;kCFRunLoopExit&quot;);<br>            break;        <br>        default:<br>            break;<br>    &#125;<br>&#125;);<br>CFRunLoopAddObserver(CFRunLoopGetCurrent(), observer, kCFRunLoopCommonModes);<br>CFRelease(observer);<br></code></pre></td></tr></table></figure><h3 id="äº”ã€RunLoopçš„è¿è¡Œé€»è¾‘"><a href="#äº”ã€RunLoopçš„è¿è¡Œé€»è¾‘" class="headerlink" title="äº”ã€RunLoopçš„è¿è¡Œé€»è¾‘"></a>äº”ã€RunLoopçš„è¿è¡Œé€»è¾‘</h3><ol><li>é€šçŸ¥Observersï¼šè¿›å…¥runloop</li><li>é€šçŸ¥Observersï¼šå³å°†å¤„ç†Timers</li><li>é€šçŸ¥Observersï¼šå³å°†å¤„ç†Sources</li><li>å¤„ç†Blocks</li><li>å¤„ç†Source0ï¼ˆå¯èƒ½ä¼šå†æ¬¡å¤„ç†Blocksï¼‰</li><li>å¦‚æœå­˜åœ¨Sources1ï¼Œå°±è·³åˆ°ç¬¬8æ­¥</li><li>é€šçŸ¥Observersï¼šå¼€å§‹ä¼‘çœ ï¼ˆç­‰å¾…æ¶ˆæ¯å”¤é†’ï¼‰ </li><li>é€šçŸ¥Observersï¼šç»“æŸä¼‘çœ ï¼ˆè¢«æŸä¸ªæ¶ˆæ¯å”¤é†’ï¼‰<ul><li>å¤„ç†Timer</li><li>å¤„ç†GCD Async To Main Queue</li><li>å¤„ç†Source1</li></ul></li><li>å¤„ç†Blocks</li><li>æ ¹æ®å‰é¢çš„æ‰§è¡Œç»“æœï¼Œå†³å®šå¦‚ä½•æ“ä½œ<ul><li>å›åˆ°ç¬¬äºŒæ­¥</li><li>é€€å‡ºrunloop</li></ul></li><li>é€šçŸ¥Observersï¼šé€€å‡ºrunloop</li></ol><h4 id="Sources0"><a href="#Sources0" class="headerlink" title="Sources0"></a>Sources0</h4><ul><li>è§¦æ‘¸äº‹ä»¶å¤„ç†</li><li>performSelector:onThread:</li></ul><h4 id="Sources1"><a href="#Sources1" class="headerlink" title="Sources1"></a>Sources1</h4><ul><li>åŸºäºPortçš„çº¿ç¨‹é—´é€šä¿¡</li><li>ç³»ç»Ÿäº‹ä»¶æ•æ‰</li></ul><h4 id="Timers"><a href="#Timers" class="headerlink" title="Timers"></a>Timers</h4><ul><li>NSTimer</li><li>perfromSelector:withObject:afterDelay:</li></ul><h4 id="Observers"><a href="#Observers" class="headerlink" title="Observers"></a>Observers</h4><ul><li>ç”¨äºç›‘å¬runloopçš„åˆ·æ–°çŠ¶æ€</li><li>UIåˆ·æ–°ï¼ˆBeforeWaitingï¼‰</li><li>Autorelease pool ï¼ˆBeforWaitingï¼‰</li></ul><h3 id="å…­ã€å®é™…åº”ç”¨"><a href="#å…­ã€å®é™…åº”ç”¨" class="headerlink" title="å…­ã€å®é™…åº”ç”¨"></a>å…­ã€å®é™…åº”ç”¨</h3><h4 id="1-è§£å†³NSTimeråœ¨æ»‘åŠ¨æ—¶åœæ­¢å·¥ä½œçš„é—®é¢˜"><a href="#1-è§£å†³NSTimeråœ¨æ»‘åŠ¨æ—¶åœæ­¢å·¥ä½œçš„é—®é¢˜" class="headerlink" title="1. è§£å†³NSTimeråœ¨æ»‘åŠ¨æ—¶åœæ­¢å·¥ä½œçš„é—®é¢˜"></a>1. è§£å†³NSTimeråœ¨æ»‘åŠ¨æ—¶åœæ­¢å·¥ä½œçš„é—®é¢˜</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">static int a = 1;<br>NSTimer *timer = [NSTimer timerWithTimeInterval:1 repeats:YES block:^(NSTimer * _Nonnull timer) &#123;<br>    NSLog(@&quot;%d&quot;,a++);<br>&#125;];<br>//å®šæ—¶å™¨é»˜è®¤å·¥ä½œåœ¨NSDefaultRunLoopModeæ¨¡å¼ä¸‹ï¼Œå½“æˆ‘ä»¬å¯¹æ§åˆ¶å™¨ä¸­è§†å›¾è¿›è¡Œæ‹–æ‹½çš„æ—¶å€™ï¼ŒcurrentModeä¼šè¿›å…¥åˆ°UITrackingRunLoopModeæ¨¡å¼ä¸‹ï¼Œå¯¼è‡´å®šæ—¶å™¨åœ¨æ‹–æ‹½è¿‡ç¨‹ä¸­ä¸è¿è¡Œ<br>// è§£å†³æ–¹æ³•æ˜¯ï¼Œå°†timeræ”¾åˆ°NSRunLoopCommonModes æ¨¡å¼ä¸‹ã€‚ä½†æ˜¯è¿™é‡Œçš„NSRunLoopCommonModeså¹¶ä¸æ˜¯çœŸæ­£çš„æ¨¡å¼ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªæ ‡è®°<br>[[NSRunLoop currentRunLoop] addTimer:timer forMode:NSRunLoopCommonModes]; <br></code></pre></td></tr></table></figure><h4 id="2-æ§åˆ¶çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸï¼ˆçº¿ç¨‹ä¿æ´»ï¼‰"><a href="#2-æ§åˆ¶çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸï¼ˆçº¿ç¨‹ä¿æ´»ï¼‰" class="headerlink" title="2. æ§åˆ¶çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸï¼ˆçº¿ç¨‹ä¿æ´»ï¼‰"></a>2. æ§åˆ¶çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸï¼ˆçº¿ç¨‹ä¿æ´»ï¼‰</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">#import &lt;Foundation/Foundation.h&gt;<br><br>NS_ASSUME_NONNULL_BEGIN<br><br>typedef void (^TPermenantThreadTask)(void);<br><br>@interface TPermenantThread : NSObject<br>/**<br> å¼€å¯ä¸€ä¸ªçº¿ç¨‹<br> */<br>-(void)run;<br>/**<br> ç»“æŸä¸€ä¸ªçº¿ç¨‹<br> */<br>-(void)stop;<br>/**<br> æ‰§è¡Œä¸€ä¸ªä»»åŠ¡<br> */<br>-(void)executeTask:(TPermenantThreadTask)task;<br><br>@end<br><br>NS_ASSUME_NONNULL_END<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">#import &quot;TPermenantThread.h&quot;<br>@interface TPermenantThread()<br>@property(nonatomic, strong)NSThread *innerThread;<br>@property(nonatomic, assign, getter=isStopped)BOOL stopped;<br>@end<br><br>@implementation TPermenantThread<br><br>- (instancetype)init&#123;<br>    if (self = [super init]) &#123;<br>        self.stopped = NO;<br>        self.innerThread = [[NSThread alloc]initWithBlock:^&#123;<br>            // æ·»åŠ port<br>            NSLog(@&quot;---begain--&quot;);<br>            [[NSRunLoop currentRunLoop] addPort:[[NSPort alloc]init] forMode:NSDefaultRunLoopMode];<br>            __weak typeof(self) weakSelf = self;<br>            // çº¿ç¨‹ä¿æ´»<br>            while(weakSelf &amp;&amp; !weakSelf.isStopped) &#123;<br>                // å¯åŠ¨runloop<br>                [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];<br>            &#125;<br>            NSLog(@&quot;---end--&quot;);<br>        &#125;];<br>        [self.innerThread start];<br>    &#125;<br>    return  self;;<br>&#125;<br><br>- (void)run&#123;<br>    [self.innerThread start];<br>&#125;<br><br>- (void)stop&#123;<br>    if (!self.innerThread) return;<br>    [self performSelector:@selector(__stop) onThread:self.innerThread withObject:nil waitUntilDone:YES];<br>&#125;<br><br>- (void)executeTask:(TPermenantThreadTask)task&#123;<br>    if (!self.innerThread || !task) return;<br>    <br>    if (!self.innerThread.isExecuting) &#123;<br>        [self.innerThread start];<br>    &#125;<br>    <br>    [self performSelector:@selector(__executeTask:) onThread:self.innerThread withObject:task waitUntilDone:NO];<br>&#125;<br><br>- (void)dealloc&#123;<br>    [self stop];<br>&#125;<br><br>- (void)__stop&#123;<br>    self.stopped = YES;<br>    CFRunLoopStop(CFRunLoopGetCurrent());<br>    self.innerThread = nil;<br>&#125;<br><br>- (void)__executeTask:(TPermenantThreadTask)task&#123;<br>    task();<br>&#125;<br><br>@end<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>iOS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å¤‡è€ƒ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä½è¿ç®—</title>
    <link href="/2022/03/02/%E7%AE%97%E6%B3%95/%E4%BD%8D%E8%BF%90%E7%AE%97/"/>
    <url>/2022/03/02/%E7%AE%97%E6%B3%95/%E4%BD%8D%E8%BF%90%E7%AE%97/</url>
    
    <content type="html"><![CDATA[<p>æ‰€è°“çš„ä½è¿ç®—å°±æ˜¯å¯¹ä¸€ä¸ªæ¯”ç‰¹ï¼ˆbitï¼‰ä½è¿›è¡Œæ“ä½œã€‚bitæ˜¯ä¸€ä¸ªç”µå­å…ƒå™¨ä»¶ï¼Œ8ä¸ªbitæ„æˆä¸€ä¸ªå­—èŠ‚ï¼ˆByteï¼‰ï¼Œå®ƒæ˜¯ç²’åº¦æœ€å°çš„å¯æ“ä½œå•å…ƒã€‚</p><p>Cå’ŒOCä¸­å¸¸è§ç±»å‹åŠå®ƒä»¬æ‰€å å­—èŠ‚æ•°ï¼š</p><table><thead><tr><th>Cè¯­è¨€ç±»å‹</th><th>æ‰€å å­—èŠ‚(bit)</th><th>OCè¯­è¨€ç±»å‹</th><th>æ‰€å å­—èŠ‚(bit)</th></tr></thead><tbody><tr><td>int</td><td>4</td><td>NSInter</td><td>8</td></tr><tr><td>float</td><td>4</td><td>CGFloat</td><td>8</td></tr><tr><td>double</td><td>8</td><td>double</td><td>8</td></tr><tr><td>char</td><td>1</td><td>NSString</td><td>8</td></tr></tbody></table><p>Cè¯­è¨€æä¾›äº†å…­ç§ä½è¿ç®—ï¼š</p><table><thead><tr><th>è¿ç®—ç¬¦</th><th>&amp;</th><th>|</th><th>^</th><th>-</th><th>&lt;&lt;</th><th>&gt;&gt;</th></tr></thead><tbody><tr><td>è¯´æ˜</td><td>æŒ‰ä½ä¸</td><td>æŒ‰ä½æˆ–</td><td>æŒ‰ä½å¼‚æˆ–</td><td>å–å</td><td>å·¦ç§»</td><td>å³ç§»</td></tr></tbody></table><h3 id="ä¸€ã€æŒ‰ä½ä¸è¿ç®—-ï¼ˆ-amp-ï¼‰"><a href="#ä¸€ã€æŒ‰ä½ä¸è¿ç®—-ï¼ˆ-amp-ï¼‰" class="headerlink" title="ä¸€ã€æŒ‰ä½ä¸è¿ç®— ï¼ˆ&amp;ï¼‰"></a>ä¸€ã€æŒ‰ä½ä¸è¿ç®— ï¼ˆ&amp;ï¼‰</h3><p>ä¸€ä¸ªbitä½åªæœ‰0å’Œ1ä¸¤ä¸ªå–å€¼ï¼Œåªæœ‰å‚ä¸<code>&amp;</code>è¿ç®—çš„ä¸¤ä¸ªä½éƒ½ä¸º1æ—¶ï¼Œç»“æœæ‰ä¸º1ï¼Œå¦åˆ™ä¸º0ã€‚<code>&amp;</code>ä¸¤è¾¹çš„æ“ä½œæ•°å¯ä»¥æ˜¯åè¿›åˆ¶ã€å…«è¿›åˆ¶ã€åå…­è¿›åˆ¶ï¼Œå®ƒä»¬åœ¨å†…å­˜ä¸­æœ€ç»ˆéƒ½æ˜¯ä»¥äºŒè¿›åˆ¶çš„å½¢å¼å­˜å‚¨ã€‚<code>&amp;</code>å°±æ˜¯è¿™äº›å†…å­˜ä¸­çš„äºŒè¿›åˆ¶ä½è¿›è¡Œè¿ç®—ã€‚ä¾‹å¦‚<code>1&amp;1</code>ä¸º1ï¼Œ<code>1&amp;0</code>ä¸º0ï¼Œ<code>0&amp;0</code>ä¸º0ã€‚</p><p>ä¾‹å¦‚ï¼Œ9&amp;5</p><p>â€‹    0000 1001 ï¼ˆ9çš„äºŒè¿›åˆ¶ï¼‰</p><p>&amp;  0000 0101ï¼ˆ5çš„äºŒè¿›åˆ¶ï¼‰</p><hr><p>â€‹    0000 0001</p><p>ä¹Ÿå°±æ˜¯è¯´<code>9&amp;5</code>çš„ç»“æœä¸º1ã€‚</p><h3 id="äºŒã€æŒ‰ä½æˆ–è¿ç®—ï¼ˆ-ï¼‰"><a href="#äºŒã€æŒ‰ä½æˆ–è¿ç®—ï¼ˆ-ï¼‰" class="headerlink" title="äºŒã€æŒ‰ä½æˆ–è¿ç®—ï¼ˆ|ï¼‰"></a>äºŒã€æŒ‰ä½æˆ–è¿ç®—ï¼ˆ|ï¼‰</h3><p>å‚ä¸<code>|</code>è¿ç®—çš„ä¸¤ä¸ªäºŒè¿›åˆ¶ä½æœ‰ä¸€ä¸ªä¸º1æ—¶ï¼Œç»“æœä¸º1ã€‚ä¾‹å¦‚<code>0|1</code>ä¸º1ï¼Œ<code>1|1</code>ä¸º1ï¼Œ<code>0|0</code>ä¸º0ã€‚</p><p>ä¾‹å¦‚ï¼Œ<code>9|5</code></p><p>â€‹    0000 1001 ï¼ˆ9çš„äºŒè¿›åˆ¶ï¼‰</p><p>|   0000 0101ï¼ˆ5çš„äºŒè¿›åˆ¶ï¼‰</p><hr><p>â€‹    0000 1101</p><p><code>9|5</code>çš„ç»“æœæ˜¯13ã€‚</p><h3 id="ä¸‰ã€æŒ‰ä½å¼‚æˆ–è¿ç®—ï¼ˆ-ï¼‰"><a href="#ä¸‰ã€æŒ‰ä½å¼‚æˆ–è¿ç®—ï¼ˆ-ï¼‰" class="headerlink" title="ä¸‰ã€æŒ‰ä½å¼‚æˆ–è¿ç®—ï¼ˆ^ï¼‰"></a>ä¸‰ã€æŒ‰ä½å¼‚æˆ–è¿ç®—ï¼ˆ^ï¼‰</h3><p>å‚ä¸^è¿ç®—çš„ä¸¤ä¸ªäºŒè¿›åˆ¶ä½ä¸åŒçš„æ—¶ï¼Œç»“æœä¸º1ï¼Œä¾‹å¦‚<code>0^1</code>ä¸º1ï¼Œ<code>0^0</code>ä¸º0ï¼Œ1^1ä¸º0ã€‚</p><p>ä¾‹å¦‚ï¼Œ<code>9^5</code></p><p>â€‹    0000 1001 ï¼ˆ9çš„äºŒè¿›åˆ¶ï¼‰</p><p>|   0000 0101ï¼ˆ5çš„äºŒè¿›åˆ¶ï¼‰</p><hr><p>â€‹    0000 1100</p><p><code>9^5</code>çš„ç»“æœæ˜¯12ã€‚</p><h3 id="å››ã€å–åè¿ç®—ï¼ˆ-ï¼‰"><a href="#å››ã€å–åè¿ç®—ï¼ˆ-ï¼‰" class="headerlink" title="å››ã€å–åè¿ç®—ï¼ˆ~ï¼‰"></a>å››ã€å–åè¿ç®—ï¼ˆ~ï¼‰</h3><p>å–åè¿ç®—ç¬¦<code>~</code>ä¸ºå•ç›®è¿ç®—ç¬¦ï¼Œä½œç”¨æ˜¯å¯¹å‚ä¸è¿ç®—çš„äºŒè¿›åˆ¶ä½å–åï¼Œä¾‹å¦‚ï¼š<code>~1</code>ä¸º0ã€‚</p><p>ä¾‹å¦‚ï¼Œ<code>~9</code></p><p>~  0000 1001 ï¼ˆ9çš„äºŒè¿›åˆ¶ï¼‰</p><hr><p>â€‹    1111 0110 </p><p><code>~9</code>çš„ç»“æœä¸º-10</p><blockquote><p>-9çš„äºŒè¿›åˆ¶è¡¨è¾¾ä¸º9çš„äºŒè¿›åˆ¶ä½ï¼ˆ0000 1001ï¼‰æŒ‰ä½å–åå†+1ï¼Œç»“æœä¸º1111 0111</p><p>1111 0110 ä»£è¡¨çš„æ˜¯è´Ÿå‡ çš„è®¡ç®—æ–¹å¼æ˜¯ï¼Œå…ˆ-1å¾—åˆ°1111 0101å†æŒ‰ä½å–åå¾—åˆ°0000 1010ï¼ˆ10ï¼‰ï¼Œæ‰€ä»¥æœ€ç»ˆç»“æœä¸º-10</p></blockquote><h3 id="äº”ã€å·¦ç§»è¿ç®—ï¼ˆ-lt-lt-ï¼‰"><a href="#äº”ã€å·¦ç§»è¿ç®—ï¼ˆ-lt-lt-ï¼‰" class="headerlink" title="äº”ã€å·¦ç§»è¿ç®—ï¼ˆ&lt;&lt;ï¼‰"></a>äº”ã€å·¦ç§»è¿ç®—ï¼ˆ&lt;&lt;ï¼‰</h3><p>å·¦ç§»è¿ç®—ç¬¦<code>&lt;&lt;</code>ç”¨æ¥æŠŠæ“ä½œæ•°çš„å„ä¸ªäºŒè¿›åˆ¶ä½å…¨éƒ¨å·¦ç§»è‹¥å¹²ä½ï¼Œé«˜ä½ä¸¢å¼ƒï¼Œä½ä½è¡¥0ã€‚</p><p>ä¾‹å¦‚ï¼š<code>9&lt;&lt;2</code></p><p>&lt;&lt;  0000 1001 ï¼ˆ9çš„äºŒè¿›åˆ¶ï¼‰</p><hr><p>â€‹      0010 0100</p><p><code>9&lt;&lt;2</code>çš„ç»“æœä¸º 36ã€‚</p><h3 id="å…­ã€å³ç§»è¿ç®—ï¼ˆ-gt-gt-ï¼‰"><a href="#å…­ã€å³ç§»è¿ç®—ï¼ˆ-gt-gt-ï¼‰" class="headerlink" title="å…­ã€å³ç§»è¿ç®—ï¼ˆ&gt;&gt;ï¼‰"></a>å…­ã€å³ç§»è¿ç®—ï¼ˆ&gt;&gt;ï¼‰</h3><p>å³ç§»è¿ç®—ç¬¦<code>&gt;&gt;</code>ç”¨æ¥æŠŠæ“ä½œæ•°çš„å„ä¸ªäºŒè¿›åˆ¶ä½å…¨éƒ¨å³ç§»è‹¥å¹²ä½ï¼Œä½ä½ä¸¢å¼ƒï¼Œé«˜ä½è¡¥0æˆ–1ã€‚å¦‚æœæ•°æ®çš„æœ€é«˜ä¸ºä¸º0ï¼Œé‚£ä¹ˆå°±è¡¥0ï¼›å¦‚æœæ•°æ®çš„æœ€é«˜ä½ä¸º1ï¼Œé‚£ä¹ˆå°±è¡¥1ã€‚</p><p>ä¾‹å¦‚ï¼š<code>9&gt;&gt;2</code></p><p><em>&gt;&gt;</em>  0000 1001 ï¼ˆ9çš„äºŒè¿›åˆ¶ï¼‰</p><hr><p>â€‹      0000 0010</p><p><code>9&gt;&gt;2</code>çš„ç»“æœä¸º2</p><p><font color= orange>å£°æ˜ï¼šæœ¬æ–‡æ‘˜è‡ª&lt;Cè¯­è¨€ä½è¿ç®—&gt;</font></p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="http://c.biancheng.net/cpp/html/101.html">Cè¯­è¨€ä½è¿ç®—</a></p>]]></content>
    
    
    <categories>
      
      <category>iOS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å¤‡è€ƒ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>iOS_Runtime</title>
    <link href="/2022/03/01/iOS/%E5%A4%87%E8%80%83/Runtime&amp;Runloop/iOS_Runtime/"/>
    <url>/2022/03/01/iOS/%E5%A4%87%E8%80%83/Runtime&amp;Runloop/iOS_Runtime/</url>
    
    <content type="html"><![CDATA[<h3 id="ä¸€ã€æ¦‚å¿µä»‹ç»"><a href="#ä¸€ã€æ¦‚å¿µä»‹ç»" class="headerlink" title="ä¸€ã€æ¦‚å¿µä»‹ç»"></a>ä¸€ã€æ¦‚å¿µä»‹ç»</h3><p>åœ¨å­¦ä¹  <code>runtime</code>ä¹‹å‰ï¼Œé¦–å…ˆè¦äº†è§£å®ƒçš„åº•å±‚çš„ä¸€äº›å¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚<code>isa</code>æŒ‡é’ˆ</p><ul><li>åœ¨<code>arm64</code>æ¶æ„ä¹‹å‰ï¼Œ<code>isa</code>å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„æŒ‡é’ˆï¼Œå­˜å‚¨ç€<code>class</code>ã€<code>meta-class</code>å¯¹è±¡çš„å†…å­˜åœ°å€</li><li>åœ¨<code>arm64</code>æ¶æ„ä¹‹åï¼Œå¯¹<code>isa</code>è¿›è¡Œäº†ä¼˜åŒ–ï¼Œå˜æˆäº†ä¸€ä¸ªå…±åŒä½“ï¼ˆ<code>union</code>ï¼‰ç»“æ„ï¼Œè¿˜ä½¿ç”¨ä½åŸŸæ¥å­˜å‚¨æ›´å¤šçš„ä¿¡æ¯</li></ul><h4 id="1-å…±åŒä½“"><a href="#1-å…±åŒä½“" class="headerlink" title="1. å…±åŒä½“"></a>1. å…±åŒä½“</h4><p>æˆ‘ä»¬çŸ¥é“ç»“æ„ä½“ï¼ˆ<code>Struct</code>ï¼‰æ˜¯ä¸€ç§æ„é€ ç±»å‹æˆ–å¤æ‚ç±»å‹ï¼Œå®ƒå¯ä»¥åŒ…å«å¤šä¸ªç±»å‹ä¸åŒçš„æˆå‘˜ã€‚åœ¨Cè¯­è¨€ä¸­ï¼Œè¿˜æœ‰å¦å¤–ä¸€ç§å’Œç»“æ„ä½“éå¸¸ç±»ä¼¼çš„è¯­æ³•ï¼Œå«åš<em>å…±ç”¨ä½“ï¼ˆ<code>union</code>ï¼‰</em>ï¼Œå®ƒçš„å®šä¹‰æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">union</span> å…±ç”¨ä½“å&#123;</span><br>æˆå‘˜åˆ—è¡¨<br>&#125;;<br></code></pre></td></tr></table></figure><blockquote><p>å…±ç”¨ä½“ä¹Ÿè¢«æˆä¸ºè”åˆä½“</p></blockquote><p>ç»“æ„ä½“å’Œå…±ç”¨ä½“çš„åŒºåˆ«ï¼š</p><p>ç»“æ„ä½“çš„å„ä¸ªæˆå‘˜ä¼šå ç”¨ä¸åŒçš„å†…å­˜ï¼Œäº’ç›¸ä¹‹é—´æ²¡æœ‰å½±å“ã€‚è€Œå…±ç”¨ä½“æ‰€æœ‰æˆå‘˜å…±ç”¨ä¸€æ®µå†…å­˜ï¼Œä¿®æ”¹ä¸€ä¸ªæˆå‘˜ä¼šå½±å“å…¶ä½™æ‰€æœ‰æˆå‘˜ã€‚</p><p>ç»“æ„ä½“å ç”¨çš„å†…å­˜å¤§äºç­‰äºæ‰€æœ‰æˆå‘˜å ç”¨çš„å†…å­˜ä¹‹å’Œï¼ˆæˆå‘˜ä¹‹é—´å¯èƒ½ä¼šå­˜åœ¨ç¼éš™ï¼‰ã€‚å…±ç”¨ä½“å ç”¨çš„å†…å­˜ç­‰äºæœ€é•¿çš„æˆå‘˜å ç”¨çš„å†…å­˜ã€‚å…±ç”¨ä½“ä½¿ç”¨çš„æ˜¯å†…å­˜è¦†ç›–æŠ€æœ¯ï¼ŒåŒä¸€æ—¶åˆ»åªèƒ½ä¿å­˜ä¸€ä¸ªæˆå‘˜çš„å€¼ï¼Œå¦‚æœå¯¹æ–°çš„æˆå‘˜èµ‹å€¼å°±ä¼šæŠŠåŸæ¥æˆå‘˜å‘¢çš„å€¼è¦†ç›–æ‰ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">union Bits &#123;<br>    int a;<br>    double b;<br>&#125;;<br><br>union Bits bits;<br>bits.a = 1;<br>bits.b = 2.0;<br>NSLog(@&quot;bits size= %ld&quot;,sizeof(bits));<br>NSLog(@&quot;a address = %p,b address = %p&quot;,&amp;bits.a,&amp;bits.b);<br>NSLog(@&quot;a = %d, b = %f&quot;,bits.a,bits.b);<br><br>// log <br>bits size= 8<br>a address = 0x7ff7b085bf68,b address = 0x7ff7b085bf68<br>a = 0, b = 2.000000<br></code></pre></td></tr></table></figure><h4 id="2-ä½åŸŸ"><a href="#2-ä½åŸŸ" class="headerlink" title="2. ä½åŸŸ"></a>2. ä½åŸŸ</h4><p>æœ‰äº›æ•°æ®åœ¨å­˜å‚¨æ—¶å¹¶ä¸éœ€è¦å ç”¨ä¸€ä¸ªå®Œæ•´çš„å­—èŠ‚ï¼Œåªéœ€è¦å ç”¨å°±ä¸€ä¸ªæˆ–è€…å‡ ä¸ªäºŒè¿›åˆ¶ä½å³å¯ã€‚ä¾‹å¦‚å¼€å…³åªæœ‰é€šç”µå’Œæ–­ç‚¹ä¸¤ç§çŠ¶æ€ï¼Œç”¨0å’Œ1è¡¨ç¤ºè¶³ä»¥ï¼Œä¹Ÿå°±æ˜¯ç”¨ä¸€ä¸ªäºŒè¿›åˆ¶ä½ã€‚æ­£æ˜¯åŸºäºè¿™ç§è€ƒè™‘ï¼ŒCè¯­è¨€åˆæä¾›äº†ä¸€ç§å«åšä½åŸŸçš„æ•°æ®ç»“æ„ã€‚</p><p>åœ¨å®šä¹‰ç»“æ„ä½“æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šæŸä¸ªæˆå‘˜å˜é‡æ‰€å ç”¨çš„äºŒè¿›åˆ¶ä½æ•°ï¼ˆ<code>Bit</code>ï¼‰,è¿™å°±æ˜¯<em><strong>ä½åŸŸ</strong></em>ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">bs</span> &#123;</span><br>  <span class="hljs-keyword">unsigned</span> m;<br>  <span class="hljs-keyword">unsigned</span> n:<span class="hljs-number">4</span>;<br>  <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> ch: <span class="hljs-number">6</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>:</code>åé¢çš„æ•°å­—æ¥é™å®šæˆå‘˜å˜é‡å ç”¨çš„ä½æ•°ã€‚</p><h4 id="3-isaè¯¦è§£"><a href="#3-isaè¯¦è§£" class="headerlink" title="3. isaè¯¦è§£"></a>3. isaè¯¦è§£</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-class"><span class="hljs-keyword">union</span> <span class="hljs-title">isa_t</span> </span><br><span class="hljs-class">&#123;</span><br>    Class cls;<br>    <span class="hljs-keyword">uintptr_t</span> bits;<br>     <span class="hljs-class"><span class="hljs-keyword">struct</span> &#123;</span><br>        <span class="hljs-keyword">uintptr_t</span> nonpointer        : <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">uintptr_t</span> has_assoc         : <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">uintptr_t</span> has_cxx_dtor      : <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">uintptr_t</span> shiftcls          : <span class="hljs-number">33</span>; <span class="hljs-comment">// MACH_VM_MAX_ADDRESS 0x1000000000</span><br>        <span class="hljs-keyword">uintptr_t</span> magic             : <span class="hljs-number">6</span>;<br>        <span class="hljs-keyword">uintptr_t</span> weakly_referenced : <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">uintptr_t</span> deallocating      : <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">uintptr_t</span> has_sidetable_rc  : <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">uintptr_t</span> extra_rc          : <span class="hljs-number">19</span>;<br>    &#125;;<br> &#125;<br></code></pre></td></tr></table></figure><ul><li><p>nonpointer</p><p>0ï¼Œä»£è¡¨æ™®é€šæŒ‡é’ˆï¼Œå­˜å‚¨ç€classã€meta-classå¯¹è±¡çš„å†…å­˜åœ°å€</p><p>1ï¼Œä»£è¡¨ä¼˜åŒ–è¿‡ï¼Œä½¿ç”¨ä½åŸŸå­˜å‚¨æ›´å¤šçš„ä¿¡æ¯</p></li><li><p>has_assoc</p><p>æ˜¯å¦æœ‰è®¾ç½®è¿‡å…³è”å¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰é‡Šæ”¾æ—¶ä¼šæ›´å¿«</p></li><li><p>has_cxx_dtor</p><p>æ˜¯å¦æœ‰c++çš„ææ„å‡½æ•°ï¼Œå¦‚æœæ²¡æœ‰é‡Šæ”¾æ—¶ä¼šæ›´å¿«</p></li><li><p>shiftcls</p><p>å­˜å‚¨ç€classã€meta-calsså¯¹è±¡çš„å†…å­˜åœ°å€ä¿¡æ¯</p></li><li><p>magic</p><p>ç”¨äºåœ¨è°ƒè¯•æ—¶åˆ†è¾¨å¯¹è±¡æ˜¯å¦å®Œæˆåˆå§‹åŒ–</p></li><li><p>weakly_referenced</p><p>æ˜¯å¦è¢«å¼±å¼•ç”¨æŒ‡å‘è¿‡ï¼Œè‹¥æœæ²¡æœ‰ï¼Œé‡Šæ”¾æ—¶æ›´å¿«</p></li><li><p>deallocating</p><p>å¯¹è±¡æ˜¯å¦æ­£åœ¨é‡Šæ”¾</p></li><li><p>has_sidetable_rc</p><p>å¼•ç”¨è®¡æ•°å™¨æ˜¯å¦è¿‡å¤§æ— æ³•å­˜å‚¨åœ¨isaä¸­</p><p>å¦‚æœä¸º1ï¼Œé‚£ä¹ˆå¼•ç”¨è®¡æ•°ä¼šå­˜å‚¨åœ¨ä¸€ä¸ªå«SideTableçš„ç±»çš„å±æ€§ä¸­</p></li><li><p>extra_rc</p><p>é‡Œé¢å­˜å‚¨çš„å€¼æ˜¯å¼•ç”¨è®¡æ•°å™¨å‡1</p></li></ul><h4 id="4-classçš„ç»“æ„"><a href="#4-classçš„ç»“æ„" class="headerlink" title="4. classçš„ç»“æ„"></a>4. classçš„ç»“æ„</h4><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202203032148241.png" alt="classçš„ç»“æ„" style="zoom:67%;margin-left:10px" /><h5 id="4-1-calss-rw-t"><a href="#4-1-calss-rw-t" class="headerlink" title="4.1 calss_rw_t"></a>4.1 <strong>calss_rw_t</strong></h5><p><em>calss_rw_t</em>çš„<code>methods</code>ã€<code>properties</code>ã€<code>protocols</code>æ˜¯äºŒç»´æ•°ç»„ï¼Œæ˜¯å¯è¯»å¯å†™çš„ï¼ŒåŒ…å«äº†ç±»çš„åˆå§‹å†…å®¹ã€åˆ†ç±»çš„å†…å®¹</p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202203032152900.png" alt="calss_rw_t" style="zoom:50%;margin-left:10px" /><h5 id="4-2-class-ro-t"><a href="#4-2-class-ro-t" class="headerlink" title="4.2 class_ro_t"></a>4.2 class_ro_t</h5><p><em>class_ro_t</em>çš„<code>baseMethodList</code>ã€<code>baseProperties</code>ã€<code>baseProtocols</code>ã€<code>ivars</code>æ˜¯ä¸€ç»´æ•°ç»„ï¼Œæ˜¯å¯è¯»çš„ï¼ŒåŒ…å«äº†ç±»çš„åˆå§‹å†…å®¹</p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202203032157596.png" alt="class_ro_t" style="zoom:50%;margin-left:10px" /><h5 id="4-3-method-t"><a href="#4-3-method-t" class="headerlink" title="4.3 method_t"></a>4.3 method_t</h5><p><em>method_t</em>æ˜¯å¯¹æ–¹æ³•/å‡½æ•°çš„å°è£…</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">method_t</span>&#123;</span><br>SEL name;<span class="hljs-comment">// å‡½æ•°å</span><br>  <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *types;<span class="hljs-comment">// ç¼–ç ï¼ˆè¿”å›å€¼ç±»å‹ã€å‚æ•°ç±»å‹ï¼‰</span><br>  IMP imp; <span class="hljs-comment">// æŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆï¼ˆå‡½æ•°åœ°å€ï¼‰</span><br>&#125;<br></code></pre></td></tr></table></figure><ol><li><p><em>IMP</em>ä»£è¡¨å‡½æ•°çš„å…·ä½“å®ç°</p></li><li><p><em>SEL</em>ä»£è¡¨æ–¹æ³•/å‡½æ•°åï¼Œä¸€èˆ¬å«åšé€‰æ‹©å™¨ï¼Œåº•å±‚ç»“æ„è·Ÿ<code>char*</code>ç±»ä¼¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">#import &lt;objc/runtime.h&gt;<br><br>//å‰æï¼šå·²åˆ›å»ºä¸€ä¸ªå¸¦æœ‰testæ–¹æ³•çš„ç±»<br>// è·å–SEL<br>SEL sel1 = @selector(test);<br>SEL sel2 = sel_registerName(&quot;test&quot;);<br>// è·å–SELåç§°<br>NSString *sel1Name = NSStringFromSelector(sel1);<br>const char * sel2Name = sel_getName(sel2);<br>    <br>NSLog(@&quot;%p, %p&quot;,sel1,sel2);<br>NSLog(@&quot;%@, %s&quot;,sel1Name,sel2Name);<br>// log <br>0x7fff6e2268ec, 0x7fff6e2268ec<br>test, test<br></code></pre></td></tr></table></figure><ul><li>å¯ä»¥é€šè¿‡<code>@selector()</code>å’Œ<code>sel_registerName()</code>è·å¾—</li><li>å¯ä»¥é€šè¿‡<code>NSStringFromSelector()</code>å’Œ<code>sel_getName()</code>è½¬æˆå­—ç¬¦ä¸²</li><li>ä¸åŒç±»ä¸­ç›¸åŒåå­—çš„æ–¹æ³•ï¼Œæ‰€å¯¹åº”çš„æ–¹æ³•é€‰æ‹©å™¨æ˜¯ç›¸åŒçš„</li></ul></li><li><p>types</p><p>typesåŒ…å«äº†å‡½æ•°è¿”å›å€¼ã€å‚æ•°ç¼–ç çš„å­—ç¬¦ä¸²</p><table><thead><tr><th>è¿”å›å€¼</th><th>å‚æ•°1</th><th>å‚æ•°2</th><th>â€¦</th><th>å‚æ•°n</th></tr></thead></table><p>iOSæä¾›äº†ä¸€ç§å«åš<font color=orange>@encode</font>çš„æŒ‡ä»¤ï¼Œå¯ä»¥å°†å…·ä½“ç±»å‹è¡¨ç¤ºä¸ºå­—ç¬¦ä¸²ç¼–ç ã€‚</p><p>ä¸‹é¢æ˜¯éƒ¨åˆ†Type-Encodingï¼Œæ›´å¤šå†…å®¹å¯ä»¥å‚è€ƒå®˜ç½‘<a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html#//apple_ref/doc/uid/TP40008048-CH100-SW1">Type Encoding</a>ã€‚</p><table><thead><tr><th>Code</th><th>Meaning</th></tr></thead><tbody><tr><td>c</td><td>A char</td></tr><tr><td>i</td><td>An int</td></tr><tr><td>s</td><td>A short</td></tr><tr><td>l</td><td>A long, l is treated as a 32-bit quantity on 64-bit programs.</td></tr><tr><td>q</td><td>A long long</td></tr><tr><td>C</td><td>An unsigned char</td></tr><tr><td>I</td><td>An unsigned int</td></tr><tr><td>S</td><td>An unsigned short</td></tr><tr><td>L</td><td>An unsigned long</td></tr><tr><td>Q</td><td>An unsigned long long</td></tr><tr><td>f</td><td>A float</td></tr><tr><td>d</td><td>A double</td></tr><tr><td>B</td><td>A C++ bool or a C99 _Bool</td></tr><tr><td>v</td><td>A void</td></tr></tbody></table></li></ol><h4 id="5-æ–¹æ³•ç¼“å­˜"><a href="#5-æ–¹æ³•ç¼“å­˜" class="headerlink" title="5. æ–¹æ³•ç¼“å­˜"></a>5. æ–¹æ³•ç¼“å­˜</h4><p>Classå†…éƒ¨ç»“æ„æœ‰ä¸€ä¸ªæ–¹æ³•ç¼“å­˜<font color=orange>Cache_t</font>ï¼Œç”¨æ•£åˆ—è¡¨æ¥ç¼“å­˜æ›¾ç»è°ƒç”¨è¿‡çš„æ–¹æ³•ï¼Œå¯ä»¥æé«˜æ–¹æ³•çš„æŸ¥æ‰¾é€Ÿåº¦ã€‚ï¼ˆç”¨ç©ºé—´æ¢æ—¶é—´ï¼‰</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">cache_t</span>&#123;</span><br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">bucket_t</span> *<span class="hljs-title">buckets</span>;</span> <span class="hljs-comment">// æ•£åˆ—è¡¨</span><br>    <span class="hljs-keyword">mask_t</span> _mask; <span class="hljs-comment">// æ•£åˆ—è¡¨çš„é•¿åº¦-1</span><br>    <span class="hljs-keyword">mask_t</span> _occupied; <span class="hljs-comment">// å·²ç»ç¼“å­˜çš„æ–¹æ³•æ•°é‡</span><br>&#125;ï¼›<br>  <br>  <br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">bucket_t</span>&#123;</span><br>    <span class="hljs-keyword">cache_key_t</span> _key; <span class="hljs-comment">// SELä½œä¸ºkey</span><br>    IMP imp; <span class="hljs-comment">// å‡½æ•°çš„å†…å­˜åœ°å€</span><br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="äºŒã€objc-msgSend"><a href="#äºŒã€objc-msgSend" class="headerlink" title="äºŒã€objc_msgSend"></a>äºŒã€objc_msgSend</h3><p>OCçš„æ–¹æ³•è°ƒç”¨ï¼Œå…¶å®éƒ½æ˜¯è½¬åŒ–ä¸º<code>objc_msgSend</code>å‡½æ•°çš„è°ƒç”¨ã€‚</p><p><code>objc_msgSend</code>çš„æ‰§è¡Œæµç¨‹å¯ä»¥åˆ†ä¸ºä¸‰å¤§é˜¶æ®µï¼š</p><h4 id="1-æ¶ˆæ¯å‘é€"><a href="#1-æ¶ˆæ¯å‘é€" class="headerlink" title="1. æ¶ˆæ¯å‘é€"></a>1. æ¶ˆæ¯å‘é€</h4><p>æ¶ˆæ¯å‘é€æµç¨‹ï¼š</p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202203041618222.png" alt="æ¶ˆæ¯å‘é€æµç¨‹" style="zoom:20%;margin-left:10px" /><h4 id="2-åŠ¨æ€æ–¹æ³•è§£æ"><a href="#2-åŠ¨æ€æ–¹æ³•è§£æ" class="headerlink" title="2. åŠ¨æ€æ–¹æ³•è§£æ"></a>2. åŠ¨æ€æ–¹æ³•è§£æ</h4><p>åŠ¨æ€æ–¹æ³•è§£ææµç¨‹ï¼š</p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202203041705547.png" alt="åŠ¨æ€æ–¹æ³•è§£ææµç¨‹" style="zoom:30%;margin-left:60px" /><p>å¦‚æœä¸€ä¸ªå¯¹è±¡çš„<code>instance</code>ï¼Œå»è°ƒç”¨ä¸€ä¸ªæ²¡æœ‰å®ç°çš„<code>instance</code>æ–¹æ³•çš„è¯ï¼Œä¼šæŠ¥é”™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">unrecognized selector sent to instance<br></code></pre></td></tr></table></figure><p>è§£å†³è¿™ä¸ªé”™è¯¯çš„ä¸€ä¸ªæ–¹æ³•å°±æ˜¯åŠ¨æ€æ·»åŠ å®ä¾‹æ–¹æ³•çš„å®ç°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">-(void)other&#123;<br>    NSLog(@&quot;%s&quot;,__func__);<br>&#125;<br>// ä¸ºtestæ–¹æ³•åŠ¨æ€æ·»åŠ æ–¹æ³•çš„å®ç°<br>+(BOOL)resolveInstanceMethod:(SEL)sel&#123;<br>    if (sel == @selector(test)) &#123;<br> Method method = class_getInstanceMethod(self, @selector(other));<br>        class_addMethod(self, sel, method_getImplementation(method), method_getTypeEncoding(method));<br>        return  YES;<br>    &#125;<br>    return [super resolveInstanceMethod:sel];<br>&#125; <br></code></pre></td></tr></table></figure><p><code>+resolveInstanceMethod</code>å’Œ<code>+resolveClassMethod</code>çš„åŒºåˆ«åœ¨äºï¼Œå‰è€…æ˜¯åŠ¨æ€çš„å‘classä¸­æ·»åŠ å®ä¾‹æ–¹æ³•ï¼Œåè€…æ˜¯åŠ¨æ€çš„å‘meta-calssä¸­æ·»åŠ ç±»æ–¹æ³•ã€‚</p><h4 id="3-æ¶ˆæ¯è½¬å‘"><a href="#3-æ¶ˆæ¯è½¬å‘" class="headerlink" title="3. æ¶ˆæ¯è½¬å‘"></a>3. æ¶ˆæ¯è½¬å‘</h4><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202203071128975.png" alt="æ¶ˆæ¯è½¬å‘æµç¨‹" style="zoom:40%;margin-left:60px"/><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">#import &quot;TPerson.h&quot;<br>#import &lt;objc/runtime.h&gt;<br>#import &quot;TStudent.h&quot;<br>@implementation TPerson<br>- (id)forwardingTargetForSelector:(SEL)aSelector&#123;//ä¸è°ƒç”¨çš„è¯é»˜è®¤è¿”å›å€¼ä¸ºnil<br>    if (aSelector == @selector(test)) &#123;<br>//        return  [[TStudent alloc]init];<br>        return  nil;<br>    &#125;<br>    return [super forwardingTargetForSelector:aSelector];<br>&#125;<br><br>// æ–¹æ³•ç­¾å<br>- (NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector&#123;<br>    if (aSelector == @selector(test)) &#123;<br>        return  [NSMethodSignature signatureWithObjCTypes:&quot;v@:&quot;];<br>      // return  [[[TStudent alloc]init] methodSignatureForSelector:@selector(test)];<br>    &#125;<br>    return  [super methodSignatureForSelector:aSelector];<br>&#125;<br><br>// NSInvocation å°è£…äº†ä¸€ä¸ªæ–¹æ³•è°ƒç”¨ï¼ŒåŒ…æ‹¬æ–¹æ³•è°ƒç”¨è€…ã€æ–¹æ³•åã€æ–¹æ³•å‚æ•°<br>- (void)forwardInvocation:(NSInvocation *)anInvocation&#123;<br>    NSLog(@&quot;123&quot;);<br>&#125;<br>@end<br></code></pre></td></tr></table></figure><h3 id="ä¸‰ã€Runtime-API"><a href="#ä¸‰ã€Runtime-API" class="headerlink" title="ä¸‰ã€Runtime API"></a>ä¸‰ã€Runtime API</h3><h4 id="1-ç±»ï¼š"><a href="#1-ç±»ï¼š" class="headerlink" title="1. ç±»ï¼š"></a>1. ç±»ï¼š</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// è·å–isaæŒ‡å‘çš„Class</span><br><span class="hljs-built_in">object_getClass</span>(&lt;<span class="hljs-meta">#id  _Nullable obj#&gt;)</span><br><span class="hljs-comment">// è®¾ç½®isaæŒ‡å‘çš„Class</span><br><span class="hljs-built_in">object_setClass</span>(&lt;<span class="hljs-meta">#id  _Nullable obj#&gt;, <span class="hljs-meta-string">&lt;#Class  _Nonnull __unsafe_unretained cls#&gt;</span>)</span><br><span class="hljs-comment">// åˆ¤æ–­ä¸€ä¸ªOCå¯¹è±¡æ˜¯å¦æ˜¯Class</span><br><span class="hljs-built_in">object_isClass</span>(&lt;<span class="hljs-meta">#id  _Nullable obj#&gt;)</span><br><span class="hljs-comment">// åˆ¤æ–­ä¸€ä¸ªClassæ˜¯å¦ä¸ºå…ƒç±»</span><br><span class="hljs-built_in">class_isMetaClass</span>(&lt;#Class  _Nullable __unsafe_unretained cls#&gt;)<br><span class="hljs-comment">// è·å–çˆ¶ç±»</span><br><span class="hljs-built_in">class_getSuperclass</span>(&lt;#Class  _Nullable __unsafe_unretained cls#&gt;)<br><span class="hljs-comment">// åŠ¨æ€åˆ›å»ºä¸€ä¸ªç±»ï¼ˆå‚æ•°ï¼šçˆ¶ç±»ã€ç±»åã€é¢å¤–çš„å†…å­˜ç©ºé—´ï¼‰</span><br><span class="hljs-built_in">objc_allocateClassPair</span>(&lt;#Class  _Nullable __unsafe_unretained superclass#&gt;, &lt;<span class="hljs-meta">#const char * _Nonnull name#&gt;, <span class="hljs-meta-string">&lt;#size_t extraBytes#&gt;</span>)</span><br><span class="hljs-comment">// æ³¨å†Œä¸€ä¸ªç±»</span><br><span class="hljs-built_in">objc_registerClassPair</span>(&lt;#Class  _Nonnull __unsafe_unretained cls#&gt;)<br><span class="hljs-comment">// é”€æ¯ä¸€ä¸ªç±»</span><br><span class="hljs-built_in">objc_disposeClassPair</span>(&lt;#Class  _Nonnull __unsafe_unretained cls#&gt;)<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">void run(id self, SEL _cmd)&#123;<br>    NSLog(@&quot;%@--%@&quot;,self,NSStringFromSelector(_cmd));<br>&#125;<br><br>// åˆ›å»ºç±»<br>Class newClass =  objc_allocateClassPair([NSObject class], &quot;TStudent&quot;, 0);<br>// æ·»åŠ æˆå‘˜å˜é‡<br>class_addIvar(newClass, &quot;_age&quot;, 4, 1, @encode(int));<br>// æ·»åŠ æ–¹æ³•<br>class_addMethod(newClass, @selector(run), (IMP)run, &quot;v@:&quot;);<br>// æ³¨å†Œç±»<br>// ç±»å¯¹è±¡ä¸€æ—¦æ³¨å†Œå®Œæ¯•å°±ä¸èƒ½å†æ·»åŠ æˆå‘˜å˜é‡ï¼ˆæˆå‘˜å˜é‡æ—¶roåªè¯»çš„ï¼‰ä½†æ˜¯å¯ä»¥å†æ·»åŠ æ–¹æ³•ï¼ˆæ–¹æ³•æ—¶rwï¼‰<br>objc_registerClassPair(newClass);<br>id student = [[newClass alloc]init];<br>[student setValue:@10 forKey:@&quot;age&quot;];<br>[student run];<br>    <br>NSLog(@&quot;%@&quot;,[student valueForKey:@&quot;age&quot;]);<br></code></pre></td></tr></table></figure><h4 id="2-æˆå‘˜å˜é‡"><a href="#2-æˆå‘˜å˜é‡" class="headerlink" title="2. æˆå‘˜å˜é‡"></a>2. æˆå‘˜å˜é‡</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// è·å–ä¸€ä¸ªå®ä¾‹å˜é‡ä¿¡æ¯</span><br><span class="hljs-built_in">class_getInstanceVariable</span>(&lt;#Class  _Nullable __unsafe_unretained cls#&gt;, &lt;<span class="hljs-meta">#const char * _Nonnull name#&gt;)</span><br><span class="hljs-comment">// æ‹·è´å®ä¾‹å˜é‡åˆ—è¡¨ï¼ˆæœ€åéœ€è¦è°ƒç”¨freeé‡Šæ”¾ï¼‰</span><br><span class="hljs-built_in">class_copyIvarList</span>(&lt;#Class  _Nullable __unsafe_unretained cls#&gt;, &lt;<span class="hljs-meta">#unsigned int * _Nullable outCount#&gt;)</span><br><span class="hljs-comment">// è®¾ç½®å’Œè·å–æˆå‘˜å˜é‡çš„å€¼</span><br><span class="hljs-built_in">object_setIvar</span>(&lt;<span class="hljs-meta">#id  _Nullable obj#&gt;, <span class="hljs-meta-string">&lt;#Ivar  _Nonnull ivar#&gt;</span>, <span class="hljs-meta-string">&lt;#id  _Nullable value#&gt;</span>)</span><br><span class="hljs-built_in">object_getIvar</span>(&lt;<span class="hljs-meta">#id  _Nullable obj#&gt;, <span class="hljs-meta-string">&lt;#Ivar  _Nonnull ivar#&gt;</span>)</span><br><span class="hljs-comment">// åŠ¨æ€æ·»åŠ æˆå‘˜å˜é‡ï¼ˆå·²ç»æ³¨å†Œçš„ç±»ä¸èƒ½åŠ¨æ€æ·»åŠ æˆå‘˜å˜é‡ï¼‰</span><br><span class="hljs-built_in">class_addIvar</span>(&lt;#Class  _Nullable __unsafe_unretained cls#&gt;, &lt;<span class="hljs-meta">#const char * _Nonnull name#&gt;, <span class="hljs-meta-string">&lt;#size_t size#&gt;</span>, <span class="hljs-meta-string">&lt;#uint8_t alignment#&gt;</span>, <span class="hljs-meta-string">&lt;#const char * _Nullable types#&gt;</span>)</span><br><span class="hljs-comment">// è·å–æˆå‘˜å˜é‡çš„ç›¸å…³ä¿¡æ¯</span><br><span class="hljs-built_in">ivar_getName</span>(&lt;#Ivar  _Nonnull v#&gt;)<br><span class="hljs-built_in">ivar_getTypeEncoding</span>(&lt;#Ivar  _Nonnull v#&gt;)<br></code></pre></td></tr></table></figure><h4 id="3-å±æ€§"><a href="#3-å±æ€§" class="headerlink" title="3. å±æ€§"></a>3. å±æ€§</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// è·å–ä¸€ä¸ªå±æ€§</span><br><span class="hljs-built_in">class_getProperty</span>(&lt;#Class  _Nullable __unsafe_unretained cls#&gt;, &lt;<span class="hljs-meta">#const char * _Nonnull name#&gt;)</span><br><span class="hljs-comment">// æ‹·è´å±æ€§åˆ—è¡¨ï¼ˆæœ€åéœ€è¦è°ƒç”¨freeé‡Šæ”¾ï¼‰</span><br><span class="hljs-built_in">class_copyPropertyList</span>(&lt;#Class  _Nullable __unsafe_unretained cls#&gt;, &lt;<span class="hljs-meta">#unsigned int * _Nullable outCount#&gt;)</span><br><span class="hljs-comment">// åŠ¨æ€æ·»åŠ å±æ€§</span><br><span class="hljs-built_in">class_addProperty</span>(&lt;#Class  _Nullable __unsafe_unretained cls#&gt;, &lt;<span class="hljs-meta">#const char * _Nonnull name#&gt;, <span class="hljs-meta-string">&lt;#const objc_property_attribute_t * _Nullable attributes#&gt;</span>, <span class="hljs-meta-string">&lt;#unsigned int attributeCount#&gt;</span>)</span><br><span class="hljs-comment">// åŠ¨æ€æ›¿æ¢å±æ€§</span><br><span class="hljs-built_in">class_replaceProperty</span>(&lt;#Class  _Nullable __unsafe_unretained cls#&gt;, &lt;<span class="hljs-meta">#const char * _Nonnull name#&gt;, <span class="hljs-meta-string">&lt;#const objc_property_attribute_t * _Nullable attributes#&gt;</span>, <span class="hljs-meta-string">&lt;#unsigned int attributeCount#&gt;</span>)</span><br><span class="hljs-comment">// è·å–å±æ€§çš„ä¸€äº›ä¿¡æ¯</span><br><span class="hljs-built_in">property_getName</span>(&lt;#<span class="hljs-keyword">objc_property_t</span>  _Nonnull property#&gt;)<br><span class="hljs-built_in">property_getAttributes</span>(&lt;#<span class="hljs-keyword">objc_property_t</span>  _Nonnull property#&gt;)<br></code></pre></td></tr></table></figure><h4 id="4-æ–¹æ³•"><a href="#4-æ–¹æ³•" class="headerlink" title="4. æ–¹æ³•"></a>4. æ–¹æ³•</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// è·å–ä¸€ä¸ªå®ä¾‹æ–¹æ³•ã€ç±»æ–¹æ³•</span><br><span class="hljs-built_in">class_getInstanceMethod</span>(&lt;#Class  _Nullable __unsafe_unretained cls#&gt;, &lt;#SEL  _Nonnull name#&gt;)<br><span class="hljs-built_in">class_getClassMethod</span>(&lt;#Class  _Nullable __unsafe_unretained cls#&gt;, &lt;#SEL  _Nonnull name#&gt;)<br><span class="hljs-comment">// æ–¹æ³•å®ç°ç›¸å…³æ“ä½œ</span><br><span class="hljs-built_in">class_getMethodImplementation</span>(&lt;#Class  _Nullable __unsafe_unretained cls#&gt;, &lt;#SEL  _Nonnull name#&gt;)<br><span class="hljs-built_in">method_setImplementation</span>(&lt;#Method  _Nonnull m#&gt;, &lt;#IMP  _Nonnull imp#&gt;)<br><span class="hljs-built_in">method_exchangeImplementations</span>(&lt;#Method  _Nonnull m1#&gt;, &lt;#Method  _Nonnull m2#&gt;)<br><span class="hljs-comment">// æ‹·è´æ–¹æ³•åˆ—è¡¨</span><br><span class="hljs-built_in">class_copyMethodList</span>(&lt;#Class  _Nullable __unsafe_unretained cls#&gt;, &lt;<span class="hljs-meta">#unsigned int * _Nullable outCount#&gt;)</span><br><span class="hljs-comment">// åŠ¨æ€æ·»åŠ æ–¹æ³•</span><br><span class="hljs-built_in">class_addMethod</span>(&lt;#Class  _Nullable __unsafe_unretained cls#&gt;, &lt;#SEL  _Nonnull name#&gt;, &lt;#IMP  _Nonnull imp#&gt;, &lt;<span class="hljs-meta">#const char * _Nullable types#&gt;)</span><br><span class="hljs-comment">// åŠ¨æ€æ›¿æ¢æ–¹æ³•</span><br><span class="hljs-built_in">class_replaceMethod</span>(&lt;#Class  _Nullable __unsafe_unretained cls#&gt;, &lt;#SEL  _Nonnull name#&gt;, &lt;#IMP  _Nonnull imp#&gt;, &lt;<span class="hljs-meta">#const char * _Nullable types#&gt;)</span><br><span class="hljs-comment">// è·å–æ–¹æ³•çš„ç›¸å…³ä¿¡æ¯ï¼ˆå¸¦æœ‰copyçš„éœ€è¦è°ƒç”¨freeé‡Šæ”¾ï¼‰</span><br><span class="hljs-built_in">method_getName</span>(&lt;#Method  _Nonnull m#&gt;)<br><span class="hljs-built_in">method_getImplementation</span>(&lt;#Method  _Nonnull m#&gt;)<br><span class="hljs-built_in">method_getTypeEncoding</span>(&lt;#Method  _Nonnull m#&gt;)<br><span class="hljs-built_in">method_getNumberOfArguments</span>(&lt;#Method  _Nonnull m#&gt;)<br><span class="hljs-built_in">method_copyReturnType</span>(&lt;#Method  _Nonnull m#&gt;)<br><span class="hljs-built_in">method_copyArgumentType</span>(&lt;#Method  _Nonnull m#&gt;, &lt;<span class="hljs-meta">#unsigned int index#&gt;)</span><br></code></pre></td></tr></table></figure><h3 id="ä¸‰ã€é¢è¯•é¢˜"><a href="#ä¸‰ã€é¢è¯•é¢˜" class="headerlink" title="ä¸‰ã€é¢è¯•é¢˜"></a>ä¸‰ã€é¢è¯•é¢˜</h3><h4 id="1-è®²ä¸€ä¸‹OCçš„æ¶ˆæ¯æœºåˆ¶ï¼Ÿ"><a href="#1-è®²ä¸€ä¸‹OCçš„æ¶ˆæ¯æœºåˆ¶ï¼Ÿ" class="headerlink" title="1. è®²ä¸€ä¸‹OCçš„æ¶ˆæ¯æœºåˆ¶ï¼Ÿ"></a>1. è®²ä¸€ä¸‹OCçš„æ¶ˆæ¯æœºåˆ¶ï¼Ÿ</h4><p>ocçš„æ–¹æ³•è°ƒç”¨å…¶å®éƒ½æ˜¯objc_msgSendå‡½æ•°çš„è°ƒç”¨ï¼Œç»™reciverï¼ˆè°ƒç”¨è€…ï¼‰å‘é€ä¸€æ¡æ¶ˆæ¯ï¼ˆselectoræ–¹æ³•åï¼‰</p><p>objc_msgSendåº•å±‚æœ‰3å¤§é˜¶æ®µï¼šæ¶ˆæ¯å‘é€ï¼ˆå½“å‰ç±»ã€çˆ¶ç±»æŸ¥æ‰¾ï¼‰ã€åŠ¨æ€æ–¹æ³•è§£æã€æ¶ˆæ¯è½¬å‘</p><h4 id="2-æ¶ˆæ¯è½¬å‘æœºåˆ¶æµç¨‹ï¼Ÿ"><a href="#2-æ¶ˆæ¯è½¬å‘æœºåˆ¶æµç¨‹ï¼Ÿ" class="headerlink" title="2. æ¶ˆæ¯è½¬å‘æœºåˆ¶æµç¨‹ï¼Ÿ"></a>2. æ¶ˆæ¯è½¬å‘æœºåˆ¶æµç¨‹ï¼Ÿ</h4><h4 id="3-ä»€ä¹ˆæ˜¯Runtime-å¹³æ—¶é¡¹ç›®ä¸­æœ‰ç”¨è¿‡ä¹ˆï¼Ÿ"><a href="#3-ä»€ä¹ˆæ˜¯Runtime-å¹³æ—¶é¡¹ç›®ä¸­æœ‰ç”¨è¿‡ä¹ˆï¼Ÿ" class="headerlink" title="3. ä»€ä¹ˆæ˜¯Runtime?å¹³æ—¶é¡¹ç›®ä¸­æœ‰ç”¨è¿‡ä¹ˆï¼Ÿ"></a>3. ä»€ä¹ˆæ˜¯Runtime?å¹³æ—¶é¡¹ç›®ä¸­æœ‰ç”¨è¿‡ä¹ˆï¼Ÿ</h4><p>OCæ˜¯ä¸€é—¨åŠ¨æ€æ€§æ¯”è¾ƒå¼ºçš„ç¼–ç¨‹è¯­è¨€ï¼Œå…è®¸å¾ˆå¤šæ“ä½œæ¨è¿Ÿåˆ°ç¨‹åºè¿è¡Œæ—¶å†è¿›è¡Œï¼ŒOCçš„åŠ¨æ€æ€§å°±æ˜¯ç”±<code>Runtime</code>æ”¯æ’‘æ¥å®ç°çš„ï¼Œ<code>Runtime</code>æ˜¯ä¸€å¥—Cè¯­è¨€çš„APIï¼Œå°è£…äº†å¾ˆå¤šåŠ¨æ€æ€§ç›¸å…³çš„å‡½æ•°ã€‚å¹³æ—¶æˆ‘ä»¬ç¼–å†™çš„OCä»£ç ï¼Œåº•å±‚éƒ½æ˜¯è½¬æ¢æˆ<code>Runtime</code> APIè¿›è¡Œè°ƒç”¨ã€‚</p><p>å…·ä½“åº”ç”¨ï¼š</p><ul><li>åˆ©ç”¨å…³è”å¯¹è±¡ï¼ˆAssociatedObjectï¼‰ç»™åˆ†ç±»æ·»åŠ å±æ€§ã€‚</li><li>éå†ç±»çš„æ‰€æœ‰æˆå‘˜å˜é‡ï¼ˆä¿®æ”¹textfieldçš„å ä½é¢œè‰²ã€å­—å…¸è½¬æ¨¡å‹ã€è‡ªåŠ¨å½’æ¡£è§£æ¡£ï¼‰ã€‚</li><li>äº¤æ¢æ–¹æ³•å®ç°ï¼ˆäº¤æ¢ç³»ç»Ÿçš„æ–¹æ³•ï¼‰ã€‚</li><li>åˆ©ç”¨æ¶ˆæ¯è½¬å‘æœºåˆ¶è§£å†³æ–¹æ³•æ‰¾ä¸åˆ°çš„å¼‚å¸¸é—®é¢˜ã€‚</li></ul><h4 id="4-self-class-å’Œ-super-class-çš„åŒºåˆ«ï¼Ÿ"><a href="#4-self-class-å’Œ-super-class-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="4. [self class]å’Œ[super class]çš„åŒºåˆ«ï¼Ÿ"></a>4. [self class]å’Œ[super class]çš„åŒºåˆ«ï¼Ÿ</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">//å·²çŸ¥<br>@interface TPerson: NSObject;<br>@end<br>@interface TStudent: TPerson;<br>@end<br>  <br>#import &quot;TStudent.h&quot;  <br>@implementation<br>// æ±‚ä¸‹é¢initä¸­çš„è¾“å‡º?<br>-(instancetype)init&#123;<br>    if (self = [super init]) &#123;<br>        NSLog(@&quot;[self class] = %@&quot;,[self class]);// TStudent<br>        NSLog(@&quot;[self superclass] = %@&quot;,[self superclass]);// TPerson<br>        NSLog(@&quot;[super class] = %@&quot;,[super class ]);// TStudent<br>        NSLog(@&quot;[super superclass] = %@&quot;,[super superclass]);// TPerson<br>    &#125;<br>    return  self;<br>&#125;<br>@end<br></code></pre></td></tr></table></figure><p>ä¸Šé¢è¿™æ®µinitä»£ç çš„åº•å±‚å®ç°å¦‚ä¸‹</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">static</span> instancetype _I_TStudent_init(TStudent * self, SEL _cmd) &#123;<br>    <span class="hljs-keyword">if</span> (self = ((TStudent *(*)(__rw_objc_super *, SEL))(<span class="hljs-keyword">void</span> *)objc_msgSendSuper)((__rw_objc_super)&#123;(id)self, (id)<span class="hljs-built_in">class_getSuperclass</span>(<span class="hljs-built_in">objc_getClass</span>(<span class="hljs-string">&quot;TStudent&quot;</span>))&#125;, <span class="hljs-built_in">sel_registerName</span>(<span class="hljs-string">&quot;init&quot;</span>))) &#123;<br>      <br>      <span class="hljs-built_in">NSLog</span>((NSString *)&amp;__NSConstantStringImpl__var_folders_dr_y6z2zsxs4m9bxrqxwcdchsnw0000gn_T_TStudent_7e015b_mi_0,((<span class="hljs-built_in">Class</span> (*)(id, SEL))(<span class="hljs-keyword">void</span> *)objc_msgSend)((id)self, <span class="hljs-built_in">sel_registerName</span>(<span class="hljs-string">&quot;class&quot;</span>)));<br>      <br>      <span class="hljs-built_in">NSLog</span>((NSString *)&amp;__NSConstantStringImpl__var_folders_dr_y6z2zsxs4m9bxrqxwcdchsnw0000gn_T_TStudent_7e015b_mi_1,((<span class="hljs-built_in">Class</span> (*)(id, SEL))(<span class="hljs-keyword">void</span> *)objc_msgSend)((id)self, <span class="hljs-built_in">sel_registerName</span>(<span class="hljs-string">&quot;superclass&quot;</span>)));<br>      <br>      <span class="hljs-built_in">NSLog</span>((NSString *)&amp;__NSConstantStringImpl__var_folders_dr_y6z2zsxs4m9bxrqxwcdchsnw0000gn_T_TStudent_7e015b_mi_2,((<span class="hljs-built_in">Class</span> (*)(__rw_objc_super *, SEL))(<span class="hljs-keyword">void</span> *)objc_msgSendSuper)((__rw_objc_super)&#123;(id)self, (id)<span class="hljs-built_in">class_getSuperclass</span>(<span class="hljs-built_in">objc_getClass</span>(<span class="hljs-string">&quot;TStudent&quot;</span>))&#125;, <span class="hljs-built_in">sel_registerName</span>(<span class="hljs-string">&quot;class&quot;</span>)));<br>        <br>      <span class="hljs-built_in">NSLog</span>((NSString *)&amp;__NSConstantStringImpl__var_folders_dr_y6z2zsxs4m9bxrqxwcdchsnw0000gn_T_TStudent_7e015b_mi_3,((<span class="hljs-built_in">Class</span> (*)(__rw_objc_super *, SEL))(<span class="hljs-keyword">void</span> *)objc_msgSendSuper)((__rw_objc_super)&#123;(id)self, (id)<span class="hljs-built_in">class_getSuperclass</span>(<span class="hljs-built_in">objc_getClass</span>(<span class="hljs-string">&quot;TStudent&quot;</span>))&#125;, <span class="hljs-built_in">sel_registerName</span>(<span class="hljs-string">&quot;superclass&quot;</span>)));<br>    &#125;<br>    <span class="hljs-keyword">return</span> self;<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°<code>[super class]</code>åº•å±‚è°ƒç”¨çš„æ˜¯<code>objc_msgSendSuper</code>æ–¹æ³•ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">objc_msgSendSuper(struct objc_super * _Nonnull super, SEL _Nonnull op, ...)<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬è¿›å…¥<code>objc4</code>æºç å¯ä»¥çœ‹åˆ°<code>objc_msgSendSuper</code>æ–¹æ³•çš„ä¸¤ä¸ªå‚æ•°ï¼š</p><ul><li><p>struct objc_super</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">objc_super</span> &#123;</span><br>    <span class="hljs-comment">/// Specifies an instance of a class.</span><br>    __unsafe_unretained _Nonnull id receiver;<br><br>    <span class="hljs-comment">/// Specifies the particular superclass of the instance to message. </span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> !defined(__cplusplus)  &amp;&amp;  !__OBJC2__</span><br>    <span class="hljs-comment">/* For compatibility with old objc-runtime.h header */</span><br>    __unsafe_unretained _Nonnull Class <span class="hljs-class"><span class="hljs-keyword">class</span>;</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">else</span></span><br>    __unsafe_unretained _Nonnull Class super_class;<br><span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span><br>    <span class="hljs-comment">/* super_class is the first class to search */</span><br>&#125;;<br></code></pre></td></tr></table></figure><p><code>reciver</code>: æ¶ˆæ¯æ¥æ”¶è€…</p><p><code>super_class</code> : å‘Šè¯‰ç¼–è¯‘å™¨æ–¹æ³•æŸ¥æ‰¾ä»<code>superClass</code>å¼€å§‹ï¼ˆæ­£å¸¸çš„è¯æ˜¯<code>class</code>-&gt;<code>superClass</code>ï¼‰</p></li><li><p>SEL</p></li></ul><p>ä»initçš„åº•å±‚æºç ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š</p><ol><li><p><code>[super class]</code>ã€<code>[super superclass]</code>çš„æ¶ˆæ¯æ¥æ”¶è€…å§‹ç»ˆéƒ½æ˜¯<code>self</code>ã€‚</p></li><li><p><code>objc_msgSendSuper</code>æ–¹æ³•é€šè¿‡ä¼ å…¥çš„<code>super_class</code>åªæ˜¯è®©ç¼–è¯‘å™¨çŸ¥é“ä»å“ªä¸ªåœ°æ–¹è¿›è¡Œæ–¹æ³•æŸ¥æ‰¾ã€‚</p></li></ol><p>ç»“è®ºï¼š</p><p><code>[self class]</code>ã€[super calss]æ¥æ”¶æ¶ˆæ¯çš„å¯¹è±¡éƒ½æ˜¯<code>self</code>ï¼Œåªæ˜¯æŸ¥æ‰¾æ–¹æ³•çš„èµ·å§‹ä½ç½®ä¸åŒï¼Œæœ€ç»ˆéƒ½æ˜¯æ‰¾åˆ°<code>NSObject</code>çš„<code>class</code>æ–¹æ³•ã€‚å› æ­¤è¿”å›çš„éƒ½æ˜¯çˆ¶ç±»<code>TPerson</code>ã€‚</p><p><code>[self superclass]</code>ã€<code>[super supercalss]</code>åŒç†ã€‚</p><h4 id="5-isKindOfClasså’ŒisMemberOfClassçš„åŒºåˆ«ï¼Ÿ"><a href="#5-isKindOfClasså’ŒisMemberOfClassçš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="5. isKindOfClasså’ŒisMemberOfClassçš„åŒºåˆ«ï¼Ÿ"></a>5. isKindOfClasså’ŒisMemberOfClassçš„åŒºåˆ«ï¼Ÿ</h4><p>å¯¹è±¡æ–¹æ³•åº•å±‚å®ç°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// å®ä¾‹å¯¹è±¡çš„ç±» æ˜¯å¦ç­‰äºcls<br>- (BOOL)isMemberOfClass:(Class)cls &#123;<br>    return [self class] == cls;<br>&#125;<br>// å®ä¾‹å¯¹è±¡çš„ç±»ã€çˆ¶ç±»ã€çˆ¶ç±»çš„çˆ¶ç±»ç­‰æ˜¯å¦ç­‰äºcls<br>- (BOOL)isKindOfClass:(Class)cls &#123;<br>    for (Class tcls = [self class]; tcls; tcls = tcls-&gt;superclass) &#123;<br>        if (tcls == cls) return YES;<br>    &#125;<br>    return NO;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç±»æ–¹æ³•çš„åº•å±‚å®ç°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">//ç±»çš„meta-classæ˜¯å¦ç­‰äºcls<br>+ (BOOL)isMemberOfClass:(Class)cls &#123;<br>    return object_getClass((id)self) == cls;<br>&#125;<br>// ç±»meta-calssã€çˆ¶ç±»çš„meta-classã€çˆ¶ç±»çš„çˆ¶ç±»çš„meta-classç­‰æ˜¯å¦ç­‰äºcls<br>+ (BOOL)isKindOfClass:(Class)cls &#123;<br>    for (Class tcls = object_getClass((id)self); tcls; tcls = tcls-&gt;superclass) &#123;<br>        if (tcls == cls) return YES;<br>    &#125;<br>    return NO;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">NSLog(@&quot;%d&quot;,[NSObject isKindOfClass:[NSObject class]]);<br>// 1<br>//NSObjectçš„meta-calssçš„superclassæŒ‡å‘äº†NSObject<br></code></pre></td></tr></table></figure><p><font color=orange>æœ¬ç¯‡å†…å®¹å‡ºè‡ªå°ç å“¥è§†é¢‘,åªä¸ºæ–¹ä¾¿è‡ªå·±ä»¥åæŸ¥é˜…ï¼</font></p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul><li><a href="http://c.biancheng.net/cpp/html/2932.html">Cè¯­è¨€ä¸­æ–‡ç½‘</a></li><li><a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html#//apple_ref/doc/uid/TP40008048-CH100-SW1">Type Encoding</a></li><li><a href="">å°ç å“¥è§†é¢‘</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>iOS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å¤‡è€ƒ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>iOS_OCå¯¹è±¡çš„æœ¬è´¨</title>
    <link href="/2022/02/23/iOS/%E5%A4%87%E8%80%83/OC%E8%AF%AD%E8%A8%80%E7%89%B9%E6%80%A7%E7%9B%B8%E5%85%B3/iOS_OC%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%9C%AC%E8%B4%A8/"/>
    <url>/2022/02/23/iOS/%E5%A4%87%E8%80%83/OC%E8%AF%AD%E8%A8%80%E7%89%B9%E6%80%A7%E7%9B%B8%E5%85%B3/iOS_OC%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%9C%AC%E8%B4%A8/</url>
    
    <content type="html"><![CDATA[<h3 id="ä¸€ã€OCå¯¹è±¡çš„æœ¬è´¨"><a href="#ä¸€ã€OCå¯¹è±¡çš„æœ¬è´¨" class="headerlink" title="ä¸€ã€OCå¯¹è±¡çš„æœ¬è´¨"></a>ä¸€ã€OCå¯¹è±¡çš„æœ¬è´¨</h3><p>æˆ‘ä»¬å¹³æ—¶ç¼–å†™çš„Object-Cä»£ç ï¼Œåº•å±‚å®ç°å…¶å®éƒ½æ˜¯åŸºäºC/C++ä»£ç ï¼Œæ‰€ä»¥Object-Cçš„é¢å‘å¯¹è±¡éƒ½æ˜¯åŸºäºC/C++çš„æ•°æ®ç»“æ„å®ç°çš„ã€‚é‚£å®ƒåˆ°åº•æ˜¯åŸºäºä»€ä¹ˆæ•°æ®ç»“æ„å®ç°çš„å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬çŸ¥é“ï¼ŒOCä¸­æ‰€æœ‰å¯¹è±¡åŸºæœ¬ä¸Šéƒ½æ˜¯ç»§æ‰¿è‡ªNSObjectçš„ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡çª¥æ¢NSObjectçš„åº•å±‚å®ç°ï¼Œç¡®å®šOCå¯¹è±¡çš„æœ¬è´¨ã€‚</p><p>æˆ‘ä»¬åœ¨xcodeä¸­é€šè¿‡commadç‚¹å‡»è¿›å…¥NSObjectä¸­å¯ä»¥çœ‹åˆ°NSObjectå¤´æ–‡ä»¶ä¸­å¯¹å…¶çš„å®šä¹‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// NSObject çš„å®šä¹‰<br>@interface NSObject &lt;NSObject&gt; &#123;<br>#pragma clang diagnostic push<br>#pragma clang diagnostic ignored &quot;-Wobjc-interface-ivars&quot;<br>    Class isa  OBJC_ISA_AVAILABILITY;<br>#pragma clang diagnostic pop<br>&#125;<br></code></pre></td></tr></table></figure><p>é€šè¿‡<code>xcrun  -sdk  iphoneos  clang  -arch  arm64  -rewrite-objc OCæºæ–‡ä»¶ -o è¾“å‡ºçš„CPPæ–‡ä»¶</code>å°†OCä»£ç è½¬åŒ–ä¸ºC/C++ä»£ç ï¼Œçª¥æ¢NSObjectçš„åº•å±‚å®ç°ï¼Œå¯ä»¥å‘ç°NSObjectå¯¹è±¡åœ¨C/C++ä¸­å°±æ˜¯ä¸€ä¸ªç»“æ„ä½“ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">NSObject_IMPL</span> &#123;</span><br>Class isa;<br>&#125;;<br><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">objc_class</span> *<span class="hljs-title">Class</span>;</span><br></code></pre></td></tr></table></figure><p>æ‰€ä»¥å¯ä»¥è¯´OCå¯¹è±¡çš„æœ¬è´¨æ˜¯åœ¨C/C++å†…å­˜ä¸­çš„ç»“æ„ä½“ã€‚</p><h3 id="äºŒã€OCå¯¹è±¡çš„åˆ†ç±»"><a href="#äºŒã€OCå¯¹è±¡çš„åˆ†ç±»" class="headerlink" title="äºŒã€OCå¯¹è±¡çš„åˆ†ç±»"></a>äºŒã€OCå¯¹è±¡çš„åˆ†ç±»</h3><p>OCå¯¹è±¡ä¸»è¦åˆ†ä¸ºä¸‰ç±»ï¼š</p><ol><li><p>instanceå¯¹è±¡</p><p>instanceå¯¹è±¡å°±æ˜¯é€šè¿‡allocå‡ºæ¥çš„å¯¹è±¡ï¼Œæ¯æ¬¡è°ƒç”¨allocéƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„instanceå¯¹è±¡ï¼Œå®ƒä»¬å ç”¨ç€ä¸åŒçš„å†…å­˜åœ°å€ã€‚</p><p>instanceå¯¹è±¡åœ¨å†…å­˜ä¸­ä¸»è¦å­˜å‚¨çš„ä¿¡æ¯åŒ…æ‹¬ï¼š</p><ul><li><p>isaæŒ‡é’ˆ</p></li><li><p>å…¶ä»–æˆå‘˜å˜é‡ï¼ˆæˆå‘˜å˜é‡å®é™…çš„å€¼ï¼‰</p></li></ul></li><li><p>classå¯¹è±¡</p><p>calsså¯¹è±¡çš„è·å–æ–¹æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">#import &lt;objc/runtime.h&gt;<br>NSObject *obj = [[NSObject alloc]init];<br>// è·å–classå¯¹è±¡çš„æ–¹æ³•<br>//1.<br>Class objClass1 = [obj class];<br>//2.<br>Class objClass2 = [NSObject class];<br>//3.runtimeæ–¹æ³•<br>Class objClass3 = object_getClass(obj);<br></code></pre></td></tr></table></figure><p>classå¯¹è±¡åœ¨å†…å­˜ä¸­å­˜å‚¨çš„ä¿¡æ¯ï¼š</p><ul><li>isaæŒ‡é’ˆ</li><li>superclassæŒ‡é’ˆ</li><li>ç±»çš„å±æ€§ä¿¡æ¯ï¼ˆ@propertyï¼‰ã€ç±»çš„å¯¹è±¡æ–¹æ³•ä¿¡æ¯ï¼ˆ-(void)ï¼‰</li><li>ç±»çš„åè®®ä¿¡æ¯ï¼ˆprotocolï¼‰ã€ç±»çš„æˆå‘˜å˜é‡ä¿¡æ¯ï¼ˆivarï¼‰(æˆå‘˜å˜é‡çš„åç§°ã€ç±»å‹)</li></ul></li><li><p>meta-classå¯¹è±¡</p><p>meta-class è·å–æ–¹æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">#import &lt;objc/runtime.h&gt;<br><br>Class objcMetaClass = object_getClass([NSObject class]);<br></code></pre></td></tr></table></figure><p>æ¯ä¸ªç±»åœ¨å†…å­˜ä¸­æœ‰ä¸”åªæœ‰ä¸€ä¸ªmeta-classå¯¹è±¡</p><p>meta-classå¯¹è±¡å’Œclasså¯¹è±¡çš„å†…å­˜ç»“æ„æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯meta-classå¯¹è±¡å†…å­˜ä¸­å­˜å‚¨çš„ä¿¡æ¯æ˜¯ï¼š</p><ul><li>isaæŒ‡é’ˆ</li><li>superclassæŒ‡é’ˆ</li><li>ç±»çš„ç±»æ–¹æ³•ä¿¡æ¯ï¼ˆ+(void)ï¼‰</li></ul><p>æŸ¥çœ‹Classå¯¹è±¡æ˜¯å¦ä¸ºåŸç±»å¯¹è±¡ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">#import &lt;objc/runtime.h&gt;<br><br>BOOL result = class_isMetaClass([NSObject class]);<br></code></pre></td></tr></table></figure></li></ol><h3 id="ä¸‰ã€isaæŒ‡é’ˆ"><a href="#ä¸‰ã€isaæŒ‡é’ˆ" class="headerlink" title="ä¸‰ã€isaæŒ‡é’ˆ"></a>ä¸‰ã€isaæŒ‡é’ˆ</h3><p>è¿™é‡Œç”¨ä¸€å¼ å›¾è§£é‡ŠisaæŒ‡é’ˆçš„ä½œç”¨ï¼š</p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202203011714702.png" alt="isaæŒ‡é’ˆ" style="zoom:100%;margin-left:10px" /><h4 id="1-isaçš„æœ¬è´¨"><a href="#1-isaçš„æœ¬è´¨" class="headerlink" title="1. isaçš„æœ¬è´¨"></a>1. isaçš„æœ¬è´¨</h4><p>åœ¨64bitä¸­ï¼š</p><p>instanceå¯¹è±¡isaæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜åœ°å€&amp;ISA_MASK=classå¯¹è±¡çš„å†…å­˜åœ°å€</p><p>classå¯¹è±¡isaæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜åœ°å€&amp;ISA_MASK=meta-classå¯¹è±¡çš„å†…å­˜åœ°å€</p><p>è¡¥å……ï¼š</p><p>classã€meta-classå¯¹è±¡çš„æœ¬è´¨ç»“æ„éƒ½æ˜¯struct objc_classï¼Œå…¶å†…éƒ¨ç»“æ„å¦‚å›¾ï¼š  </p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202203011733312.png" alt="struct objc_classçš„ç»“æ„" style="zoom:97%;margin-left:10px" /><h4 id="2-isaã€superclassæ€»ç»“"><a href="#2-isaã€superclassæ€»ç»“" class="headerlink" title="2. isaã€superclassæ€»ç»“"></a>2. isaã€superclassæ€»ç»“</h4><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202203011720602.png" alt="image-20220301172044495" style="zoom:70%;margin-left:10px" /><h5 id="2-1-isa"><a href="#2-1-isa" class="headerlink" title="2.1. isa"></a>2.1. isa</h5><ul><li>instanceçš„isaæŒ‡å‘class</li><li>calssçš„isaæŒ‡å‘meta-calss</li><li>meta-calssçš„isaæŒ‡é’ˆæŒ‡å‘åŸºç±»çš„meta-class</li></ul><h5 id="2-2-superclass"><a href="#2-2-superclass" class="headerlink" title="2.2. superclass"></a>2.2. superclass</h5><ul><li>classçš„superclassæŒ‡å‘çˆ¶ç±»çš„classï¼Œå¦‚æœæ²¡æœ‰çˆ¶ç±»ï¼ŒsuperclassæŒ‡å‘nil</li><li>meta-classçš„superclassæŒ‡å‘çˆ¶ç±»çš„meta-classï¼ŒåŸºç±»çš„meta-classçš„spuerclassæŒ‡å‘åŸºç±»çš„class</li></ul><h5 id="2-3-æ–¹æ³•è°ƒç”¨è½¨è¿¹"><a href="#2-3-æ–¹æ³•è°ƒç”¨è½¨è¿¹" class="headerlink" title="2.3. æ–¹æ³•è°ƒç”¨è½¨è¿¹"></a>2.3. æ–¹æ³•è°ƒç”¨è½¨è¿¹</h5><ul><li><p>instanceè°ƒç”¨å¯¹è±¡æ–¹æ³•çš„è½¨è¿¹</p><p>isaæ‰¾åˆ°classï¼Œæ–¹æ³•ä¸å­˜åœ¨ï¼Œå°±é€šè¿‡superclassæ‰¾çˆ¶ç±»</p></li><li><p>classè°ƒç”¨ç±»æ–¹æ³•çš„è½¨è¿¹</p><p>isaæ‰¾åˆ°meta-classï¼Œæ–¹æ³•ä¸å­˜åœ¨ï¼Œé€šè¿‡superclassæ‰¾çˆ¶ç±»</p></li></ul><h3 id="å››ã€é¢è¯•é¢˜ï¼š"><a href="#å››ã€é¢è¯•é¢˜ï¼š" class="headerlink" title="å››ã€é¢è¯•é¢˜ï¼š"></a>å››ã€é¢è¯•é¢˜ï¼š</h3><ol><li><p>ä¸€ä¸ªNSObjectå¯¹è±¡å å¤šå°‘å†…å­˜ï¼Ÿ</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•è¿›è¡Œè®¡ç®—ï¼š</p><ul><li><p>åˆ›å»ºä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œè‡³å°‘éœ€è¦å¤šå°‘å†…å­˜ï¼Ÿ</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#import <span class="hljs-meta-string">&lt;objc/runtime.h&gt;</span></span><br><span class="hljs-built_in">class_getInstanceSize</span>([NSObject class])<br></code></pre></td></tr></table></figure></li><li><p>åˆ›å»ºä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œå®é™…åˆ†é…çš„å†…å­˜ï¼Ÿ</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#import <span class="hljs-meta-string">&lt;malloc/malloc.h&gt;</span></span><br><span class="hljs-built_in">malloc_size</span>((__bridge <span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span> *)obj)<br></code></pre></td></tr></table></figure></li></ul><p>å¯ä»¥å¾—å‡ºç³»ç»Ÿåˆ†é…äº†16ä¸ªå­—èŠ‚ç»™NSObjectå¯¹è±¡ï¼Œä½†æ˜¯NSObjectå¯¹è±¡å†…éƒ¨åªä½¿ç”¨äº†8ä¸ªå­—èŠ‚çš„ç©ºé—´ï¼ˆ64bitç¯å¢ƒä¸‹ï¼‰  </p></li><li><p>å¯¹è±¡çš„isaæŒ‡é’ˆæŒ‡å‘å“ªé‡Œï¼Ÿ</p><ul><li>instanceçš„isaæŒ‡é’ˆæŒ‡å‘claså¯¹è±¡</li><li>calsså¯¹è±¡çš„isaæŒ‡é’ˆæŒ‡å‘meta-calsså¯¹è±¡</li><li>meta-classçš„isaæŒ‡å‘åŸºç±»çš„meta-calsså¯¹è±¡</li></ul></li><li><p>OCç±»ä¿¡æ¯å­˜æ”¾åœ¨å“ªé‡Œï¼Ÿ</p><ul><li>å¯¹è±¡æ–¹æ³•ã€å±æ€§ã€æˆå‘˜å˜é‡ã€åè®®ä¿¡æ¯å­˜æ”¾åœ¨ç±»å¯¹è±¡ä¸­</li><li>ç±»æ–¹æ³•å­˜æ”¾åœ¨meta-classå¯¹è±¡ä¸­</li><li>æˆå‘˜å˜é‡çš„å…·ä½“å€¼å­˜æ”¾åœ¨instanceå¯¹è±¡ä¸­</li></ul></li></ol>]]></content>
    
    
    <categories>
      
      <category>iOS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å¤‡è€ƒ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>iOS_å±æ€§å…³é”®å­—</title>
    <link href="/2022/01/19/iOS/%E5%A4%87%E8%80%83/OC%E8%AF%AD%E8%A8%80%E7%89%B9%E6%80%A7%E7%9B%B8%E5%85%B3/iOS_%E5%B1%9E%E6%80%A7%E5%85%B3%E9%94%AE%E5%AD%97/"/>
    <url>/2022/01/19/iOS/%E5%A4%87%E8%80%83/OC%E8%AF%AD%E8%A8%80%E7%89%B9%E6%80%A7%E7%9B%B8%E5%85%B3/iOS_%E5%B1%9E%E6%80%A7%E5%85%B3%E9%94%AE%E5%AD%97/</url>
    
    <content type="html"><![CDATA[<h3 id="ä¸€ã€å±æ€§å’Œæˆå‘˜å˜é‡"><a href="#ä¸€ã€å±æ€§å’Œæˆå‘˜å˜é‡" class="headerlink" title="ä¸€ã€å±æ€§å’Œæˆå‘˜å˜é‡"></a>ä¸€ã€å±æ€§å’Œæˆå‘˜å˜é‡</h3><h4 id="1ã€æˆå‘˜å˜é‡"><a href="#1ã€æˆå‘˜å˜é‡" class="headerlink" title="1ã€æˆå‘˜å˜é‡"></a>1ã€æˆå‘˜å˜é‡</h4><p>æˆå‘˜å˜é‡çš„å£°æ˜ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">@interface ViewController ()<br>&#123;<br>    NSString *name;// æˆå‘˜å˜é‡<br>  UIButton *btn;//å®ä¾‹å˜é‡<br>  id userId;//å®ä¾‹å˜é‡<br>&#125;<br>@end<br></code></pre></td></tr></table></figure><p>å®ä¾‹å˜é‡ï¼šclassç±»è¿›è¡Œå®ä¾‹åŒ–å‡ºæ¥çš„å¯¹è±¡ã€‚idæ˜¯ä¸€ç§ç‰¹æ®Šçš„classï¼Œæ˜¯OCç‰¹æœ‰çš„å¯¹è±¡ã€‚</p><p>æˆå‘˜å˜é‡ï¼š{ }å†…å£°æ˜çš„å˜é‡ï¼Œéƒ½æ˜¯æˆå‘˜å˜é‡ï¼Œå®ä¾‹å˜é‡æ˜¯æˆå‘˜å˜é‡çš„ä¸€ç§ã€‚</p><h4 id="2ã€-å±æ€§"><a href="#2ã€-å±æ€§" class="headerlink" title="2ã€ å±æ€§"></a>2ã€ å±æ€§</h4><p>å±æ€§çš„å£°æ˜ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">@interface ViewController ()<br>@property(nonatomic, copy) NSString* name;<br>@end<br></code></pre></td></tr></table></figure><p>å±æ€§çš„æœ¬è´¨ï¼š</p><p>@property = æˆå‘˜å˜é‡+setter+getter ï¼Œå±æ€§å£°æ˜æ—¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬å£°æ˜ä¸€ä¸ªå¸¦ä¸‹åˆ’çº¿çš„æˆå‘˜å˜é‡ï¼ŒåŒæ—¶ä¼šå£°æ˜setterå’Œgetteræ–¹æ³•ã€‚</p><h3 id="äºŒã€å…³é”®å­—"><a href="#äºŒã€å…³é”®å­—" class="headerlink" title="äºŒã€å…³é”®å­—"></a>äºŒã€å…³é”®å­—</h3><p>ä½œç”¨ï¼šç”¨æ¥ä¿®é¥°å±æ€§</p><h4 id="1ã€è¯»å–æƒé™"><a href="#1ã€è¯»å–æƒé™" class="headerlink" title="1ã€è¯»å–æƒé™"></a>1ã€è¯»å–æƒé™</h4><ul><li><p>readonly</p><p>readonlyä¿®é¥°çš„å±æ€§ä¸ä¼šç”Ÿæˆsetteræ–¹æ³•ï¼Œä¸èƒ½å¯¹å±æ€§è¿›è¡Œä¿®æ”¹</p></li><li><p>readwrite (é»˜è®¤)</p><p>readwriteä¿®é¥°çš„å±æ€§ï¼Œä¼šç”Ÿæˆsetterå’Œgetteræ–¹æ³•</p></li></ul><h4 id="2ã€åŸå­æ“ä½œ"><a href="#2ã€åŸå­æ“ä½œ" class="headerlink" title="2ã€åŸå­æ“ä½œ"></a>2ã€åŸå­æ“ä½œ</h4><ul><li><p>atomic</p><p>åŸå­æ€§ï¼Œåœ¨å¤šçº¿ç¨‹ä¸­åŒä¸€ä¸ªå˜é‡å¯èƒ½è¢«å¤šä¸ªçº¿ç¨‹è®¿é—®ç”šè‡³æ›´æ”¹ï¼Œè¿›è€Œé€ æˆæ•°æ®æ±¡æŸ“ï¼Œå› æ­¤ä¸ºäº†å®‰å…¨ï¼ŒOCé»˜è®¤æ˜¯atomicï¼Œå³ä¼šå¯¹setteræ–¹æ³•åŠ é”ï¼Œç›¸åº”çš„ä¹Ÿä¼šä»˜å‡ºç»´æŠ¤åŸå­æ€§ï¼ˆæ•°æ®åŠ é”è§£é”ç­‰ï¼‰çš„ç³»ç»Ÿèµ„æºä»£ä»·ã€‚</p></li><li><p>nonatomic</p><p>éåŸå­æ€§ï¼Œä¸ä¼šå¯¹setteræ–¹æ³•åŠ é”ï¼Œåº”ç”¨ä¸­å¦‚æœä¸æ˜¯ç‰¹æ®Šæƒ…å†µï¼ˆå¤šçº¿ç¨‹é—´çš„é€šä¿¡ç¼–ç ï¼‰ï¼Œé‚£ä¹ˆä¸€èˆ¬è¿˜æ˜¯ä½¿ç”¨nonatomicæ¥ä¿®é¥°å˜é‡çš„ï¼Œä¸ä¼šå¯¹setteræ–¹æ³•åŠ é”ï¼Œä»¥æé«˜å¤šçº¿ç¨‹å¹¶å‘è®¿é—®æ—¶çš„æ€§èƒ½ã€‚</p></li></ul><h4 id="3ã€å¼•ç”¨è®¡æ•°"><a href="#3ã€å¼•ç”¨è®¡æ•°" class="headerlink" title="3ã€å¼•ç”¨è®¡æ•°"></a>3ã€å¼•ç”¨è®¡æ•°</h4><ul><li><p>strong</p><p>æŒ‡å‘å¹¶æ‹¥æœ‰è¯¥å¯¹è±¡ï¼Œå…¶ä¿®é¥°çš„å¯¹è±¡å¼•ç”¨è®¡æ•°ä¼š+1ã€‚è¯¥å¯¹è±¡åªæœ‰å¼•ç”¨è®¡æ•°ä¸ä¸º0å°±ä¸ä¼šè¢«é”€æ¯ã€‚å¯ä»¥é€šè¿‡å°†å¯¹è±¡è®¾ç½®ä¸ºnilå°†å…¶å¼ºè¡Œé”€æ¯ã€‚</p></li><li><p>assign</p><ul><li><p>ä¿®é¥°åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå¦‚intã€Boolç­‰</p></li><li><p>ä¿®é¥°å¯¹è±¡çš„æ—¶å€™ï¼ŒæŒ‡å‘å¹¶ä¸æ‹¥æœ‰è¯¥å¯¹è±¡ï¼Œä¸ä¼šä½¿è¯¥å¯¹è±¡å¼•ç”¨è®¡æ•°ï¼‹1</p></li><li><p>ä¿®é¥°çš„å¯¹è±¡è¢«é‡Šæ”¾åï¼ŒæŒ‡é’ˆä»ç„¶æŒ‡å‘åŸæ¥çš„å†…å­˜åœ°å€ï¼Œ è¿™æ—¶å€™å¦‚æœå†é€šè¿‡assignæŒ‡é’ˆç»§ç»­è®¿é—®å¯¹è±¡çš„è¯ï¼Œä¼šå› ä¸ºæ‚¬å‚æŒ‡é’ˆçš„åŸå› å¯¼è‡´å†…å­˜æ³„éœ²æˆ–è€…ç¨‹åºå¼‚å¸¸</p></li></ul><blockquote><p>æ‚¬å‚æŒ‡é’ˆï¼šæŒ‡é’ˆæ‰€æŒ‡å‘çš„å¯¹è±¡å·²ç»è¢«é‡Šæ”¾æˆ–è€…å›æ”¶ï¼Œä½†æ˜¯æŒ‡å‘è¯¥å¯¹è±¡çš„æŒ‡é’ˆæ²¡æœ‰ä½œä»»ä½•çš„ä¿®æ”¹ï¼Œä»æ—§æŒ‡å‘å·²ç»å›æ”¶çš„å†…å­˜åœ°å€</p></blockquote></li><li><p>weak</p><ul><li><p>åªèƒ½ä¿®é¥°å¯¹è±¡</p></li><li><p>ä¸æ”¹å˜è¢«ä¿®é¥°å¯¹è±¡çš„å¼•ç”¨è®¡æ•°</p></li><li><p>æ‰€æŒ‡å‘å¯¹è±¡åœ¨è¢«é‡Šæ”¾åä¼šè‡ªåŠ¨ç½®ä¸ºnil</p></li></ul><blockquote><p>weakä¿®é¥°çš„å¯¹è±¡ä»€ä¹ˆæ—¶å€™ä¼šè¢«é‡Šæ”¾ï¼Ÿ</p></blockquote></li><li><p>copy</p><p>æµ…æ‹·è´ï¼š</p><ul><li>æµ…æ‹·è´åªæ˜¯å¯¹å†…å­˜åœ°å€çš„èµ‹å€¼ï¼Œä¸ä¼šå¢åŠ å†…å­˜ç©ºé—´çš„ã€‚ </li><li>ä¼šå¢åŠ è¢«æ‹·è´å¯¹è±¡çš„å¼•ç”¨è®¡æ•°+1</li></ul><p>æ·±æ‹·è´ï¼š</p><ul><li>ä¼šäº§ç”Ÿæ–°çš„å†…å­˜åˆ†é…</li><li>ä¸ä¼šå¢åŠ è¢«æ‹·è´å¯¹è±¡çš„å¼•ç”¨è®¡æ•°</li></ul><p>å¯¹æ¯”ï¼š</p><table><thead><tr><th align="left">æºå¯¹è±¡ç±»å‹</th><th>æ‹·è´æ–¹å¼</th><th>ç›®æ ‡å¯¹è±¡ç±»å‹</th><th>æ‹·è´ç±»å‹ï¼ˆæ·±ã€æµ…ï¼‰</th></tr></thead><tbody><tr><td align="left">å¯å˜å¯¹è±¡</td><td>copy</td><td>ä¸å¯å˜</td><td>æ·±æ‹·è´</td></tr><tr><td align="left">å¯å˜å¯¹è±¡</td><td>mutableCopy</td><td>å¯å˜</td><td>æ·±æ‹·è´</td></tr><tr><td align="left">ä¸å¯å˜å¯¹è±¡</td><td>copy</td><td>ä¸å¯å˜</td><td>æµ…æ‹·è´</td></tr><tr><td align="left">ä¸å¯å˜å¯¹è±¡</td><td>mutableCopy</td><td>å¯å˜</td><td>æ·±æ‹·è´</td></tr></tbody></table><p>æ€»ç»“ï¼š</p><ul><li><p>ä½¿ç”¨copyä¿®é¥°çš„ç›®æ ‡å¯¹è±¡éƒ½æ˜¯ä¸å¯å˜çš„ã€‚</p></li><li><p>ä½¿ç”¨mutableCopyä¿®é¥°çš„ç›®æ ‡å¯¹è±¡éƒ½æ˜¯å¯å˜çš„ã€‚</p></li><li><p>åªæœ‰ä¸å¯å˜å¯¹è±¡ä½¿ç”¨copyä¿®é¥°æ‰æ˜¯æµ…æ‹·è´ï¼Œå…¶ä»–çš„éƒ½æ˜¯æ·±æ‹·è´ã€‚</p></li></ul></li></ul><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul><li><p><a href="https://juejin.cn/post/6844903527815331854">iOSä¸­atomichå’ŒnonatomicåŒºåˆ«åŠå†…éƒ¨å®ç° </a></p></li><li><p><a href="https://www.jianshu.com/p/5d138efee024">NSMutableStringä¸è¦ç”¨copy</a></p></li></ul>]]></content>
    
    
    <categories>
      
      <category>iOS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å¤‡è€ƒ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>iOS_KVOä¸KVC</title>
    <link href="/2022/01/19/iOS/%E5%A4%87%E8%80%83/OC%E8%AF%AD%E8%A8%80%E7%89%B9%E6%80%A7%E7%9B%B8%E5%85%B3/iOS-KVO%E4%B8%8EKVC/"/>
    <url>/2022/01/19/iOS/%E5%A4%87%E8%80%83/OC%E8%AF%AD%E8%A8%80%E7%89%B9%E6%80%A7%E7%9B%B8%E5%85%B3/iOS-KVO%E4%B8%8EKVC/</url>
    
    <content type="html"><![CDATA[<h3 id="ä¸€-KVC"><a href="#ä¸€-KVC" class="headerlink" title="ä¸€. KVC"></a>ä¸€. KVC</h3><h4 id="1-ä»€ä¹ˆæ˜¯KVC"><a href="#1-ä»€ä¹ˆæ˜¯KVC" class="headerlink" title="1. ä»€ä¹ˆæ˜¯KVC?"></a>1. ä»€ä¹ˆæ˜¯KVC?</h4><p>é”®å€¼ç¼–ç ï¼ˆKVCï¼‰æ˜¯ä¸€ç§åœ¨NSKeyValueCodingéæ­£å¼åè®®ä¸‹ä½¿ç”¨å­—ç¬¦ä¸²æ ‡å¿—é—´æ¥è®¿é—®å¯¹è±¡å±æ€§çš„ä¸€ç§æœºåˆ¶ã€‚</p><blockquote><p>æ³¨æ„ï¼šKVCå¯ä»¥æš´åŠ›è®¿é—®å¯¹è±¡çš„ä»»ä½•å˜é‡ï¼Œæ— è®ºæ˜¯å¦æ˜¯privateç§æœ‰ç±»å‹çš„å˜é‡ã€</p></blockquote><h4 id="2-KVCçš„ä½¿ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ"><a href="#2-KVCçš„ä½¿ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="2. KVCçš„ä½¿ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ"></a>2. KVCçš„ä½¿ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ</h4><p>åœ¨iOSå¼€å‘ä¸­ï¼Œå…è®¸å¼€å‘è€…é€šè¿‡keyåé—´æ¥çš„è®¿é—®å¯¹è±¡çš„å±æ€§ï¼Œæˆ–è€…ç›´æ¥ç»™å¯¹è±¡çš„å±æ€§èµ‹å€¼ï¼Œè€Œä¸éœ€è¦è°ƒç”¨å¯¹è±¡çš„å­˜å–æ–¹æ³•ã€‚è¿™æ ·å°±å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€çš„è®¿é—®å’Œä¿®æ”¹å¯¹è±¡çš„å±æ€§å€¼ã€‚</p><p>åœ¨OCä¸­ï¼ŒNSObjectç±»åŠå…¶å­ç±»é»˜è®¤éƒ½å®ç°NSKeyValueCodingåè®®ï¼Œè¿™ä¸ªåè®®å®šä¹‰äº†æ‰€æœ‰å®ç°KVCçš„æ–¹æ³•ã€‚ä¸‹é¢åˆ—ä¸¾KVCä¸­æœ€ä¸ºé‡è¦çš„4ä¸ªæ–¹æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// ç›´æ¥é€šè¿‡keyæ¥å–å€¼<br>- (nullable id )valueForKey:(NSString*)keyï¼›<br>// é€šè¿‡keyæ¥è®¾å€¼<br>-ï¼ˆvoidï¼‰setValue:(nullable id)value forKey:(NSString*)key;<br>// é€šè¿‡keyPathæ¥å–å€¼<br>- (nullable id )valueForKeyPath:(NSString*)keyPath;<br>// é€šè¿‡keyPathæ¥è®¾å€¼<br>-ï¼ˆvoidï¼‰setValue:(nullable id)value forKeyPath:(NSString*)keyPath;<br></code></pre></td></tr></table></figure><p>KVCçš„ä¸€èˆ¬åº”ç”¨åœºæ™¯ï¼š</p><ol><li><p>åŠ¨æ€çš„å–å€¼å’Œè®¾å€¼</p><p>KVCæœ€å¸¸ç”¨çš„ä¹Ÿæ˜¯æœ€åŸºç¡€çš„ç”¨é€”</p></li><li><p>åˆ©ç”¨KVCæ¥è®¿é—®ã€ä¿®æ”¹å¯¹è±¡çš„ç§æœ‰å±æ€§</p><p>å¯¹äºç±»ä¸­çš„ç§æœ‰å±æ€§ï¼Œæ— æ³•é€šè¿‡æ™®é€šçš„è®¾ç½®å’Œå–å€¼æ–¹æ³•ç›´æ¥è®¿é—®ï¼Œä½†æ˜¯KVCæ˜¯å¯ä»¥çš„ï¼Œå¦‚iOS13ä¹‹å‰UITextFieldä¸­çš„ä¿®æ”¹å ä½ç¬¦å­—ä½“é¢œè‰²</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">[textField setValue:[UIColor redColor] forKeyPath:@&quot;_placeholderLabel.textColor&quot;];<br></code></pre></td></tr></table></figure><blockquote><p>é”®è·¯å¾„ï¼šå°±æ˜¯é”®å€¼ç¼–ç ä¸­æŸä¸ªå±æ€§çš„keyï¼Œä¸€ä¸ªç”±è¿ç»­é”®åç»„æˆçš„å­—ç¬¦ä¸²ï¼Œé”®åå³å±æ€§åï¼Œé”®åä¹‹é—´ç”¨ç‚¹éš”å¼€ï¼Œç”¨äºæŒ‡å®šä¸€ä¸ªé“¾æ¥åœ¨ä¸€èµ·çš„å¯¹è±¡æ€§è´¨åºåˆ—ã€‚</p></blockquote></li><li><p>åˆ©ç”¨KVCè¿›è¡Œmodelå’Œå­—å…¸ä¹‹é—´çš„è½¬æ¢</p><p>ä½¿ç”¨KVCæä¾›çš„<code>setValuesForKeysWithDictionary:</code>ï¼Œå¯ä»¥å°†å­—å…¸æ˜ å°„åˆ°ä¸€ä¸ªå¯¹è±¡ï¼Œä¸éœ€è¦ä¸€ä¸€çš„ä¸ºå¯¹è±¡èµ‹å€¼è€Œç›´æ¥ä»å­—å…¸ä¸­åˆå§‹åŒ–å³å¯ã€‚</p></li><li><p>åˆ©ç”¨KVCå®ç°é«˜é˜¶æ¶ˆæ¯ä¼ é€’</p><p>å½“å¯¹å®¹å™¨ç±»ï¼ˆå¦‚NSArrayç±»ï¼‰ä½¿ç”¨KVCæ—¶ï¼Œ<code>valueForKeyï¼š</code>å°†ä¼šè¢«ä¼ é€’ç»™å®¹å™¨ä¸­çš„æ¯ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸æ˜¯å¯¹å®¹å™¨æœ¬èº«è¿›è¡Œæ“ä½œã€‚ç›¸åº”çš„ç»“æœä¼šè¢«æ·»åŠ è¿›è¿”å›çš„å®¹å™¨ä¸­ï¼Œè¿™æ ·å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ“ä½œé›†åˆæ¥è¿”å›å¦ä¸€ä¸ªé›†åˆã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">NSArray *array = @[@&quot;tom&quot;,@&quot;jim&quot;,@&quot;taylor&quot;];<br>NSArray *result = [array valueForKey:@&quot;capitalizedString&quot;];<br>NSLog(@&quot;%@&quot;,result);<br><br>// è¾“å‡º<br>22-02-15 17:43:41.470604+0800 KVC[14923:610897] (<br>    Tom,<br>    Jim,<br>    Taylor<br>)<br><br></code></pre></td></tr></table></figure></li></ol><h4 id="3-setValueï¼šForKeyï¼šæ–¹æ³•çš„åº•å±‚å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#3-setValueï¼šForKeyï¼šæ–¹æ³•çš„åº•å±‚å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="3. setValueï¼šForKeyï¼šæ–¹æ³•çš„åº•å±‚å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ"></a>3. setValueï¼šForKeyï¼šæ–¹æ³•çš„åº•å±‚å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>å½“ä¸€ä¸ªå¯¹è±¡å‘é€<code>setValue:forKeyï¼š</code>æ¶ˆæ¯æ—¶ï¼Œæ–¹æ³•å†…éƒ¨ä¼šåšä»¥ä¸‹æ“ä½œï¼š</p><ol><li>æŸ¥æ‰¾ç±»ä¸­æ˜¯å¦å­˜åœ¨ <code>setKey:</code> æˆ–è€…<code>_setKey:</code>,å¦‚æœæ‰¾åˆ°ï¼Œä¼ é€’å‚æ•°ï¼Œè°ƒç”¨æ–¹æ³•</li><li>æ²¡æœ‰æ‰¾åˆ° <code>setKey:</code> æˆ–è€…<code>_setKey:</code>æ–¹æ³•ï¼ŒæŸ¥çœ‹<code>accessInstanceVariablesDirectly</code>æ–¹æ³•çš„è¿”å›å€¼ï¼Œå¦‚æœè¿”å›ä¸º<code>NO</code>ï¼Œè°ƒç”¨<code>setValue:forUndefinedKey:</code>å¹¶æŠ›å‡ºå¼‚å¸¸<code>NSUnkonownKeyException</code>ã€‚</li><li>å¦‚æœ<code>accessInstanceVariablesDirectly</code>è¿”å›ä¸º<code>YES</code>,æŒ‰ç…§ <code>_key</code>ã€<code>_isKey</code>ã€<code>key</code>ã€<code>isKey</code>çš„é¡ºåºæŸ¥æ‰¾æˆå‘˜å˜é‡ï¼Œå¦‚æœæŸ¥æ‰¾åˆ°æˆå‘˜å˜é‡ï¼Œåˆ™ç›´æ¥èµ‹å€¼ï¼Œå¦‚æœæ²¡æœ‰æŸ¥æ‰¾åˆ°åˆ™è°ƒç”¨<code>setValue:forUndefinedKey:</code>å¹¶æŠ›å‡ºå¼‚å¸¸<code>NSUnkonownKeyException</code>ã€‚</li></ol><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202202161737178.png" alt="setValue:forKey:å®ç°åŸç†"></p><blockquote><p>accessInstanceVariablesDirectlyï¼šè¿™ä¸ªæ–¹æ³•é»˜è®¤çš„è¿”å›å€¼å°±æ˜¯YES</p></blockquote><h4 id="4-valueForKey-çš„åŸç†ï¼Ÿ"><a href="#4-valueForKey-çš„åŸç†ï¼Ÿ" class="headerlink" title="4.valueForKey:çš„åŸç†ï¼Ÿ"></a>4.valueForKey:çš„åŸç†ï¼Ÿ</h4><p>  å–å€¼çš„åŸç†ä¸èµ‹å€¼ç±»ä¼¼ï¼Œåªæ˜¯åœ¨ç¬¬ä¸€æ­¥æ˜¯æŒ‰ç…§<code>getKeyï¼š</code>ã€<code>keyï¼š</code>ã€<code>isKeyï¼š</code>ã€<code>_keyï¼š</code>çš„é¡ºåºæŸ¥æ‰¾ï¼Œåé¢çš„è¿‡ç¨‹è·Ÿèµ‹å€¼è¿‡ç¨‹å”¯ä¸€ä¸åŒæ˜¯ä¸€ä¸ªèµ‹å€¼ä¸€ä¸ªå–å€¼ã€‚ </p><h4 id="5-é—®é¢˜ï¼Ÿ"><a href="#5-é—®é¢˜ï¼Ÿ" class="headerlink" title="5.é—®é¢˜ï¼Ÿ"></a>5.é—®é¢˜ï¼Ÿ</h4><ol><li><p>é€šè¿‡KVCä¿®æ”¹å±æ€§å€¼æ˜¯å¦ä¼šè§¦å‘KVO?</p><p>å¯ä»¥ï¼Œå³ä½¿æ˜¯ç›´æ¥ä¸ºæˆå‘˜å˜é‡èµ‹å€¼ï¼Œä¹Ÿæ˜¯ä¼šè§¦å‘KVOï¼Œå› ä¸ºKVCè°ƒç”¨setValue:forKey:æ–¹æ³•çš„æ—¶å€™ä¼šè°ƒç”¨ä¸‹é¢ä¸¤ä¸ªæ–¹æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">[self willChangeValueForKey:@&quot;key&quot;];<br>[self didChangeValueForKey:@&quot;key&quot;]ï¼›<br></code></pre></td></tr></table></figure></li><li><p>setValueforKey:å’ŒsetObjectForKey:çš„åŒºåˆ«</p><ul><li><code>setObjectForKey:</code>æ˜¯<code>NSMutableDictionary</code>ç±»ç‰¹æœ‰çš„ï¼Œåªæœ‰<code>NSMutableDdictionary</code>ç±»åŠå…¶å­ç±»çš„å®ä¾‹åŒ–å¯¹è±¡èƒ½å¤Ÿä½¿ç”¨ï¼Œè€Œ<code>setValue:forKey:</code>æ–¹æ³•æ˜¯KVCçš„ä¸»è¦æ–¹æ³•ï¼Œåªè¦éµå¾ªNSCodingåè®®çš„å¯¹è±¡éƒ½èƒ½å¤Ÿä½¿ç”¨ã€‚</li><li><code>setValue:forKey:</code>ä¸­çš„keyçš„å‚æ•°åªèƒ½å¤Ÿæ˜¯NSStringç±»å‹ï¼Œè€Œ<code>setObject:forKey:</code>çš„keyå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å¯¹è±¡ç±»å‹ã€‚</li><li><code>setObject:forKey:</code>æ–¹æ³•ä¸­å‚æ•°valueä¸èƒ½ä¸ºnilï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚è€Œ<code>setValue:forKey:</code>ä¸­valueå¯ä»¥ä¸ºnilï¼Œåªæ˜¯å½“valueä¸ºnilçš„æ—¶å€™ä¼šè‡ªåŠ¨è°ƒç”¨<code>removeObject:forKey:</code>æ–¹æ³•</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">NSMutableDictionary *dict = [[NSMutableDictionary alloc] initWithDictionary:@&#123;@&quot;age&quot;:@&quot;10&quot;&#125;];<br>[dict setObject:@&quot;11&quot; forKey:@&quot;age&quot;];<br>NSLog(@&quot;%@&quot;,dict);<br>[dict setValue:@&quot;12&quot; forKey:@&quot;age&quot;];<br>NSLog(@&quot;%@&quot;,dict);<br>[dict setValue:nil forKey:@&quot;age&quot;];<br>NSLog(@&quot;%@&quot;,dict);<br>[dict setObject:nil forKey:@&quot;age&quot;]; // è­¦å‘Šâš ï¸ Null passed to a callee that requires a non-null argument<br>// è¾“å‡ºç»“æœ<br>2022-02-17 11:37:45.451375+0800 KVC[25119:1226604] &#123;<br>    age = 11;<br>&#125;<br>2022-02-17 11:37:45.451569+0800 KVC[25119:1226604] &#123;<br>    age = 12;<br>&#125;<br>2022-02-17 11:37:45.451698+0800 KVC[25119:1226604] &#123;<br>&#125;<br>2022-02-17 11:38:50.827182+0800 KVC[25144:1228282] *** Terminating app due to uncaught exception &#x27;NSInvalidArgumentException&#x27;, reason: &#x27;*** -[__NSDictionaryM setObject:forKey:]: object cannot be nil (key: age)&#x27;<br><br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šå½“å¯¹å­—å…¸èµ‹å€¼çš„æ—¶å€™éœ€è¦å…ˆå¯¹èµ‹å€¼çš„valueåšåˆ¤ç©ºå¤„ç†ï¼Œé˜²æ­¢crash</p></blockquote></li></ol><h3 id="äºŒ-KVO"><a href="#äºŒ-KVO" class="headerlink" title="äºŒ. KVO"></a>äºŒ. KVO</h3><h4 id="1-KVOçš„å®šä¹‰"><a href="#1-KVOçš„å®šä¹‰" class="headerlink" title="1. KVOçš„å®šä¹‰"></a>1. KVOçš„å®šä¹‰</h4><p>é”®å€¼è§‚å¯Ÿï¼ˆ<code>KVO</code>ï¼‰æ˜¯key-value observingçš„ç¼©å†™ï¼Œæ˜¯åŸºäºé”®å€¼ç¼–ç å®ç°çš„ä¸€ç§è§‚å¯Ÿè€…æœºåˆ¶ï¼Œæä¾›äº†è§‚å¯ŸæŸä¸€å±æ€§å˜åŒ–çš„ç›‘å¬æ–¹æ³•ã€‚</p><p>appleä½¿ç”¨isaæ··å†™ï¼ˆisa-swizzlingï¼‰æ¥å®ç°KVO</p><p>Isa æ··å†™æŠ€æœ¯çš„æ ‡å¿—ï¼šç³»ç»Ÿä¼šåœ¨è¿è¡Œæ—¶åŠ¨æ€åˆ›å»ºNSKVONotifying_A </p><blockquote><p>isaæ˜¯ä»€ä¹ˆï¼Ÿ</p></blockquote><h4 id="2-KVOçš„ç®€å•ä½¿ç”¨"><a href="#2-KVOçš„ç®€å•ä½¿ç”¨" class="headerlink" title="2. KVOçš„ç®€å•ä½¿ç”¨"></a>2. KVOçš„ç®€å•ä½¿ç”¨</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-comment">// KVOæ˜¯OCè¯­è¨€ç‰¹æ€§ï¼Œè¿™é‡Œéœ€è¦ç»§æ‰¿è‡ªNSObject</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span>: <span class="hljs-title">NSObject</span> </span>&#123;<br>    <span class="hljs-keyword">@objc</span> <span class="hljs-keyword">dynamic</span> <span class="hljs-keyword">var</span> age <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br>&#125;<br><br><br><span class="hljs-keyword">import</span> UIKit<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ViewController</span>: <span class="hljs-title">UIViewController</span> </span>&#123;<br>    <span class="hljs-keyword">let</span> p <span class="hljs-operator">=</span> <span class="hljs-type">Person</span>()<br>    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">viewDidLoad</span>()</span> &#123;<br>        <span class="hljs-keyword">super</span>.viewDidLoad()<br>      <span class="hljs-comment">// æ³¨å†Œæˆä¸ºè§‚å¯Ÿè€…</span><br>        p.addObserver(<span class="hljs-keyword">self</span>, forKeyPath: <span class="hljs-string">&quot;age&quot;</span>, options: .new, context: <span class="hljs-literal">nil</span>)<br>    &#125;<br>    <br>    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">touchesBegan</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">touches</span>: <span class="hljs-type">Set</span>&lt;<span class="hljs-type">UITouch</span>&gt;, <span class="hljs-params">with</span> <span class="hljs-params">event</span>: <span class="hljs-type">UIEvent</span>?)</span> &#123;<br>      <span class="hljs-comment">// è®¾ç½®éœ€è¦è¢«è§‚å¯Ÿå¯¹è±¡çš„å±æ€§</span><br>        p.age <span class="hljs-operator">=</span> <span class="hljs-number">2</span><br>    &#125;<br>    <br>    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">observeValue</span>(<span class="hljs-params">forKeyPath</span> <span class="hljs-params">keyPath</span>: <span class="hljs-type">String</span>?, <span class="hljs-params">of</span> <span class="hljs-params">object</span>: <span class="hljs-keyword">Any</span><span class="hljs-operator">?</span>, <span class="hljs-params">change</span>: [<span class="hljs-params">NSKeyValueChangeKey</span> : <span class="hljs-keyword">Any</span>]<span class="hljs-operator">?</span>, <span class="hljs-params">context</span>: <span class="hljs-type">UnsafeMutableRawPointer</span>?)</span> &#123;<br>      <span class="hljs-comment">// åœ¨å›è°ƒæ–¹æ³•ä¸­å¤„ç†å˜æ›´é€šçŸ¥</span><br>        <span class="hljs-built_in">print</span>(change<span class="hljs-operator">!</span>)<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="3-å¦‚ä½•ä½¿ç”¨KVOè®¾ç½®é”®å€¼è§‚å¯Ÿä¾èµ–é”®"><a href="#3-å¦‚ä½•ä½¿ç”¨KVOè®¾ç½®é”®å€¼è§‚å¯Ÿä¾èµ–é”®" class="headerlink" title="3. å¦‚ä½•ä½¿ç”¨KVOè®¾ç½®é”®å€¼è§‚å¯Ÿä¾èµ–é”®"></a>3. å¦‚ä½•ä½¿ç”¨KVOè®¾ç½®é”®å€¼è§‚å¯Ÿä¾èµ–é”®</h4><p>å¾ˆå¤šæƒ…å†µä¸‹å¯¹è±¡çš„å±æ€§ä¹‹é—´æ˜¯ç›¸äº’å…³è”çš„ï¼Œå¯¹è±¡çš„ä¸€ä¸ªå±æ€§å€¼ä¾èµ–äºå¦ä¸€ä¸ªå¯¹è±¡çš„ä¸€ä¸ªæˆ–å¤šä¸ªå±æ€§ï¼Œå¦‚æœè¢«ä¾èµ–å¯¹è±¡å±æ€§ä¸­çš„ä»»æ„ä¸€ä¸ªå€¼å‘ç”Ÿæ”¹å˜ï¼Œé‚£ä¹ˆå¯¹è±¡çš„å±æ€§çš„å€¼ä¹Ÿä¼šç›¸åº”å‘ç”Ÿæ”¹å˜ã€‚å®ä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">#import &lt;Foundation/Foundation.h&gt;<br><br>NS_ASSUME_NONNULL_BEGIN<br><br>@interface Person : NSObject<br>@property(nonatomic, copy) NSString *name;<br>@property(nonatomic, assign) NSInteger age;<br>@end<br><br>@interface Student : NSObject<br>@property(nonatomic, copy) NSString *infomation;<br>@property(nonatomic, strong) Person *p;<br>@end<br><br>NS_ASSUME_NONNULL_END<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶éœ€è¦è§‚å¯ŸStudentç±»å®ä¾‹ä¸­infomationå±æ€§å€¼çš„å˜åŒ–ï¼Œè€Œinformationå±æ€§å€¼ä¾èµ–äºPersonå±æ€§çš„å€¼ï¼Œå¦‚ä½•ç¡®å®šè¿™ç§ä¾èµ–å…³ç³»å‘¢ï¼Ÿ</p><ol><li><p>æ‰‹åŠ¨å®ç°informationçš„setterå’Œgetteræ–¹æ³•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">-(void)setInfomation:(NSString *)infomation<br>&#123;<br>    NSArray *array = [infomation componentsSeparatedByString:@&quot;#&quot;];<br>    [self.p setName:[array objectAtIndex:0]];<br>    [self.p setAge: [[array objectAtIndex:1] integerValue]];<br>&#125;<br><br>-(NSString *)infomation<br>&#123;<br>    return [NSString stringWithFormat:@&quot;%@#%ld&quot;,self.p.name,self.p.age];<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>å®ç°<code>+ (NSSet&lt;NSString *&gt; *)keyPathsForValuesAffectingValueForKey:(NSString *)key</code>æ–¹æ³•</p><p>è¿™ä¸ªæ–¹æ³•å‘Šè¯‰ç³»ç»Ÿinfomationå±æ€§ä¾èµ–äºå…¶å®ƒå“ªäº›å±æ€§</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">+(NSSet&lt;NSString *&gt; *)keyPathsForValuesAffectingValueForKey:(NSString *)key<br>&#123;<br>    if ([key isEqualToString:@&quot;infomation&quot;]) &#123;<br>        return [NSSet setWithObjects:@&quot;p.name&quot;,@&quot;p.age&quot;, nil];<br>    &#125;<br>    return  nil;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æ§åˆ¶å™¨ä¸­æ·»åŠ è§‚å¯Ÿè€…å’Œå®ç°KVOå›è°ƒ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">-(void)viewDidLoad<br>&#123;<br>   self.stu = [[Student alloc] init];<br>    Person *p = [[Person alloc] init];<br>    self.stu.p = p;<br>    <br>    self.stu.infomation = @&quot;a#1&quot;;<br>    NSLog(@&quot;%@&quot;,self.stu.infomation);<br>    [self.stu addObserver:self forKeyPath:@&quot;infomation&quot; options:NSKeyValueObservingOptionNew |   NSKeyValueObservingOptionOld context:nil];<br>&#125;<br><br>-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary&lt;NSKeyValueChangeKey,id&gt; *)change context:(void *)context<br>&#123;<br>    if ([keyPath isEqualToString:@&quot;infomation&quot;]) &#123;<br>        NSLog(@&quot;%@&quot;,self.stu.infomation);<br>    &#125;<br>&#125;<br><br>-(void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event<br>&#123;<br>    self.stu.p.name = @&quot;abc&quot;;<br>    self.stu.p.age = 2;<br>&#125;<br>//  log <br>a#1<br>abc#1<br>abc#2<br></code></pre></td></tr></table></figure><p>å½“åˆ†åˆ«è®¾ç½®Personçš„nameå’Œageå±æ€§æ—¶ï¼Œinfomationçš„å€¼éƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ‰€ä»¥ä¼šæ‰“å°ä¸¤æ¬¡infomationçš„ä¿¡æ¯ã€‚</p></li></ol><h4 id="4-KVOçš„æœ¬è´¨"><a href="#4-KVOçš„æœ¬è´¨" class="headerlink" title="4. KVOçš„æœ¬è´¨"></a>4. KVOçš„æœ¬è´¨</h4><ul><li><p>æœªä½¿ç”¨KVOç›‘å¬çš„å¯¹è±¡</p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202202151622862.png" alt="æœªä½¿ç”¨KVOç›‘å¬çš„å¯¹è±¡" style="zoom:50%;margin-left:10px" /></li><li><p>ä½¿ç”¨KVOç›‘å¬çš„å¯¹è±¡</p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202202151622219.png" alt="ä½¿ç”¨KVOç›‘å¬çš„å¯¹è±¡" style="zoom:50%;margin-left:10px" /></li></ul><p>é€šè¿‡ä¸Šé¢ä¸¤å¹…å›¾ç‰‡æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œå½“æŸä¸ªç±»(<code>Person</code>)çš„å¯¹è±¡ç¬¬ä¸€æ¬¡è¢«è§‚å¯Ÿæ—¶ï¼Œç³»ç»Ÿä¼šåœ¨è¿è¡Œæ—¶åŠ¨æ€çš„åˆ›å»ºå¯¹åº”äºè¯¥ç±»çš„ä¸€ä¸ªæ´¾ç”Ÿç±»ï¼ˆå¦‚ï¼š<code>NSKVONotifying_DelegateDemo.Person</code>ï¼‰ï¼Œåœ¨è¿™ä¸ªæ´¾ç”Ÿç±»ä¸­ï¼Œç³»ç»Ÿä¼šé‡å†™çˆ¶ç±»ä¸­è¢«è§‚å¯Ÿå±æ€§çš„<code>setter</code>æ–¹æ³•ã€‚åœ¨é‡å†™çš„setteræ–¹æ³•ä¸­å®ç°çœŸæ­£çš„é€šçŸ¥æœºåˆ¶ï¼Œç±»ä¼¼ä¸‹é¢çš„ä¼ªä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// _NSSetIntValueAndNotifyæ–¹æ³•çš„ä¼ªä»£ç å®ç°<br>-(void)setAge:(int)age&#123;<br>  //`NSKVONotifying_DelegateDemo.Person`ç±»é‡å†™äº†`setAge`æ–¹æ³•çš„å®ç°ï¼Œå®ƒä¼šè°ƒç”¨`Foundation`æ¡†æ¶ä¸­çš„`_NSSetxxxValueAndNotify`æ–¹æ³•<br>  _NSSetIntValueAndNotify()<br>&#125;<br><br>-(void)_NSSetIntValueAndNotify&#123;<br>  [self willChangeValueForKey:@&quot;age&quot;];<br>  [super setAge:age];<br>  [self didChangeValueForKey:@&quot;age&quot;]ï¼›<br>&#125;<br><br>-(void)didChangeValueForKey:(NSString*)key&#123;<br>  // é€šçŸ¥ç›‘å¬å™¨ï¼ŒæŸå±æ€§å‘ç”Ÿäº†æ”¹å˜<br>  [oberser oberserValueForKeyPath:key ofObject:self change:nil context:nil];<br>&#125;<br><br></code></pre></td></tr></table></figure><p>è¦é€šè¿‡<code>KVO</code>æ¥å®ç°è§‚å¯Ÿè€…æ¨¡å¼ï¼Œå¿…é¡»éµå¾ª<code>KVO</code>çš„å±æ€§è®¾ç½®æ–¹å¼ï¼ˆ<code>KVC</code>æˆ–è€…<code>setter</code>æ–¹æ³•ï¼‰æ¥æ”¹å˜å±æ€§å€¼ï¼Œå¦‚æœä»…æ˜¯ç›´æ¥ä¿®æ”¹å±æ€§å¯¹åº”çš„æˆå‘˜å˜é‡ï¼Œé‚£ä¹ˆæ˜¯æ— æ³•å®ç°<code>KVO</code>çš„ã€‚</p><p>å½“ç³»ç»Ÿåœ¨è¿è¡Œæ—¶åˆ›å»ºæ´¾ç”Ÿç±»çš„åŒæ—¶ï¼Œæ´¾ç”Ÿç±»è¿˜é‡å†™äº†<code>class</code>çš„æ–¹æ³•ï¼Œè®©å¼€å‘è€…ä»¥ä¸ºæ­£åœ¨è°ƒç”¨çš„ç±»è¿˜æ˜¯åŸå§‹ç±»ã€‚ç„¶åç³»ç»Ÿä¼šå°†è¿™ä¸ªå¯¹è±¡çš„isaæŒ‡é’ˆæŒ‡å‘æ–°åˆ›å»ºçš„æ´¾ç”Ÿç±»ï¼Œå› æ­¤è¿™ä¸ªå¯¹è±¡å°±æˆäº†è¯¥æ´¾ç”Ÿç±»çš„å¯¹è±¡ï¼Œå› è€Œå½“å¼€å‘è€…è°ƒç”¨å±æ€§çš„setteræ–¹æ³•æ—¶ï¼Œå®é™…ä¸Šæ˜¯è°ƒç”¨é‡å†™åçš„<code>setter</code>æ–¹æ³•ï¼Œä»è€Œå®ç°äº†é”®å€¼é€šçŸ¥çš„æœºåˆ¶ã€‚æ­¤å¤–ï¼Œæ´¾ç”Ÿç±»è¿˜é‡å†™äº†<code>dealloc</code>æ–¹æ³•æ¥é‡Šæ”¾å†…å­˜èµ„æºã€‚</p><h4 id="5-é—®é¢˜"><a href="#5-é—®é¢˜" class="headerlink" title="5. é—®é¢˜"></a>5. é—®é¢˜</h4><ol><li><p>åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä¼šè§¦å‘KVO?</p><p>KVCæˆ–è€…è°ƒç”¨äº†<code>setter</code>æ–¹æ³•</p></li><li><p>å¦‚ä½•æ‰‹åŠ¨è§¦å‘KVO</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// ä»¥ä¸Šé¢çš„ageå±æ€§ä¸ºä¾‹, æ‰‹åŠ¨è§¦å‘KVO<br>// åœ¨éœ€è¦è§¦å‘KVOçš„åœ°æ–¹æ»´å•Šç”¨<br>[self willChangeValueForKey:@&quot;age&quot;];<br>[self didChangeValueForKey:@&quot;age&quot;]ï¼›<br><br></code></pre></td></tr></table></figure></li></ol><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul><li><a href="">iOSç¨‹åºå‘˜é¢è¯•ç¬”è¯•å®å…¸</a></li><li><a href="">å°é©¬å“¥è§†é¢‘</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>iOS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å¤‡è€ƒ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>iOS_æ¶ˆæ¯ä¼ é€’æ–¹å¼</title>
    <link href="/2022/01/19/iOS/%E5%A4%87%E8%80%83/OC%E8%AF%AD%E8%A8%80%E7%89%B9%E6%80%A7%E7%9B%B8%E5%85%B3/iOS_%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92%E6%96%B9%E5%BC%8F/"/>
    <url>/2022/01/19/iOS/%E5%A4%87%E8%80%83/OC%E8%AF%AD%E8%A8%80%E7%89%B9%E6%80%A7%E7%9B%B8%E5%85%B3/iOS_%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92%E6%96%B9%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>æˆ‘ä»¬é€šå¸¸éƒ½æ˜¯ç”¨ä»€ä¹ˆæ–¹å¼ï¼Œå®ç°iOSä¸åŒç•Œé¢çš„æ¶ˆæ¯ä¼ é€’å‘¢ï¼Ÿç³»ç»Ÿåˆ°åº•ä¸ºæˆ‘ä»¬æä¾›äº†å¤šå°‘ç§æ–¹å¼å‘¢ï¼Ÿæ€€ç€è¿™æ ·çš„æƒ³æ³•ï¼Œåœ¨æ­¤å¯¹å¸¸ç”¨çš„æ¶ˆæ¯ä¼ é€’çš„æ–¹å¼åšäº†ä¸ªç®€å•çš„æ€»ç»“ã€‚</p><h3 id="ä¸€ã€ä»£ç†"><a href="#ä¸€ã€ä»£ç†" class="headerlink" title="ä¸€ã€ä»£ç†"></a>ä¸€ã€ä»£ç†</h3><h4 id="1-ä»£ç†çš„å®šä¹‰ï¼Ÿ"><a href="#1-ä»£ç†çš„å®šä¹‰ï¼Ÿ" class="headerlink" title="1. ä»£ç†çš„å®šä¹‰ï¼Ÿ"></a>1. ä»£ç†çš„å®šä¹‰ï¼Ÿ</h4><p>ä»£ç†æ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œåœ¨iOSå½“ä¸­ä»¥<code>@protocal</code>å½¢å¼ä½“ç°ï¼Œå®ç°æ¶ˆæ¯ä¸€å¯¹ä¸€çš„ä¼ é€’</p><h4 id="2-ä»£ç†çš„å®ç°"><a href="#2-ä»£ç†çš„å®ç°" class="headerlink" title="2. ä»£ç†çš„å®ç°"></a>2. ä»£ç†çš„å®ç°</h4><p>ä»£ç†æœ‰ä¸‰éƒ¨åˆ†ç»„æˆï¼š</p><ul><li><p>åè®®</p><p>å®šä¹‰å±æ€§å’Œæ–¹æ³•</p><p>åè®®æ–¹æ³•æœ‰ä¸¤ä¸ªä¿®é¥°ç¬¦<code>@Required</code>å’Œ<code>@Optional</code>ï¼Œè¢«<code>@Required</code>ä¿®é¥°çš„æ–¹æ³•ï¼Œå¿…é¡»è¦å®ç°ï¼Œè€Œ<code>@Optional</code>ä¿®é¥°çš„æ–¹æ³•å¯ä»¥å®ç°ä¹Ÿå¯ä»¥ä¸å®ç°ã€‚</p></li><li><p>å§”æ‰˜æ–¹</p><p>æŒ‰ç…§åè®®ï¼Œå‘ŠçŸ¥ä»£ç†æ–¹éœ€è¦å®ç°çš„æ–¹æ³•</p></li><li><p>ä»£ç†æ–¹</p><p>éµå®ˆåè®®ï¼Œå®ç°åè®®æ–¹æ³•ï¼ˆæœ‰çš„éœ€è¦å®Œæˆå§”æ‰˜æ–¹éœ€æ±‚çš„åŒæ—¶ï¼Œè¿”å›å¤„ç†ç»“æœï¼‰</p></li></ul><p>å›¾ç¤ºï¼š</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202202151007480.png" alt="ä»£ç†å›¾è§£"></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">import</span> UIKit<br><span class="hljs-comment">// åè®®</span><br><span class="hljs-keyword">@objc</span> <span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">TestViewDelegate</span>:<span class="hljs-title">NSObjectProtocol</span></span>&#123; <br>   <span class="hljs-keyword">@objc</span> <span class="hljs-keyword">optional</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">testViewSelected</span>(<span class="hljs-params">testView</span>: <span class="hljs-type">TestView</span>)</span><br>&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestView</span>: <span class="hljs-title">UIView</span> </span>&#123;<br>    <span class="hljs-keyword">weak</span> <span class="hljs-keyword">var</span> delegate:<span class="hljs-type">TestViewDelegate</span>?<br>    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">touchesBegan</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">touches</span>: <span class="hljs-type">Set</span>&lt;<span class="hljs-type">UITouch</span>&gt;, <span class="hljs-params">with</span> <span class="hljs-params">event</span>: <span class="hljs-type">UIEvent</span>?)</span> &#123;<br>        <span class="hljs-keyword">self</span>.delegate<span class="hljs-operator">?</span>.testViewSelected<span class="hljs-operator">?</span>(testView: <span class="hljs-keyword">self</span>)<br>    &#125;<br>&#125;<br><span class="hljs-operator">---------------------------------------------------------------------------------</span><br><span class="hljs-keyword">import</span> UIKit<br><span class="hljs-comment">// éµå®ˆåè®®</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ViewController</span>: <span class="hljs-title">UIViewController</span>,<span class="hljs-title">TestViewDelegate</span> </span>&#123;<br>    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">viewDidLoad</span>()</span> &#123;<br>        <span class="hljs-keyword">super</span>.viewDidLoad()<br>        <span class="hljs-keyword">let</span> testV <span class="hljs-operator">=</span> <span class="hljs-type">TestView</span>.<span class="hljs-keyword">init</span>(frame: <span class="hljs-type">UIScreen</span>.main.bounds)<br>        testV.backgroundColor <span class="hljs-operator">=</span> <span class="hljs-type">UIColor</span>.red<br>        <span class="hljs-comment">// è®¾ç½®ä»£ç†</span><br>        testV.delegate <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span><br>        <span class="hljs-keyword">self</span>.view.addSubview(testV)<br>    &#125;<br>    <span class="hljs-comment">//å®ç°åè®®æ–¹æ³•</span><br>    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">testViewSelected</span>(<span class="hljs-params">testView</span>: <span class="hljs-type">TestView</span>)</span> &#123;<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å®ç°åè®®&quot;</span>)<br>    &#125;<br>&#125;                   <br></code></pre></td></tr></table></figure><h4 id="3-ä¸ºä»€ä¹ˆè®¾ç½®ä»£ç†å±æ€§éœ€è¦ç”¨weakï¼Ÿ"><a href="#3-ä¸ºä»€ä¹ˆè®¾ç½®ä»£ç†å±æ€§éœ€è¦ç”¨weakï¼Ÿ" class="headerlink" title="3. ä¸ºä»€ä¹ˆè®¾ç½®ä»£ç†å±æ€§éœ€è¦ç”¨weakï¼Ÿ"></a>3. ä¸ºä»€ä¹ˆè®¾ç½®ä»£ç†å±æ€§éœ€è¦ç”¨weakï¼Ÿ</h4><p>ä»¥åœ¨æ§åˆ¶å™¨ä¸­ä½¿ç”¨<code>tableview</code>ä¸ºä¾‹ï¼Œæˆ‘ä»¬åœ¨æ§åˆ¶å™¨ä¸­é€šè¿‡<code>alloc</code>ã€<code>new</code>ç­‰æ–¹å¼åˆ›å»º<code>tableview</code>è§†å›¾å¯¹è±¡çš„æ—¶å€™ï¼Œå½“å‰æ§åˆ¶å™¨ä¼šå¼ºå¼•ç”¨ç€<code>tableview</code>ã€‚å¦‚æœæˆ‘ä»¬ä¿®é¥°<code>tableview</code>çš„ä»£ç†ç”¨çš„æ˜¯<code>strong</code>ï¼Œåœ¨è®¾ç½®ä»£ç†çš„æ—¶å€™ï¼Œ ä»£ç†å¯¹è±¡å¾€å¾€ä¼šè®¾ç½®æˆ<code>self</code>å³å½“å‰æ§åˆ¶å™¨ï¼Œå¯¼è‡´<code>tableview</code>åˆå¼ºå¼•ç”¨è¿™æ§åˆ¶å™¨ã€‚è¿™å°±é€ æˆäº†å¾ªç¯å¼•ç”¨ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs swift">tableView.delegate <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span><br><span class="hljs-keyword">self</span> -&gt; tableView -&gt; delegate -&gt; <span class="hljs-keyword">self</span><br></code></pre></td></tr></table></figure><p>å¾ªç¯å¼•ç”¨çš„å±å®³ï¼š</p><ul><li>ä¼šä½¿å†…å­˜æ¶ˆè€—è¿‡é«˜ï¼Œå¯¼è‡´å†…å­˜æ³„éœ²</li><li>æ€§èƒ½å˜å·®</li><li>å¯èƒ½ä¼šå‡ºç°é—ªé€€</li></ul><h4 id="4-ä»£ç†çš„åŸç†"><a href="#4-ä»£ç†çš„åŸç†" class="headerlink" title="4. ä»£ç†çš„åŸç†"></a>4. ä»£ç†çš„åŸç†</h4><p><font color=orange># warning åé¢è¡¥å……</font></p><h3 id="äºŒã€é€šçŸ¥ï¼ˆNSNotificationï¼‰"><a href="#äºŒã€é€šçŸ¥ï¼ˆNSNotificationï¼‰" class="headerlink" title="äºŒã€é€šçŸ¥ï¼ˆNSNotificationï¼‰"></a>äºŒã€é€šçŸ¥ï¼ˆNSNotificationï¼‰</h3><h4 id="1-ä»€ä¹ˆæ˜¯é€šçŸ¥"><a href="#1-ä»€ä¹ˆæ˜¯é€šçŸ¥" class="headerlink" title="1. ä»€ä¹ˆæ˜¯é€šçŸ¥?"></a>1. ä»€ä¹ˆæ˜¯é€šçŸ¥?</h4><ol><li>é€šçŸ¥æ˜¯ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼å®ç°çš„ç”¨äºè·¨å±‚ä¼ é€’æ¶ˆæ¯çš„æœºåˆ¶</li><li>ä¼ é€’æ–¹å¼ä¸ºä¸€å¯¹å¤š</li></ol><h4 id="2-å¦‚ä½•å®ç°é€šçŸ¥æœºåˆ¶ï¼Ÿ"><a href="#2-å¦‚ä½•å®ç°é€šçŸ¥æœºåˆ¶ï¼Ÿ" class="headerlink" title="2. å¦‚ä½•å®ç°é€šçŸ¥æœºåˆ¶ï¼Ÿ"></a>2. å¦‚ä½•å®ç°é€šçŸ¥æœºåˆ¶ï¼Ÿ</h4><p>é€šçŸ¥ä¸­å¿ƒå¯èƒ½ä¼šç»´æŠ¤ä¸€ä¸ª<code>map</code>è¡¨ï¼Œ<code>key</code>ä¸º<code>notificationName</code>  <code>value</code>ä¸º<code>observers_list</code>ï¼Œ<code>observers_list</code> åŒ…å«é€šçŸ¥æ¥æ”¶çš„è§‚å¯Ÿè€…ä»¥åŠè§‚å¯Ÿè€…çš„è°ƒç”¨æ–¹æ³•</p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202202141642268.png" alt="é€šçŸ¥æœºåˆ¶" style="margin-left: 10px; zoom: 67%;" /><h4 id="3-é€šçŸ¥æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ï¼Ÿ"><a href="#3-é€šçŸ¥æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ï¼Ÿ" class="headerlink" title="3. é€šçŸ¥æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ï¼Ÿ"></a>3. é€šçŸ¥æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ï¼Ÿ</h4><p><code>NSNotification</code>é»˜è®¤åœ¨ä¸»çº¿ç¨‹ä¸­é€šçŸ¥æ˜¯<font color=Orange>åŒæ­¥çš„</font>ï¼Œå½“é€šçŸ¥äº§ç”Ÿçš„æ—¶å€™ï¼Œé€šçŸ¥ä¸­å¿ƒä¼šä¸€ç›´ç­‰åˆ°æ‰€æœ‰çš„è§‚å¯Ÿè€…éƒ½æ”¶åˆ°å¹¶å¤„ç†é€šçŸ¥ç»“æŸï¼Œç„¶åæ‰ä¼šè¿”å›å‘é€é€šçŸ¥çš„åœ°æ–¹ç»§ç»­æ‰§è¡Œåé¢çš„ä»£ç ã€‚ä½†æ˜¯å¯ä»¥å°†é€šçŸ¥çš„å‘é€æˆ–è€…å°†é€šçŸ¥çš„å¤„ç†æ–¹æ³•æ”¾å…¥å­çº¿ç¨‹ä¸­æ¥é¿å…çº¿ç¨‹é˜»å¡ã€‚</p><p><strong>éªŒè¯ï¼š</strong></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-comment">// è‡ªå®šä¹‰æ¶ˆæ¯åç§°</span><br><span class="hljs-keyword">let</span> notiName <span class="hljs-operator">=</span> <span class="hljs-string">&quot;postNoti&quot;</span><br><span class="hljs-comment">// å‘é€é€šçŸ¥</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å³å°†å‘é€é€šçŸ¥&quot;</span>)<br><span class="hljs-type">NotificationCenter</span>.default.post(name: <span class="hljs-type">NSNotification</span>.<span class="hljs-type">Name</span>(notiName), object: <span class="hljs-literal">nil</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å‘é€é€šçŸ¥åæ‰§è¡Œ&quot;</span>)<br><br><br><span class="hljs-comment">// æ³¨å†Œé€šçŸ¥çš„è§‚å¯Ÿè€…</span><br><span class="hljs-type">NotificationCenter</span>.default.addObserver(<span class="hljs-keyword">self</span>, selector: #selector(reciveNoti), name: <span class="hljs-type">NSNotification</span>.<span class="hljs-type">Name</span>(notiName), object: <span class="hljs-literal">nil</span>)<br><span class="hljs-comment">// æ”¶åˆ°é€šçŸ¥</span><br><span class="hljs-keyword">@objc</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">reciveNoti</span>()</span>&#123;<br>    sleep(<span class="hljs-number">10</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ”¶åˆ°é€šçŸ¥åæ‰§è¡Œ&quot;</span>)<br>&#125;<br><br><span class="hljs-comment">// æ‰§è¡Œç»“æœ</span><br>å³å°†å‘é€é€šçŸ¥<br>æ”¶åˆ°é€šçŸ¥åæ‰§è¡Œ<br>å‘é€é€šçŸ¥åæ‰§è¡Œ<br></code></pre></td></tr></table></figure><p><strong>è§£å†³çº¿ç¨‹é˜»å¡ï¼š</strong></p><ol><li><p>å°†é€šçŸ¥å‘é€æ”¾å…¥å­çº¿ç¨‹</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-comment">// å‘é€é€šçŸ¥</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å³å°†å‘é€é€šçŸ¥&quot;</span>)<br><span class="hljs-type">DispatchQueue</span>.global().async &#123;<br><span class="hljs-type">NotificationCenter</span>.default.post(name: <span class="hljs-type">NSNotification</span>.<span class="hljs-type">Name</span>(notiName), object: <span class="hljs-literal">nil</span>)<br>&#125;<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å‘é€é€šçŸ¥åæ‰§è¡Œ&quot;</span>)<br><br><span class="hljs-comment">// æ‰§è¡Œç»“æœ</span><br>å³å°†å‘é€é€šçŸ¥<br>å‘é€é€šçŸ¥åæ‰§è¡Œ<br>æ”¶åˆ°é€šçŸ¥åæ‰§è¡Œ<br></code></pre></td></tr></table></figure></li><li><p>å°†é€šçŸ¥å¤„ç†æ–¹æ³•æ”¾å…¥å­çº¿ç¨‹</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-comment">// æ”¶åˆ°é€šçŸ¥</span><br><span class="hljs-keyword">@objc</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">reciveNoti</span>()</span>&#123;<br><span class="hljs-type">DispatchQueue</span>.global().async &#123;<br>sleep(<span class="hljs-number">10</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ”¶åˆ°é€šçŸ¥åæ‰§è¡Œ&quot;</span>)<br>    &#125;<br>&#125;<br><span class="hljs-comment">// æ‰§è¡Œç»“æœ</span><br>å³å°†å‘é€é€šçŸ¥<br>å‘é€é€šçŸ¥åæ‰§è¡Œ<br>æ”¶åˆ°é€šçŸ¥åæ‰§è¡Œ<br></code></pre></td></tr></table></figure></li><li><p>å°†é€šçŸ¥å‘é€æ”¾åˆ°é€šçŸ¥å¼‚æ­¥ç¼“å†²é˜Ÿåˆ—ä¸­</p><p><code>NSNotificationQueue</code>æ˜¯ä¸€ä¸ªé€šçŸ¥ç¼“å†²é˜Ÿåˆ—ï¼Œé€šå¸¸ä»¥FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰çš„è§„åˆ™ç»´æŠ¤é€šçŸ¥é˜Ÿåˆ—çš„å‘é€ã€‚å‘ç¼“å†²é˜Ÿåˆ—æ·»åŠ é€šçŸ¥æœ‰ä¸‰ä¸ªæšä¸¾ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs swift"> <span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">PostingStyle</span> : <span class="hljs-title">UInt</span> </span>&#123;<br>   <span class="hljs-keyword">case</span> whenIdle <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-comment">// ç©ºé—²æ—¶å‘é€</span><br>   <span class="hljs-keyword">case</span> asap <span class="hljs-operator">=</span> <span class="hljs-number">2</span> <span class="hljs-comment">// å°½å¿«å‘é€</span><br>   <span class="hljs-keyword">case</span> now <span class="hljs-operator">=</span> <span class="hljs-number">3</span>  <span class="hljs-comment">// ç«‹å³å‘é€</span><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs swift"><br><span class="hljs-comment">// å‘é€é€šçŸ¥</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å³å°†å‘é€é€šçŸ¥&quot;</span>)<br><span class="hljs-keyword">let</span> noti <span class="hljs-operator">=</span> <span class="hljs-type">Notification</span>.<span class="hljs-keyword">init</span>(name: <span class="hljs-type">Notification</span>.<span class="hljs-type">Name</span>(notiName), object: <span class="hljs-literal">nil</span>, userInfo: [<span class="hljs-string">&quot;key&quot;</span>:<span class="hljs-string">&quot;value&quot;</span>])<br><span class="hljs-type">NotificationQueue</span>.default.enqueue(noti, postingStyle: .asap)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å‘é€é€šçŸ¥åæ‰§è¡Œ&quot;</span>)<br><br><span class="hljs-comment">// æ‰§è¡Œç»“æœ</span><br>å³å°†å‘é€é€šçŸ¥<br>å‘é€é€šçŸ¥åæ‰§è¡Œ<br>æ”¶åˆ°é€šçŸ¥åæ‰§è¡Œ<br></code></pre></td></tr></table></figure></li></ol><h4 id="4-é€šçŸ¥å’Œä»£ç†çš„åŒºåˆ«"><a href="#4-é€šçŸ¥å’Œä»£ç†çš„åŒºåˆ«" class="headerlink" title="4. é€šçŸ¥å’Œä»£ç†çš„åŒºåˆ«"></a>4. é€šçŸ¥å’Œä»£ç†çš„åŒºåˆ«</h4><ul><li>ä¸»è¦åŒºåˆ«æ˜¯ä»£ç†ä¼ é€’æ¶ˆæ¯æ˜¯ä¸€å¯¹ä¸€ï¼Œé€šçŸ¥æ˜¯ä¸€å¯¹å¤š</li><li>ä»£ç†æ¨¡å¼ä¸­ï¼Œreciverï¼ˆæ¥æ”¶è€…ï¼‰å¯ä»¥è¿”å›å€¼ç»™senderï¼ˆå‘é€è€…ï¼‰ï¼Œå®ç°ä¸€ç§å›è°ƒï¼Œè€Œè§‚å¯Ÿè€…æ¨¡å¼ä¸å¯ä»¥</li></ul><h3 id="ä¸‰ã€KVO"><a href="#ä¸‰ã€KVO" class="headerlink" title="ä¸‰ã€KVO"></a>ä¸‰ã€KVO</h3><p>â€‹    å‚è€ƒæ–‡ç« <a href="">iOS_KVCä¸KVO</a></p><h3 id="å››ã€Block"><a href="#å››ã€Block" class="headerlink" title="å››ã€Block"></a>å››ã€Block</h3><h4 id="1-ä»€ä¹ˆæ˜¯Blockï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯Blockï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆæ˜¯Blockï¼Ÿ"></a>1. ä»€ä¹ˆæ˜¯Blockï¼Ÿ</h4><p>Blockæ˜¯å°†å‡½æ•°åŠå…¶æ‰§è¡Œä¸Šä¸‹æ–‡å°è£…èµ·æ¥çš„å¯¹è±¡ã€‚</p><h4 id="2-Blockæœ‰å“ªå‡ ç§å®šä¹‰çš„æ–¹å¼ï¼Ÿ"><a href="#2-Blockæœ‰å“ªå‡ ç§å®šä¹‰çš„æ–¹å¼ï¼Ÿ" class="headerlink" title="2. Blockæœ‰å“ªå‡ ç§å®šä¹‰çš„æ–¹å¼ï¼Ÿ"></a>2. Blockæœ‰å“ªå‡ ç§å®šä¹‰çš„æ–¹å¼ï¼Ÿ</h4><p>åœ¨Objective-Cä¸­ï¼Œ<code>block</code>å®šä¹‰åŒ…å«äº†<code>block</code>çš„ç±»å‹å£°æ˜å’Œå®ç°ï¼ŒåŸºæœ¬å½¢å¼å¦‚ä¸‹ï¼š</p><p><font color=orange >è¿”å›å€¼ç±»å‹(^blockåç§°)(å‚æ•°ç±»å‹)=^(å‚æ•°ç±»å‹å’Œå‚æ•°å){}</font></p><p>å…¶ä¸­ï¼Œè¿”å›å€¼ç±»å‹å’Œå‚æ•°éƒ½å¯ä»¥ä¸ºç©ºã€‚å¦‚æœæœ‰å‚æ•°ï¼Œé‚£ä¹ˆåœ¨å®šä¹‰<code>block</code>çš„æ—¶å€™ï¼Œå¿…é¡»æ ‡æ˜å‚æ•°çš„ç±»å‹å’Œå‚æ•°åã€‚æ‰€ä»¥ï¼Œ<code>block</code>å¤§è‡´æœ‰ä¸‰ç§å®šä¹‰æ–¹å¼ã€‚</p><ul><li><p>æ²¡æœ‰è¿”å›å€¼ï¼Œæ²¡æœ‰å‚æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">void (^myBlock)(void) = ^&#123;<br>    // ä»£ç <br>&#125;;<br></code></pre></td></tr></table></figure></li><li><p>æœ‰è¿”å›å€¼ï¼Œæ²¡æœ‰å‚æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">NSString* (^myBlock)(void) = ^&#123;<br>    // ä»£ç <br>    return @&quot;è¿”å›å€¼&quot;;<br>&#125;;<br></code></pre></td></tr></table></figure></li><li><p>æœ‰è¿”å›å€¼ï¼Œæœ‰å‚æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">NSInteger (^myBlock)(NSInteger) = ^(NSInteger a)&#123;<br>    // ä»£ç <br>    return a+1;<br>&#125;;<br></code></pre></td></tr></table></figure><p>åƒåœ¨Objective-Cä¸­å­—ç¬¦ä¸²å¯¹è±¡å±äº<code>NSString</code>ç±»å‹ä¸€æ ·ï¼Œ<code>blcok</code>ä¹Ÿæœ‰å±äºè‡ªå·±çš„ç±»å‹ï¼Œ<code>block</code>ç±»å‹çš„æ ¼å¼å°±æ˜¯ï¼š</p><p><font color=orange>è¿”å›å€¼ç±»å‹(^)å‚æ•°ç±»å‹</font></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸Šé¢ç¬¬ä¸€ç§å®šä¹‰æ–¹å¼çš„blockç±»å‹å°±æ˜¯<code>void(^)(void)</code>ï¼Œ<code>myBlock</code>ä¸æ˜¯å˜é‡åï¼Œè€Œæ˜¯è¿™ç§<code>block</code>ç±»å‹çš„åˆ«åã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>typedef</code>å…³é”®å­—å®šä¹‰blockç±»å‹ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">typedef void (^MyBlock)(void);<br>@interface ViewController ()<br>@property(nonatomic,strong)MyBlock myblock;<br>@end<br></code></pre></td></tr></table></figure></li></ul><h4 id="3-åœ¨ARCç¯å¢ƒä¸‹ï¼Œ-æ˜¯å¦éœ€è¦ä½¿ç”¨copyå…³é”®å­—æ¥ä¿®é¥°blockï¼Ÿ"><a href="#3-åœ¨ARCç¯å¢ƒä¸‹ï¼Œ-æ˜¯å¦éœ€è¦ä½¿ç”¨copyå…³é”®å­—æ¥ä¿®é¥°blockï¼Ÿ" class="headerlink" title="3. åœ¨ARCç¯å¢ƒä¸‹ï¼Œ æ˜¯å¦éœ€è¦ä½¿ç”¨copyå…³é”®å­—æ¥ä¿®é¥°blockï¼Ÿ"></a>3. åœ¨ARCç¯å¢ƒä¸‹ï¼Œ æ˜¯å¦éœ€è¦ä½¿ç”¨copyå…³é”®å­—æ¥ä¿®é¥°blockï¼Ÿ</h4><p>blockå…¶å®åŒ…å«ä¸¤ä¸ªç»„æˆéƒ¨åˆ†ï¼š</p><ul><li><code>block</code>æ‰€æ‰§è¡Œçš„ä»£ç ï¼Œè¿™ä¸€éƒ¨åˆ†åœ¨ç¼–è¯‘çš„æ—¶å€™å·²ç»ç¡®å®š</li><li><code>block</code>æ‰§è¡Œæ—¶æ‰€éœ€è¦çš„å¤–éƒ¨å˜é‡å€¼çš„æ•°æ®ç»“æ„</li></ul><p>æ ¹æ®blockåœ¨å†…å­˜ä¸­çš„ä½ç½®ï¼Œç³»ç»Ÿå°†blockåˆ†ä¸º3ç±»ï¼š</p><ol><li><p>NSGlobalBlcok</p><p>è¯¥ç±»å‹çš„<code>block</code>ç±»ä¼¼å‡½æ•°ï¼Œå†…å­˜åœ°å€ä½äºå†…å­˜å…¨å±€åŒºã€‚<u>åªè¦blockæ²¡æœ‰å¯¹ä½œç”¨åŸŸä¸­å±€éƒ¨å˜é‡è¿›è¡Œå¼•ç”¨</u>ï¼Œæ­¤<code>block</code>ä¼šè¢«ç³»ç»Ÿè®¾ç½®ä¸ºè¯¥ç±»ã€‚å¯¹äº<code>NSGlobalBlock</code>ç±»å‹çš„<code>block</code>æ— éœ€åšæ›´å¤šçš„å¤„ç†ï¼Œå³ä½¿ä½¿ç”¨<code>copy</code>å…³é”®å­—ä¿®é¥°ï¼Œç³»ç»Ÿä¹Ÿä¸ä¼šæ”¹å˜<code>block</code>çš„å†…å­˜åœ°å€ï¼Œæ“ä½œæ— æ•ˆã€‚</p></li><li><p>NSStackBlock</p><p>è¯¥ç±»å‹çš„<code>block</code>å†…å­˜ä½äºæ ˆï¼Œå…¶ç”Ÿå‘½å‘¨æœŸç”±å‡½æ•°å†³å®šï¼Œå‡½æ•°è¿”å›å<code>block</code>å°†æ— æ•ˆã€‚</p><p><code>MRC</code>ç¯å¢ƒä¸‹ï¼Œè‹¥<code>block</code>å†…éƒ¨å¼•ç”¨äº†å±€éƒ¨å˜é‡ï¼Œæ­¤<code>block</code>å°±ä¼šè¢«ç³»ç»Ÿè®¾ç½®ä¸ºè¯¥ç±»å‹ã€‚å¯¹äº<code>NSStackBlock</code>ç±»å‹çš„<code>block</code>ï¼Œä½¿ç”¨<code>retain</code>å’Œ<code>release</code>æ“ä½œéƒ½æ˜¯æ— æ•ˆçš„ï¼Œå¿…é¡»è°ƒç”¨<code>Block_copy</code>()æ–¹æ³•ï¼Œæˆ–è€…ä½¿ç”¨<code>copy</code>ä¿®é¥°ï¼Œå°†<code>block</code>çš„å†…å­˜åœ°å€ä»æ ˆè½¬ç§»åˆ°å †ï¼Œæ­¤æ—¶çš„<code>block</code>å°±ä¼šè½¬å˜ä¸º<code>NSMallocBlock</code>ç±»å‹ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç›´ä½¿ç”¨<code>copy</code>ä¿®é¥°<code>block</code>çš„åŸå› ã€‚</p><p>åœ¨<code>ARC</code>ç¯å¢ƒä¸‹ï¼Œè‹¥<code>block</code>å†…éƒ¨å¼•ç”¨äº†å±€éƒ¨å˜é‡ï¼Œç³»ç»Ÿä¼šé»˜è®¤ä½¿ç”¨<code>copy</code>å¯¹blockè¿›è¡Œä¿®é¥°ï¼Œä½¿å…¶å˜æˆ<code>NSMallocBlock</code>ç±»å‹ï¼Œæ‰€ä»¥<u>åœ¨ARCç¯å¢ƒä¸‹ï¼Œä¸éœ€è¦æ‰‹åŠ¨ä½¿ç”¨copyå…³é”®å­—æ¥ä¿®é¥°blockã€‚</u></p></li><li><p>NSMallocBlock</p><p>å½“å¯¹<code>NSStackBlock</code>ç±»å‹çš„<code>block</code>è¿›è¡Œ<code>copy</code>æ“ä½œåï¼Œ<code>block</code>ä¼šè¢«è½¬åŒ–ä¸ºæ­¤ç±»å‹ã€‚åœ¨<code>MRC</code>ç¯å¢ƒä¸‹ï¼Œå¯ä»¥ä½¿ç”¨<code>retain</code>ã€<code>release</code>ç­‰æ–¹æ³•æ‰‹åŠ¨ç®¡ç†æ­¤ç±»å‹çš„ç”Ÿå‘½å‘¨æœŸã€‚åœ¨<code>ARC</code>ç¯å¢ƒä¸‹ï¼Œç³»ç»Ÿä¼šå¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨ç®¡ç†æ­¤ç±»å‹<code>block</code>çš„ç”Ÿå‘½ä¸­å‘¨æœŸã€‚</p></li></ol><h4 id="4-åœ¨blockå†…éƒ¨å¦‚ä½•ä¿®æ”¹blockå¤–éƒ¨çš„å˜é‡ï¼Ÿ"><a href="#4-åœ¨blockå†…éƒ¨å¦‚ä½•ä¿®æ”¹blockå¤–éƒ¨çš„å˜é‡ï¼Ÿ" class="headerlink" title="4. åœ¨blockå†…éƒ¨å¦‚ä½•ä¿®æ”¹blockå¤–éƒ¨çš„å˜é‡ï¼Ÿ"></a>4. åœ¨blockå†…éƒ¨å¦‚ä½•ä¿®æ”¹blockå¤–éƒ¨çš„å˜é‡ï¼Ÿ</h4><p><code>block</code>å†…éƒ¨ä¿®æ”¹<code>block</code>å¤–éƒ¨å±€éƒ¨å˜é‡æ—¶ï¼Œä¼šæç¤ºå¦‚ä¸‹é”™è¯¯ï¼š</p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202202171715864.png" alt="blockå†…éƒ¨ä¿®æ”¹å¤–éƒ¨å±€éƒ¨å˜é‡" style="zoom: 33%; margin-left: 10px;" /><p>æ­£ç¡®çš„ä¿®æ”¹æ–¹æ³•ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">__block NSInteger a = 1;<br>void (^myBlock)(NSInteger) = ^(NSInteger b)&#123;<br>    // ä»£ç <br>    a = 2;<br>    NSInteger sum = a+b;<br>    NSLog(@&quot;sum=%ld&quot;,sum);<br>&#125;;<br>myBlock(1);<br></code></pre></td></tr></table></figure><p>å½“å¤–éƒ¨å˜é‡æ²¡æœ‰ä½¿ç”¨<code>__block</code>ä¿®é¥°æ—¶ï¼Œ<code>block</code>åœ¨æˆªè·å¤–éƒ¨çš„è‡ªåŠ¨å˜é‡æ—¶ä¼šåœ¨å†…éƒ¨æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„å˜é‡<code>a1</code>æ¥ä¿å­˜æ‰€æˆªè·çš„å¤–éƒ¨å˜é‡çš„ç¬æ—¶å€¼ï¼Œä¹‹åå†<code>block</code>ä»£ç ä¸­ä¿®æ”¹çš„å€¼æ˜¯æˆå‘˜å˜é‡<code>a1</code>çš„å€¼ã€‚ä¼ªä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">int a = 1;<br>void block()&#123;<br>  int a1 = a;<br>  a1 += 1;<br>&#125;<br></code></pre></td></tr></table></figure><p>å½“å¤–éƒ¨ä½¿ç”¨<code>__block</code>ä¿®é¥°æ—¶ï¼Œæ­¤æ—¶çš„<code>block</code>ä¿å­˜äº†å¯¹å¤–éƒ¨å˜é‡çš„æŒ‡é’ˆå¼•ç”¨ï¼Œå› æ­¤å¯¹æŒ‡é’ˆå˜é‡çš„ä¿®æ”¹ä¼šç›´æ¥å½±å“å¤–éƒ¨å˜é‡çš„å€¼ã€‚ä¼ªä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">__block int a = 1;<br>void block()&#123;<br>  int *ptr = &amp;a;<br>  *ptr += 1;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šæ­¤å¤„è®¨è®ºçš„æ˜¯è‡ªåŠ¨å˜é‡ï¼Œè€Œé™æ€å˜é‡ç”±äºé»˜è®¤ä¼ ç»™blockçš„å°±æ˜¯åœ°å€å€¼ï¼Œæ‰€ä»¥æ˜¯å¯ä»¥ç›´æ¥ä¿®æ”¹çš„ã€‚å¦å¤–ï¼Œå…¨å±€å˜é‡å’Œé™æ€å…¨å±€å˜é‡ç”±äºä½œç”¨åŸŸå¾ˆå¹¿ï¼Œä¹Ÿæ˜¯å¯ä»¥åœ¨blockä¸­ç›´æ¥è¢«ä¿®æ”¹çš„ã€‚</p></blockquote><h4 id="5-blockä¸­ä½¿ç”¨selfå…³é”®å­—æ˜¯å¦ä¸€å®šä¼šå¯¼è‡´å¾ªç¯å¼•ç”¨"><a href="#5-blockä¸­ä½¿ç”¨selfå…³é”®å­—æ˜¯å¦ä¸€å®šä¼šå¯¼è‡´å¾ªç¯å¼•ç”¨" class="headerlink" title="5. blockä¸­ä½¿ç”¨selfå…³é”®å­—æ˜¯å¦ä¸€å®šä¼šå¯¼è‡´å¾ªç¯å¼•ç”¨?"></a>5. blockä¸­ä½¿ç”¨selfå…³é”®å­—æ˜¯å¦ä¸€å®šä¼šå¯¼è‡´å¾ªç¯å¼•ç”¨?</h4><p>åœ¨<code>block</code> ä¸­ä½¿ç”¨<code>self</code>å…³é”®å­—å¹¶ä¸æ€»ä¼šå¼•èµ·å¾ªç¯å¼•ç”¨ã€‚äº‹å®ä¸Šåªæœ‰<code>block</code>å’Œ<code>self</code>ç›¸äº’æŒæœ‰æ—¶ï¼Œæ‰ä¼šå¯¼è‡´å¾ªç¯å¼•ç”¨ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">typedef void (^block)(void);<br>@property(nonatomic,strong)block myblock;<br>@property(nonatomic,copy)NSString *name;<br><br>self.myblock = ^&#123;<br>  // ç”±äºblockä¼šå¯¹blockä¸­çš„å¯¹è±¡è¿›è¡ŒæŒæœ‰æ“ä½œï¼Œå°±ç›¸å½“äºæŒæœ‰äº†å…¶ä¸­çš„å¯¹è±¡ï¼Œæ­¤æ—¶blockä¸­çš„å¯¹è±¡åˆæŒæœ‰äº†è¯¥block,é‚£ä¹ˆå°±ä¼šé€ æˆå¾ªç¯å¼•ç”¨<br>    NSString *myName = self.name;<br>    NSLog(@&quot;%@&quot;,myName);<br>&#125;;<br><br></code></pre></td></tr></table></figure><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œä¸»è¦ä½¿ç”¨å¼±å¼•ç”¨çš„æ–¹æ³•æ¥é¿å…å¾ªç¯å¼•ç”¨çš„äº§ç”Ÿã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">__weak typeof(self) weakSelf = self;<br>self.myblock = ^&#123;<br>     NSString *myName = weakSelf.name;<br>     NSLog(@&quot;%@&quot;,myName);<br>&#125;;<br></code></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ä¸ä¼šé€ æˆå¾ªç¯å¼•ç”¨çš„å‡ ç§æƒ…å†µï¼š</p><ol><li>å¤§éƒ¨åˆ†GCDæ–¹æ³•</li><li>blockä½œä¸ºä¸´æ—¶å˜é‡</li><li>blockæ‰§è¡Œè¿‡ç¨‹ä¸­selfå¯¹è±¡è¢«é‡Šæ”¾ã€‚</li></ol><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul><li><p><a href="">iOSç¨‹åºé¢è¯•ç¬”è¯•å®å…¸</a></p></li><li><p><a href="https://juejin.cn/post/6844904150359080967">IOS Delegateä½¿ç”¨åŠåŸç†å®ç°</a></p></li></ul>]]></content>
    
    
    <categories>
      
      <category>iOS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å¤‡è€ƒ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>iOS_Categoryå’ŒExtension</title>
    <link href="/2022/01/19/iOS/%E5%A4%87%E8%80%83/OC%E8%AF%AD%E8%A8%80%E7%89%B9%E6%80%A7%E7%9B%B8%E5%85%B3/iOS-Category%E5%92%8CExtension/"/>
    <url>/2022/01/19/iOS/%E5%A4%87%E8%80%83/OC%E8%AF%AD%E8%A8%80%E7%89%B9%E6%80%A7%E7%9B%B8%E5%85%B3/iOS-Category%E5%92%8CExtension/</url>
    
    <content type="html"><![CDATA[<h3 id="ä¸€-Categoryï¼ˆåˆ†ç±»ï¼‰"><a href="#ä¸€-Categoryï¼ˆåˆ†ç±»ï¼‰" class="headerlink" title="ä¸€. Categoryï¼ˆåˆ†ç±»ï¼‰"></a>ä¸€. Categoryï¼ˆåˆ†ç±»ï¼‰</h3><h4 id="1-Categoryå¯ä»¥æ·»åŠ å“ªäº›å†…å®¹ï¼Ÿ"><a href="#1-Categoryå¯ä»¥æ·»åŠ å“ªäº›å†…å®¹ï¼Ÿ" class="headerlink" title="1. Categoryå¯ä»¥æ·»åŠ å“ªäº›å†…å®¹ï¼Ÿ"></a>1. Categoryå¯ä»¥æ·»åŠ å“ªäº›å†…å®¹ï¼Ÿ</h4><ol><li>å®ä¾‹æ–¹æ³•</li><li>ç±»æ–¹æ³•</li><li>åè®®</li><li>å±æ€§ï¼ˆåªæœ‰<code>setter</code>å’Œ<code>getter</code>æ–¹æ³•çš„å£°æ˜ï¼Œæ²¡æœ‰å®ç°ï¼Œæ²¡æœ‰æˆå‘˜å˜é‡ï¼‰</li></ol><h4 id="2-Categoryå®ç°åŸç†"><a href="#2-Categoryå®ç°åŸç†" class="headerlink" title="2. Categoryå®ç°åŸç†"></a>2. Categoryå®ç°åŸç†</h4><p>Categoryçš„åº•å±‚ç»“æ„ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">struct category_t &#123;<br>       const char *name;<br>       classref_t cls;<br>       struct method_list_t *instanceMethods;<br>       struct method_list_t *classMethods;<br>       struct protocol_list_t *protocols;<br>       struct property_list_t *instanceProperties;<br>       // Fields below this point are not always present on disk<br>       struct property_list_t *_classsProperties;<br>        <br>       method_list *methodsForMeta(bool isMeta)&#123;<br>           if (isMeta) return classMethods;<br>           else return instanceMethods;<br>       &#125;<br>   &#125;<br>   property_list_t *propertiesForMeta(bool isMeta, struct header_info *hi);<br></code></pre></td></tr></table></figure><p>å¯¹è±¡æ–¹æ³•åŠç±»æ–¹æ³•è°ƒç”¨çš„æœ¬è´¨:</p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202202181155272.png" alt="isaæŒ‡é’ˆ" style="zoom:110%;margin-left:10px" /><p>é‚£ä¹ˆ<code>category_t</code>ç»“æ„ä½“æ˜¯ä»€ä¹ˆæ—¶å€™æ”¾åˆ°<code>class</code>é‡Œé¢çš„å‘¢? åœ¨objcè¿è¡Œæ—¶çš„æºç ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç³»ç»Ÿä¸ºæˆ‘ä»¬åšäº†ä»¥ä¸‹æ“ä½œï¼š</p><ol><li>é€šè¿‡runtimeåŠ è½½æŸä¸ªç±»çš„æ‰€æœ‰categoryæ•°æ®</li><li>æŠŠæ‰€æœ‰categoryçš„æ–¹æ³•ã€å±æ€§ã€åè®®æ•°æ®ï¼Œåˆ†åˆ«åˆå¹¶åˆ°ä¸€ä¸ªæ–°çš„ç”¨äºå­˜å‚¨æ–¹æ³•ã€å±æ€§ã€åè®®çš„å¤§æ•°ç»„ä¸­ï¼ˆåé¢å‚ä¸ç¼–è¯‘çš„categoryæ•°æ®ï¼Œä¼šåœ¨æ•°ç»„å‰é¢ï¼‰</li><li>å°†åˆå¹¶åçš„æ•°æ®ï¼ˆæ–¹æ³•ã€å±æ€§ã€åè®®ï¼‰ï¼Œåˆ†åˆ«æ’å…¥åˆ°ç±»åŸæœ‰çš„æ•°æ®å‰é¢</li></ol><p>å…¶ä¸­çš„æ·»åŠ è¿‡ç¨‹çš„æºç å¦‚ä¸‹ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs objc"><span class="hljs-keyword">void</span> attachLists(List* <span class="hljs-keyword">const</span> * addedLists, uint32_t addedCount) &#123;<br>     <span class="hljs-keyword">if</span> (addedCount == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;<br><br>     <span class="hljs-keyword">if</span> (hasArray()) &#123;<br>         <span class="hljs-comment">// many lists -&gt; many lists</span><br>         uint32_t oldCount = array()-&gt;count;<br>         uint32_t newCount = oldCount + addedCount;<br>         setArray((array_t *)realloc(array(), array_t::byteSize(newCount)));<br>         array()-&gt;count = newCount;<br>        <span class="hljs-comment">//æ ¹æ®æ‰€æœ‰åˆ†ç±»çš„æ–¹æ³•åˆ—è¡¨çš„æ•°é‡addedCountï¼Œå°†ç±»å¯¹è±¡åŸæœ‰æ–¹æ³•åˆ—è¡¨çš„å†…å­˜åœ°å€å‘åç§»åŠ¨addedCountä½</span><br>         memmove(array()-&gt;lists + addedCount, array()-&gt;lists, <br>                    oldCount * <span class="hljs-keyword">sizeof</span>(array()-&gt;lists[<span class="hljs-number">0</span>]));<br>       <span class="hljs-comment">//å°†æ‰€æœ‰å¯¹è±¡çš„æ–¹æ³•åˆ—è¡¨copyåˆ°å‰addedCountä½ä¸Š</span><br>         memcpy(array()-&gt;lists, addedLists, <br>                   addedCount * <span class="hljs-keyword">sizeof</span>(array()-&gt;lists[<span class="hljs-number">0</span>]));<br>     &#125;<br>     <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!list  &amp;&amp;  addedCount == <span class="hljs-number">1</span>) &#123;<br>         <span class="hljs-comment">// 0 lists -&gt; 1 list</span><br>         list = addedLists[<span class="hljs-number">0</span>];<br>     &#125; <br>     <span class="hljs-keyword">else</span> &#123;<br>         <span class="hljs-comment">// 1 list -&gt; many lists</span><br>         List* oldList = list;<br>         uint32_t oldCount = oldList ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;<br>         uint32_t newCount = oldCount + addedCount;<br>         setArray((array_t *)malloc(array_t::byteSize(newCount)));<br>         array()-&gt;count = newCount;<br>         <span class="hljs-keyword">if</span> (oldList) array()-&gt;lists[addedCount] = oldList;<br>         memcpy(array()-&gt;lists, addedLists, <br>               addedCount * <span class="hljs-keyword">sizeof</span>(array()-&gt;lists[<span class="hljs-number">0</span>]));<br>     &#125;<br> &#125;<br><br><br></code></pre></td></tr></table></figure><h4 id="3-Categoryä¸­loadå’Œinitializeçš„åŒºåˆ«"><a href="#3-Categoryä¸­loadå’Œinitializeçš„åŒºåˆ«" class="headerlink" title="3. Categoryä¸­loadå’Œinitializeçš„åŒºåˆ«"></a>3. Categoryä¸­loadå’Œinitializeçš„åŒºåˆ«</h4><ol><li><p>+load</p><p>è°ƒç”¨æ—¶æœºï¼š</p><p><code>+load</code> æ–¹æ³•ä¼šåœ¨<code>runtime</code>åŠ è½½ç±»ã€åˆ†ç±»æ—¶è°ƒç”¨ï¼Œæ¯ä¸ªç¨‹åºçš„ç±»ã€åˆ†ç±»çš„<code>+load</code>ï¼Œåœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­åªä¼šè°ƒç”¨ä¸€æ¬¡</p><p>è°ƒç”¨é¡ºåºï¼š</p><ul><li><p>å…ˆè°ƒç”¨ç±»çš„<code>+load</code>æ–¹æ³•</p><p>æŒ‰ç…§ç¼–è¯‘é¡ºåºå…ˆç¼–è¯‘å…ˆè°ƒç”¨</p><p>è°ƒç”¨å­ç±»çš„<code>+load</code>æ–¹æ³•ä¹‹å‰ä¼šå…ˆè°ƒç”¨çˆ¶ç±»çš„<code>+load</code>æ–¹æ³•</p></li><li><p>å†è°ƒç”¨åˆ†ç±»çš„<code>+load</code>æ–¹æ³•</p><p>æŒ‰ç…§ç¼–è¯‘å…ˆåé¡ºåºä»£ç”¨</p></li></ul></li><li><p>+initialize</p><p>è°ƒç”¨æ—¶æœºï¼š</p><ul><li><code>+initialize</code>æ–¹æ³•ä¼šåœ¨ç±»ç¬¬ä¸€æ¬¡æ¥æ”¶æ¶ˆæ¯æ—¶è°ƒç”¨</li></ul><p>è°ƒç”¨é¡ºåºï¼š</p><ul><li>å…ˆè°ƒç”¨çˆ¶ç±»çš„<code>+initialize</code>å†è°ƒç”¨å­ç±»çš„<code>+initialize</code>ï¼ˆå…ˆåˆå§‹åŒ–çˆ¶ç±»ï¼Œå†åˆå§‹åŒ–å­ç±»ï¼Œæ¯ä¸ªç±»åªä¼šåˆå§‹åŒ–ä¸€æ¬¡ï¼‰</li><li>åˆ†ç±»çš„<code>+initialize</code>ä¼šè¦†ç›–ç±»çš„<code>+initialize</code></li></ul></li><li><p>+initializeä¸loadçš„åŒºåˆ«ï¼š</p><p><code>+initialize</code>æ–¹æ³•æ—¶é€šè¿‡<code>objc_msgSend</code>è¿›è¡Œè°ƒç”¨çš„ï¼Œ<code>+load</code>æ˜¯æ‰¾åˆ°<code>+load</code>æ–¹æ³•å†…å­˜åœ°å€ç›´æ¥è°ƒç”¨çš„ï¼Œæ‰€ä»¥<code>+initialize</code>æ–¹æ³•æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li>å¦‚æœå­ç±»æ²¡æœ‰å®ç°<code>+initialize</code>ï¼Œä¼šè°ƒç”¨çˆ¶ç±»çš„<code>+initialize</code>ï¼ˆæ‰€ä»¥çˆ¶ç±»çš„<code>+initialize</code>æ–¹æ³•å¯èƒ½ä¼šè¢«è°ƒç”¨å¤šæ¬¡ï¼‰</li><li>å¦‚æœåˆ†ç±»å®ç°äº†<code>+initialize</code>ï¼Œå°±ä¼šè¦†ç›–æœ¬èº«çš„<code>+initialize</code>è°ƒç”¨</li></ul></li></ol><h4 id="4-ä¸ºåˆ†ç±»æ·»åŠ æˆå‘˜å˜é‡"><a href="#4-ä¸ºåˆ†ç±»æ·»åŠ æˆå‘˜å˜é‡" class="headerlink" title="4. ä¸ºåˆ†ç±»æ·»åŠ æˆå‘˜å˜é‡"></a>4. ä¸ºåˆ†ç±»æ·»åŠ æˆå‘˜å˜é‡</h4><ul><li><p>ä½¿ç”¨å…³è”å¯¹è±¡çš„æ–¹æ³•é—´æ¥æ·»åŠ æˆå‘˜å˜é‡:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">#import &quot;Person+test.h&quot;<br>#import &lt;objc/runtime.h&gt;<br><br>@implementation Person (test)<br><br>-(void)setName:(NSString *)name&#123;<br>    /**<br>     object: éœ€è¦å…³è”çš„å¯¹è±¡<br>     key: const void * ç±»å‹çš„key(å¸¸è§å†™æ³•ï¼š1.ä½¿ç”¨å±æ€§åä½œä¸ºkey 2. ä½¿ç”¨getæ–¹æ³•çš„@selectorä½œä¸ºkey)<br>     valueï¼šå…³è”å€¼<br>     objc_AssociationPolicy:å…³è”ç­–ç•¥<br>     */<br>    objc_setAssociatedObject(self, @selector(name), name, OBJC_ASSOCIATION_COPY_NONATOMIC);<br>&#125;<br><br>-(NSString*)name&#123;<br>    return  objc_getAssociatedObject(self, _cmd);<br>&#125;<br><br>@end<br>  <br>// ç§»é™¤name<br>objc_setAssociatedObject(self, @selector(name), nil, OBJC_ASSOCIATION_COPY_NONATOMIC);<br>// ç§»é™¤selfçš„æ‰€æœ‰å…³è”å¯¹è±¡<br>objc_removeAssociatedObjects(self)<br></code></pre></td></tr></table></figure></li><li><p>å…³è”å¯¹è±¡çš„åŸç†ï¼š</p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202202231652896.png" alt="å…³è”å¯¹è±¡çš„åŸç†" style="zoom:110%;margin-left:10px" /></li></ul><h3 id="äºŒã€Extensionï¼ˆç±»æ‰©å±•ï¼‰"><a href="#äºŒã€Extensionï¼ˆç±»æ‰©å±•ï¼‰" class="headerlink" title="äºŒã€Extensionï¼ˆç±»æ‰©å±•ï¼‰"></a>äºŒã€Extensionï¼ˆç±»æ‰©å±•ï¼‰</h3><h4 id="1-æ‰©å±•çš„ç”¨é€”ï¼Ÿ"><a href="#1-æ‰©å±•çš„ç”¨é€”ï¼Ÿ" class="headerlink" title="1. æ‰©å±•çš„ç”¨é€”ï¼Ÿ"></a>1. æ‰©å±•çš„ç”¨é€”ï¼Ÿ</h4><ul><li>å£°æ˜ç§æœ‰å±æ€§</li><li>å£°æ˜ç§æœ‰æˆå‘˜å˜é‡</li><li>å£°æ˜ç§æœ‰æ–¹æ³•</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">@interface ViewController ()<br>&#123;<br>    NSString *name;<br>&#125;<br>@property(nonatomic,assign)NSInteger age;<br>-(void)test;<br><br>@end<br></code></pre></td></tr></table></figure><h4 id="2-categoryå’Œextensionçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#2-categoryå’Œextensionçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="2. categoryå’Œextensionçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>2. categoryå’Œextensionçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h4><ul><li>categoryæ˜¯è¿è¡Œæ—¶å†³è®®ï¼Œextensionæ˜¯ç¼–è¯‘æ˜¯å†³è®®</li><li>categoryæœ‰å£°æ˜å’Œå®ç°ï¼Œextensionåªä»¥å£°æ˜çš„å½¢å¼ï¼Œå®ç°å¤šæ•°æƒ…å†µä¸‹å¯„ç”Ÿäºå®¿ä¸»ç±»çš„.mä¸­</li><li>categoryå¯ä»¥ä¸ºç³»ç»Ÿç±»æ·»åŠ åˆ†ç±»ï¼Œextensionä¸èƒ½ä¸ºç³»ç»Ÿç±»æ·»åŠ æ‰©å±•</li></ul><h3 id="é¢è¯•é¢˜"><a href="#é¢è¯•é¢˜" class="headerlink" title="é¢è¯•é¢˜"></a>é¢è¯•é¢˜</h3><ol><li>Categoryçš„å®ç°åŸç†ï¼Œä»¥åŠCategoryä¸ºä»€ä¹ˆåªèƒ½åŠ æ–¹æ³•ï¼Œä¸èƒ½åŠ å±æ€§</li><li>Categoryä¸­æœ‰loadæ–¹æ³•ä¹ˆï¼Ÿloadæ–¹æ³•æ—¶ä»€ä¹ˆæ—¶å€™è°ƒç”¨çš„ï¼Ÿloadæ–¹æ³•èƒ½ç»§æ‰¿å—ï¼Ÿ</li><li>loadã€initializeåœ¨categoryä¸­çš„è°ƒç”¨é¡ºåºï¼Œä»¥åŠå‡ºç°ç»§æ‰¿æ—¶å®ƒä»¬ä¹‹é—´çš„è°ƒç”¨è¿‡ç¨‹ï¼Ÿ </li><li>loadã€initializeçš„åŒºåˆ«ï¼Œä»¥åŠå®ƒä»¬åœ¨categoryé‡å†™çš„æ—¶å€™çš„è°ƒç”¨æ¬¡åºï¼Ÿ</li></ol>]]></content>
    
    
    <categories>
      
      <category>iOS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å¤‡è€ƒ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>iOS_å›¾åƒæ˜¾ç¤ºåŸç†</title>
    <link href="/2022/01/18/iOS/%E5%A4%87%E8%80%83/UI%E8%A7%86%E5%9B%BE/iOS_%E5%9B%BE%E5%83%8F%E6%98%BE%E7%A4%BA%E5%8E%9F%E7%90%86/"/>
    <url>/2022/01/18/iOS/%E5%A4%87%E8%80%83/UI%E8%A7%86%E5%9B%BE/iOS_%E5%9B%BE%E5%83%8F%E6%98%BE%E7%A4%BA%E5%8E%9F%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>æœ€è¿‘åœ¨çœ‹ä¸€äº›è§†é¢‘ï¼Œè§‰å¾—æœ‰å¿…è¦æŠŠé‡Œé¢çš„å†…å®¹è®°å½•ä¸‹æ¥æ–¹ä¾¿ä¹‹åå¤ä¹ ã€‚</p><h3 id="ä¸€ã€å›¾åƒçš„æ˜¾ç¤ºåŸç†"><a href="#ä¸€ã€å›¾åƒçš„æ˜¾ç¤ºåŸç†" class="headerlink" title="ä¸€ã€å›¾åƒçš„æ˜¾ç¤ºåŸç†"></a>ä¸€ã€å›¾åƒçš„æ˜¾ç¤ºåŸç†</h3><p> <code>CPU</code>å’Œ<code>GPU</code>ä¸¤ä¸ªç¡¬ä»¶é€šè¿‡æ€»çº¿é“¾æ¥èµ·æ¥ï¼Œ<code>CPU</code>è¾“å‡ºçš„ç»“æœ(å¾€å¾€æ˜¯ä¸€ä¸ªä½å›¾(<code>bitmap</code>)ç»ç”±æ€»çº¿ä¼ ç»™<code>GPU</code>ï¼Œ<code>GPU</code>æ‹¿åˆ°ä½å›¾ä¹‹åï¼Œä¼šå¯¹ä½å›¾åšç›¸åº”çš„å›¾å±‚çš„æ¸²æŸ“ã€çº¹ç†çš„åˆæˆç­‰å¤„ç†ã€‚ä¹‹åä¼šæŠŠç»“æœæ”¾å…¥å¸§ç¼“å†²åŒº(<code>Frame Buffer</code>)å½“ä¸­ã€‚ç„¶åç”±è§†é¢‘æ§åˆ¶å™¨æ ¹æ®VSyncä¿¡å·åœ¨æŒ‡å®šæ—¶é—´ä¹‹å‰å»æå–å¯¹åº”å¸§ç¼“å†²åŒºå½“ä¸­çš„å±å¹•æ˜¾ç¤ºå†…å®¹ï¼Œæœ€ç»ˆæ˜¾ç¤ºåˆ°å±å¹•ä¸Šé¢ã€‚</p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202201181755791.png" alt="iOSå›¾åƒæ˜¾ç¤ºåŸç†1" style="zoom:67%;margin-left:10px" /><p>UIViewè§†å›¾æ¸²æŸ“çš„å¤§è‡´è¿‡ç¨‹ï¼š</p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202201181803337.png" alt="iOSå›¾åƒæ˜¾ç¤ºåŸç†2" style="zoom:67%;margin-left:10px" /><p>å½“æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª<code>UIView</code>æ§ä»¶ä¹‹åï¼Œå®ƒçš„æ˜¾ç¤ºéƒ¨åˆ†æ˜¯ç”±<code>CALayer</code>è´Ÿè´£çš„ï¼Œåœ¨<code>CALayer</code>å½“ä¸­æœ‰ä¸€ä¸ª<code>contents</code>å±æ€§ï¼Œå°±æ˜¯æˆ‘ä»¬æœ€ç»ˆè¦ç»˜åˆ¶åˆ°å±å¹•å½“ä¸­çš„ä¸€ä¸ªä½å›¾ã€‚æ¯”å¦‚è¯´æˆ‘ä»¬åˆ›å»ºçš„æ˜¯ä¸€ä¸ª<code>UILabel</code>ï¼Œé‚£ä¹ˆ <code>contents</code>é‡Œé¢æ”¾ç½®çš„å°±æ˜¯å…³äº<code>hello world</code>çš„æ–‡å­—çš„ä½å›¾ã€‚ç³»ç»Ÿä¼šåœ¨åˆé€‚çš„æ—¶æœºå›è°ƒç»™æˆ‘ä»¬ä¸€ä¸ª<code>DrawRect:</code> æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ­¤åŸºç¡€ä¹‹ä¸Šç»˜åˆ¶æˆ‘ä»¬è‡ªå·±æƒ³è¦è‡ªå®šä¹‰ç»˜åˆ¶çš„å†…å®¹ï¼Œç»˜åˆ¶å¥½çš„ä½å›¾æœ€ç»ˆä¼šç»ç”±<code>Core Animation</code>è¿™ä¸ªæ¡†æ¶æäº¤ç»™<code>GPU</code>éƒ¨åˆ†çš„<code>OpenGL(ES</code>)æ¸²æŸ“ç®¡çº¿ï¼Œè¿›è¡Œæœ€ç»ˆä½å›¾çš„æ¸²æŸ“ï¼ŒåŒ…æ‹¬çº¹ç†çš„åˆæˆï¼Œç„¶åæ˜¾ç¤ºåˆ°å±å¹•ä¸Šé¢ã€‚</p><blockquote><p>æ ¹æ®å•ä¸€èŒè´£åŸåˆ™ï¼ŒUIViewæ˜¯ä¸“é—¨è´Ÿè´£äº‹ä»¶ä¼ é€’å’Œè§†å›¾å“åº”çš„ï¼ŒCALayerå…¨æƒè´Ÿè´£è§†å›¾çš„æ˜¾ç¤ºã€‚</p></blockquote><p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­CPUã€GPUåšäº†ä»€ä¹ˆå‘¢</p><h4 id="1-CPUçš„å·¥ä½œ"><a href="#1-CPUçš„å·¥ä½œ" class="headerlink" title="1. CPUçš„å·¥ä½œ"></a>1. CPUçš„å·¥ä½œ</h4><ul><li><p>Layoyut </p><p>UIå¸ƒå±€ã€æ–‡æœ¬è®¡ç®—</p></li><li><p>Display</p><p>ç»˜åˆ¶</p></li><li><p>Prepare</p><p>å¦‚ï¼šå›¾ç‰‡ç¼–è§£ç </p></li><li><p>Commit</p><p>æäº¤ä½å›¾</p></li></ul><h4 id="2-GPUæ¸²æŸ“ç®¡çº¿"><a href="#2-GPUæ¸²æŸ“ç®¡çº¿" class="headerlink" title="2. GPUæ¸²æŸ“ç®¡çº¿"></a>2. GPUæ¸²æŸ“ç®¡çº¿</h4><ul><li>é¡¶ç‚¹ç€è‰²</li><li>å›¾å…ƒè£…é…</li><li>å…‰æ …åŒ–</li><li>ç‰‡æ®µç€è‰²</li><li>ç‰‡æ®µå¤„ç†</li></ul><h3 id="äºŒã€å¡é¡¿å’Œæ‰å¸§çš„åŸå› "><a href="#äºŒã€å¡é¡¿å’Œæ‰å¸§çš„åŸå› " class="headerlink" title="äºŒã€å¡é¡¿å’Œæ‰å¸§çš„åŸå› "></a>äºŒã€å¡é¡¿å’Œæ‰å¸§çš„åŸå› </h3><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202201181152287.png" alt="UIå¡é¡¿ã€æ‰å¸§çš„åŸå› " style="zoom:67%;margin-left:10px" /><p> ä¸€èˆ¬é¡µé¢æ»‘åŠ¨çš„æµç•…æ€§æ˜¯60FPS, å³æ¯ä¸€ç§’æœ‰60å¸§çš„ç”»é¢æ›´æ–°ã€‚å³æ¯é—´éš”16.7mså°±ä¼šæœ‰ä¸€å¸§ç”»é¢æ›´æ–°ã€‚  åœ¨è§„å®šçš„16.7msä¹‹å†…ï¼Œåœ¨ä¸‹ä¸€å¸§<code>VSync</code>ä¿¡å·åˆ°æ¥ä¹‹å‰ï¼Œ<code>CPU</code>å’Œ<code>GPU</code>å¹¶æ²¡æœ‰å…±åŒå®Œæˆä¸‹ä¸€å¸§ç”»é¢çš„åˆæˆï¼Œå°±ä¼šå¯¼è‡´å¡é¡¿ã€æ‰å¸§ã€‚</p><h3 id="ä¸‰ã€æ»‘åŠ¨ä¼˜åŒ–æ–¹æ¡ˆ"><a href="#ä¸‰ã€æ»‘åŠ¨ä¼˜åŒ–æ–¹æ¡ˆ" class="headerlink" title="ä¸‰ã€æ»‘åŠ¨ä¼˜åŒ–æ–¹æ¡ˆ"></a>ä¸‰ã€æ»‘åŠ¨ä¼˜åŒ–æ–¹æ¡ˆ</h3><h4 id="1-CPUèµ„æºæ¶ˆè€—åˆ†æ"><a href="#1-CPUèµ„æºæ¶ˆè€—åˆ†æ" class="headerlink" title="1. CPUèµ„æºæ¶ˆè€—åˆ†æ"></a>1. CPUèµ„æºæ¶ˆè€—åˆ†æ</h4><ul><li><p>å¯¹è±¡åˆ›å»ºã€è°ƒæ•´ã€é”€æ¯ </p><p><strong>åˆ›å»º</strong>ï¼šå¯¹è±¡çš„åˆ›å»ºä¼šåˆ†é…å†…å­˜ã€è°ƒæ•´å±æ€§ã€ç”šè‡³è¿˜æœ‰è¯»å–æ–‡ä»¶ç­‰æ“ä½œï¼Œæ¯”è¾ƒæ¶ˆè€—<code>CPU</code>èµ„æºã€‚å°½é‡é‡‡å–è½»é‡çº§å¯¹è±¡ï¼Œå°½é‡æ”¾åˆ°åå°çº¿ç¨‹å¤„ç†ï¼Œå°½é‡æ¨è¿Ÿå¯¹è±¡çš„åˆ›å»ºæ—¶é—´ã€‚</p><p><strong>è°ƒæ•´</strong>ï¼š<code>frame</code>ã€<code>bounds</code>ã€<code>transform</code>åŠè§†å›¾å±‚æ¬¡ç­‰å±æ€§è°ƒæ•´å¾ˆè€—è´¹<code>CPU</code>èµ„æºã€‚å°½é‡å‡å°‘ä¸å¿…è¦å±æ€§çš„ä¿®æ”¹ï¼Œå°½é‡é¿å…è°ƒæ•´è§†å›¾å±‚æ¬¡ã€æ·»åŠ å’Œç§»é™¤è§†å›¾ã€‚</p></li><li><p>é¢„æ’ç‰ˆï¼ˆå¸ƒå±€è®¡ç®—ã€æ–‡æœ¬è®¡ç®—ï¼‰</p><p><strong>å¸ƒå±€è®¡ç®—</strong>ï¼šéšç€è§†å›¾æ•°é‡çš„å¢é•¿ï¼Œ<code>Autolayout</code>å¸¦æ¥çš„<code>CPU</code>æ¶ˆè€—ä¼šå‘ˆæŒ‡æ•°çº§å¢é•¿ï¼Œæ‰€ä»¥å°½é‡æå‰ç®—å¥½å¸ƒå±€ï¼Œåœ¨éœ€è¦æ—¶ä¸€æ¬¡æ€§è°ƒæ•´å¥½å¯¹åº”å±æ€§ã€‚</p></li><li><p>é¢„æ¸²æŸ“ï¼ˆæ–‡æœ¬ç­‰å¼‚æ­¥ç»˜åˆ¶ã€å›¾ç‰‡ç¼–è§£ç ç­‰ï¼‰</p><p><strong>æ–‡æœ¬æ¸²æŸ“</strong>ï¼š å±å¹•ä¸Šèƒ½çœ‹åˆ°çš„æ‰€æœ‰æ–‡æœ¬å†…å®¹æ§ä»¶ï¼ŒåŒ…æ‹¬UIWebViewï¼Œåœ¨åº•å±‚éƒ½æ˜¯é€šè¿‡<code>CoreText</code>æ’ç‰ˆã€ç»˜åˆ¶ä¸ºä½å›¾æ˜¾ç¤ºçš„ã€‚å¸¸è§çš„æ–‡æœ¬æ§ä»¶ï¼Œå…¶æ’ç‰ˆä¸ç»˜åˆ¶éƒ½æ˜¯åœ¨ä¸»çº¿ç¨‹è¿›è¡Œçš„ï¼Œæ˜¾ç¤ºå¤§é‡æ–‡æœ¬æ—¶ï¼Œ<code>CPU</code>å‹åŠ›å¾ˆå¤§ã€‚å¯¹æ­¤è§£å†³æ–¹æ¡ˆå”¯ä¸€å°±æ˜¯è‡ªå®šä¹‰æ–‡æœ¬æ§ä»¶ï¼Œç”¨<code>CoreText</code>å¯¹æ–‡æœ¬å¼‚æ­¥ç»˜åˆ¶ã€‚ï¼ˆå¾ˆéº»çƒ¦ï¼Œå¼€å‘æˆæœ¬é«˜ï¼‰ã€‚</p><p><strong>å›¾ç‰‡è§£ç </strong>ï¼šå½“ç”¨<code>UIImage</code>æˆ–<code>CGImageSource</code>åˆ›å»ºå›¾ç‰‡æ—¶ï¼Œå›¾ç‰‡æ•°æ®å¹¶ä¸ä¼šç«‹åˆ»è§£ç ã€‚å›¾ç‰‡è®¾ç½®åˆ°<code>UIImageView</code>æˆ–<code>CALayer.contents</code>ä¸­å»ï¼Œå¹¶ä¸”<code>CALayer</code>è¢«æäº¤åˆ°<code>GPU</code>å‰ï¼Œ<code>CGImage</code>ä¸­çš„æ•°æ®æ‰ä¼šå¾—åˆ°è§£ç ã€‚è¿™ä¸€æ­¥æ˜¯å‘ç”Ÿåœ¨ä¸»çº¿ç¨‹çš„ï¼Œå¹¶ä¸”ä¸å¯é¿å…ã€‚<code>SD_WebImage</code>å¤„ç†æ–¹å¼ï¼šåœ¨åå°çº¿ç¨‹å…ˆæŠŠå›¾ç‰‡ç»˜åˆ¶åˆ°<code>CGBitmapContext</code>ä¸­ï¼Œç„¶åä»<code>Bitmap</code>ç›´æ¥åˆ›å»ºå›¾ç‰‡ã€‚</p></li></ul><h4 id="2-GPUèµ„æºæ¶ˆè€—åˆ†æ"><a href="#2-GPUèµ„æºæ¶ˆè€—åˆ†æ" class="headerlink" title="2. GPUèµ„æºæ¶ˆè€—åˆ†æ"></a>2. GPUèµ„æºæ¶ˆè€—åˆ†æ</h4><ul><li><p>çº¹ç†æ¸²æŸ“</p><p>å°½é‡å‡å°‘çŸ­æ—¶é—´å†…å¤§é‡å›¾ç‰‡çš„æ˜¾ç¤ºï¼Œå°½å¯èƒ½å°†å¤šå¼ å›¾ç‰‡åˆæˆä¸€å¼ è¿›è¡Œæ˜¾ç¤º </p></li><li><p>è§†å›¾æ··åˆ </p><p>å°½é‡å‡å°‘è§†å›¾å±‚æ¬¡å’Œæ•°é‡ï¼Œå¹¶åœ¨ä¸é€æ˜çš„è§†å›¾é‡Œæ ‡æ˜<code>opaque</code>å±æ€§ä»¥é¿å…æ— ç”¨çš„<code>Alpha</code>é€šé“åˆæˆ </p></li><li><p>å›¾å½¢ç”Ÿæˆ</p><p>å°½é‡é¿å…ç¦»å±æ¸²æŸ“ï¼Œå°½é‡é‡‡ç”¨å¼‚æ­¥ç»˜åˆ¶ï¼Œå°½é‡é¿å…ä½¿ç”¨åœ†è§’ã€é˜´å½±ã€é®ç½©ç­‰å±æ€§ã€‚å¿…è¦æ—¶ç”¨é™æ€å›¾ç‰‡å®ç°å±•ç¤ºæ•ˆæœï¼Œä¹Ÿå¯å°è¯•å…‰æ …åŒ–ç¼“å­˜å¤ç”¨å±æ€§</p></li></ul><h3 id="å››ã€ç¦»å±æ¸²æŸ“"><a href="#å››ã€ç¦»å±æ¸²æŸ“" class="headerlink" title="å››ã€ç¦»å±æ¸²æŸ“"></a>å››ã€ç¦»å±æ¸²æŸ“</h3><h4 id="1-ä»€ä¹ˆæ˜¯ç¦»å±æ¸²æŸ“"><a href="#1-ä»€ä¹ˆæ˜¯ç¦»å±æ¸²æŸ“" class="headerlink" title="1. ä»€ä¹ˆæ˜¯ç¦»å±æ¸²æŸ“"></a>1. ä»€ä¹ˆæ˜¯ç¦»å±æ¸²æŸ“</h4><ul><li><p>åœ¨å±æ¸²æŸ“ï¼ˆ<code>On-Screen Rendering</code>ï¼‰</p><p>æŒ‡çš„æ˜¯GPUçš„æ¸²æŸ“æ“ä½œæ˜¯åœ¨å½“å‰ç”¨äºæ˜¾ç¤ºçš„å±å¹•ç¼“å†²åŒºå†…è¿›è¡Œ</p></li><li><p>ç¦»å±æ¸²æŸ“ï¼ˆ<code>Off-Screen Rendering</code>ï¼‰</p><p>æŒ‡çš„æ˜¯GPUåœ¨å½“å‰å±å¹•çš„ç¼“å†²åŒºä»¥å¤–æ–°å¼€è¾Ÿä¸€ä¸ªç¼“å†²åŒºè¿›è¡Œæ¸²æŸ“</p></li></ul><p>å½“æˆ‘ä»¬æŒ‡å®šäº†æŸäº›UIè§†å›¾çš„å±æ€§,æ ‡è®°ä¸ºå®ƒåœ¨æœªåˆæˆä¹‹å‰ï¼Œä¸èƒ½ç”¨äºå½“å‰å±å¹•æ˜¾ç¤ºçš„æ—¶å€™ï¼Œå°±ä¼šè§¦å‘ç¦»å±æ¸²æŸ“ï¼Œè€Œç¦»å±æ¸²æŸ“çš„æ¦‚å¿µèµ·æºäºGPUå±‚é¢ï¼ŒæŒ‡çš„æ˜¯å½“å‰å±å¹•çš„ç¼“å†²åŒºä»¥å¤–æ–°å¼€è¾Ÿä¸€ä¸ªç¼“å†²åŒºè¿›è¡Œæ¸²æŸ“æ“ä½œ</p><h4 id="2-ä½•æ—¶è§¦å‘"><a href="#2-ä½•æ—¶è§¦å‘" class="headerlink" title="2. ä½•æ—¶è§¦å‘"></a>2. ä½•æ—¶è§¦å‘</h4><p><code>CoreGraphics</code>çš„ä¸Šä¸‹æ–‡ç»˜åˆ¶ï¼Œ<code>drawRect</code>ç»˜åˆ¶ï¼Œ<code>layer</code>åœ†è§’/è¾¹æ¡†/é˜´å½±/æŠ—é”¯é½¿/å…‰æ …åŒ–ï¼ˆ<code>shouldRasterize</code>ç½®ä¸ºYESï¼‰</p><h4 id="3-ä¸ºä½•è¦é¿å…"><a href="#3-ä¸ºä½•è¦é¿å…" class="headerlink" title="3. ä¸ºä½•è¦é¿å…"></a>3. ä¸ºä½•è¦é¿å…</h4><p>åœ¨è§¦å‘ç¦»å±æ¸²æŸ“çš„æ—¶å€™ï¼Œä¼šå¢åŠ <code>GPU</code>çš„å·¥ä½œé‡ï¼Œå¯èƒ½å¯¼è‡´<code>CPU</code>+<code>GPU</code>çš„æ€»è€—æ—¶è¶…å‡º16.7msï¼Œå¯¼è‡´UIçš„å¡é¡¿å’Œæ‰å¸§ã€‚</p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul><li><a href="http://www.noobyard.com/article/p-oyuemyib-nh.html">ä¸€æ–‡è¯»æ‡‚iOSå›¾åƒæ˜¾ç¤ºåŸç†ä¸ä¼˜åŒ–</a></li><li><a href="http://www.cocoachina.com/articles/25294">iOS å›¾åƒæ˜¾ç¤ºåŸç†</a></li><li>æ…•è¯¾ç½‘iOSé«˜çº§é¢è¯•</li></ul>]]></content>
    
    
    <categories>
      
      <category>iOS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å¤‡è€ƒ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>iOS_frameå’Œboundsçš„åŒºåˆ«</title>
    <link href="/2022/01/17/iOS/%E5%A4%87%E8%80%83/UI%E8%A7%86%E5%9B%BE/iOS-frame%E5%92%8Cbounds%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
    <url>/2022/01/17/iOS/%E5%A4%87%E8%80%83/UI%E8%A7%86%E5%9B%BE/iOS-frame%E5%92%8Cbounds%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>æœ‰æ—¶å€™ä¸æ˜ç™½ä»€ä¹ˆæ—¶å€™ç”¨<code>frame</code>åˆé€‚ä»€ä¹ˆæ—¶å€™ç”¨<code>bounds</code>åˆé€‚ï¼Œåœ¨è¿™é‡Œè®°å½•ä¸‹å®ƒä»¬çš„åŒºåˆ«ã€‚</p><h4 id="ä¸€ã€Frame"><a href="#ä¸€ã€Frame" class="headerlink" title="ä¸€ã€Frame"></a>ä¸€ã€Frame</h4><p>æ§ä»¶åœ¨çˆ¶æ§ä»¶ä¸­çš„ä½ç½®å’Œå°ºå¯¸ï¼ˆä»¥çˆ¶æ§ä»¶çš„å·¦ä¸Šè§’ä¸ºåæ ‡åŸç‚¹ï¼‰</p><h3 id="äºŒã€Bounds"><a href="#äºŒã€Bounds" class="headerlink" title="äºŒã€Bounds"></a>äºŒã€Bounds</h3><p>æ§ä»¶çš„ä½ç½®å’Œå°ºå¯¸ï¼ˆä»¥è‡ªå·±å·¦ä¸Šè§’ä¸ºåæ ‡åŸç‚¹çš„ï¼Œæ‰€ä»¥<code>bounds</code>çš„xã€yä¸€èˆ¬éƒ½ä¸º0ï¼‰</p><h3 id="ä¸‰ã€åŒºåˆ«"><a href="#ä¸‰ã€åŒºåˆ«" class="headerlink" title="ä¸‰ã€åŒºåˆ«"></a>ä¸‰ã€åŒºåˆ«</h3><p>æŒ‰ç…§ä¸‹é¢ä»£ç åˆ›å»ºè§†å›¾ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å›¾1å½“å‰è§†å›¾åæ ‡ç³»ï¼Œä»¥åŠå›¾2ä¿®æ”¹viewè§†å›¾<code>bounds</code>åï¼Œè§†å›¾çš„åæ ‡ç³»ä»¥åŠå¯¹ç°æœ‰è§†å›¾å¤§å°å’Œå°ºå¯¸çš„å½±å“</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">let</span> view <span class="hljs-operator">=</span> <span class="hljs-type">UIView</span>.<span class="hljs-keyword">init</span>(frame: <span class="hljs-type">CGRect</span>.<span class="hljs-keyword">init</span>(x: <span class="hljs-number">100</span>, y: <span class="hljs-number">100</span>, width: <span class="hljs-number">200</span>, height: <span class="hljs-number">200</span>))<br>view.backgroundColor <span class="hljs-operator">=</span> <span class="hljs-type">UIColor</span>.systemCyan<br><span class="hljs-keyword">self</span>.view.addSubview(view)<br>        <br><span class="hljs-keyword">let</span> subVeiw <span class="hljs-operator">=</span> <span class="hljs-type">UIView</span>.<span class="hljs-keyword">init</span>(frame: <span class="hljs-type">CGRect</span>.<span class="hljs-keyword">init</span>(x: <span class="hljs-number">100</span>, y: <span class="hljs-number">100</span>, width: <span class="hljs-number">100</span>, height: <span class="hljs-number">100</span>))<br>subVeiw.backgroundColor <span class="hljs-operator">=</span> <span class="hljs-type">UIColor</span>.systemPink<br>view.addSubview(subVeiw)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;view: frame:<span class="hljs-subst">\(view.frame)</span>---bounds:<span class="hljs-subst">\(view.bounds)</span>&quot;</span> )<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;subV: frame:<span class="hljs-subst">\(subVeiw.frame)</span>---bounds:<span class="hljs-subst">\(subVeiw.bounds)</span>&quot;</span> )<br><span class="hljs-comment">// log</span><br>view: frame:(<span class="hljs-number">100.0</span>, <span class="hljs-number">100.0</span>, <span class="hljs-number">200.0</span>, <span class="hljs-number">200.0</span>)<span class="hljs-operator">---</span>bounds:(<span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">200.0</span>, <span class="hljs-number">200.0</span>)<br>subV: frame:(<span class="hljs-number">100.0</span>, <span class="hljs-number">100.0</span>, <span class="hljs-number">100.0</span>, <span class="hljs-number">100.0</span>)<span class="hljs-operator">---</span>bounds:(<span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">100.0</span>, <span class="hljs-number">100.0</span>) <br><br><span class="hljs-comment">//ä¿®æ”¹viewçš„bounds</span><br>view.bounds <span class="hljs-operator">=</span> <span class="hljs-type">CGRect</span>.<span class="hljs-keyword">init</span>(x: <span class="hljs-number">50</span>, y: <span class="hljs-number">50</span>, width: <span class="hljs-number">200</span>, height: <span class="hljs-number">200</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;view: frame:<span class="hljs-subst">\(view.frame)</span>---bounds:<span class="hljs-subst">\(view.bounds)</span>&quot;</span> )<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;subV: frame:<span class="hljs-subst">\(subVeiw.frame)</span>---bounds:<span class="hljs-subst">\(subVeiw.bounds)</span>&quot;</span> )<br><span class="hljs-comment">//log</span><br>view: frame:(<span class="hljs-number">100.0</span>, <span class="hljs-number">100.0</span>, <span class="hljs-number">200.0</span>, <span class="hljs-number">200.0</span>)<span class="hljs-operator">---</span>bounds:(<span class="hljs-number">50.0</span>, <span class="hljs-number">50.0</span>, <span class="hljs-number">200.0</span>, <span class="hljs-number">200.0</span>)<br>subV: frame:(<span class="hljs-number">100.0</span>, <span class="hljs-number">100.0</span>, <span class="hljs-number">100.0</span>, <span class="hljs-number">100.0</span>)<span class="hljs-operator">---</span>bounds:(<span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">100.0</span>, <span class="hljs-number">100.0</span>)<br></code></pre></td></tr></table></figure><p>ä¿®æ”¹å‰åæ ‡ç³»ï¼š</p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202201171739147.png" alt="frameåæ ‡ç³»" style="zoom:50%;margin-left:10px" /><p>ä¿®æ”¹åï¼š</p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¿®æ”¹çˆ¶æ§ä»¶viewçš„<code>bounds</code>åï¼Œå¯¹çˆ¶æ§ä»¶çš„ä½ç½®æ²¡ä»€ä¹ˆå½±å“ï¼Œå½±å“çš„æ˜¯å­æ§ä»¶çš„ä½ç½®</p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202201171750616.png" alt="ä¿®æ”¹boundså" style="zoom:50%;margin-left:10px" /><p>æ€»ç»“ï¼š</p><ol><li>å¦‚æœæ˜¯æƒ³æ”¹å˜å½“å‰æ§ä»¶çš„å°ºå¯¸ï¼Œä½¿ç”¨å½“å‰æ§ä»¶çš„å±æ€§<code>frame</code>å’Œ<code>bounds</code>æ˜¯ç­‰æ•ˆçš„ã€‚</li><li>å¦‚æœæƒ³æ”¹å˜å½“å‰æ§ä»¶çš„ä½ç½®ï¼Œå¯ä»¥ä½¿ç”¨å½“å‰æ§ä»¶çš„<code>frame</code>å±æ€§ã€‚</li><li>å½“å‰æ§ä»¶<code>bounds</code>çš„xã€yä¸€èˆ¬ä¸º0ï¼Œä¿®æ”¹å½“å‰æ§ä»¶<code>bounds</code>çš„xã€yï¼Œä¸ä¼šå¯¹å½“å‰æ§ä»¶çš„ä½ç½®å’Œå¤§å°æœ‰ä»€ä¹ˆå½±å“ï¼Œåªä¼šå½±å“å…¶å­è§†å›¾çš„ä½ç½®ã€‚</li></ol>]]></content>
    
    
    <categories>
      
      <category>iOS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å¤‡è€ƒ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>iOS_äº‹ä»¶</title>
    <link href="/2022/01/07/iOS/%E5%A4%87%E8%80%83/UI%E8%A7%86%E5%9B%BE/iOS%20-%E4%BA%8B%E4%BB%B6/"/>
    <url>/2022/01/07/iOS/%E5%A4%87%E8%80%83/UI%E8%A7%86%E5%9B%BE/iOS%20-%E4%BA%8B%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>åœ¨iOSä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œä¼šä½¿ç”¨å„ç§å„æ ·çš„äº‹ä»¶ã€‚å…¶å¯ä»¥åˆ†ä¸ºä¸‰å¤§ç±»ï¼š</p><ol><li><p>è§¦æ‘¸äº‹ä»¶</p></li><li><p>åŠ é€Ÿè®¡äº‹ä»¶</p></li><li><p>è¿œç¨‹æ§åˆ¶äº‹ä»¶</p></li></ol><p>åœ¨æœ¬ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬å°±è¿™ä¸‰å¤§ç±»äº‹ä»¶åšä¸€ä¸ªç®€å•çš„ä»‹ç»è®°å½•ã€‚</p><h3 id="åè¯è§£é‡Š"><a href="#åè¯è§£é‡Š" class="headerlink" title="åè¯è§£é‡Š"></a>åè¯è§£é‡Š</h3><h4 id="1-å“åº”è€…å¯¹è±¡"><a href="#1-å“åº”è€…å¯¹è±¡" class="headerlink" title="1. å“åº”è€…å¯¹è±¡"></a>1. å“åº”è€…å¯¹è±¡</h4><p>åœ¨iOSä¸­ä¸æ˜¯ä»»ä½•å¯¹è±¡éƒ½èƒ½å¤„ç†äº‹ä»¶ï¼Œåªæœ‰ç»§æ‰¿äº†UIResponderçš„å¯¹è±¡æ‰èƒ½æ¥æ”¶å¹¶å¤„ç†äº‹ä»¶ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º<code>å“åº”è€…å¯¹è±¡</code>ã€‚å¸¸è§çš„æœ‰<code>UIApplication</code>ã€<code>UIViewController</code>ã€<code>UIView</code>ã€‚</p><p>UIResponderä¹‹æ‰€ä»¥èƒ½å¤Ÿå¤„ç†äº‹ä»¶æ˜¯å› ä¸ºå…¶å†…éƒ¨æä¾›ä»¥ä¸‹æ–¹æ³•ï¼š</p><ul><li><p>è§¦æ‘¸äº‹ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(nullable UIEvent *)event;<br>- (void)touchesMoved:(NSSet&lt;UITouch *&gt; *)touches withEvent:(nullable UIEvent *)event;<br>- (void)touchesEnded:(NSSet&lt;UITouch *&gt; *)touches withEvent:(nullable UIEvent *)event;<br>- (void)touchesCancelled:(NSSet&lt;UITouch *&gt; *)touches withEvent:(nullable UIEvent *)event;<br></code></pre></td></tr></table></figure></li><li><p>åŠ é€Ÿè®¡äº‹ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">- (void)motionBegan:(UIEventSubtype)motion withEvent:(nullable UIEvent *)event;<br>- (void)motionEnded:(UIEventSubtype)motion withEvent:(nullable UIEvent *)event; <br>- (void)motionCancelled:(UIEventSubtype)motion withEvent:(nullable UIEvent *)event;<br></code></pre></td></tr></table></figure></li><li><p>è¿œç¨‹æ§åˆ¶äº‹ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">- (void)remoteControlReceivedWithEvent:(nullable UIEvent *)event;<br></code></pre></td></tr></table></figure></li></ul><h4 id="2-UITouch"><a href="#2-UITouch" class="headerlink" title="2. UITouch"></a>2. UITouch</h4><p>â€‹    å½“ç”¨æˆ·ç”¨ä¸€æ ¹æ‰‹æŒ‡è§¦æ‘¸å±å¹•æ—¶ï¼Œç³»ç»Ÿä¼šåˆ›å»ºä¸€ä¸ªä¸æ‰‹æŒ‡ç›¸å…³è”çš„<code>UITouch</code>å¯¹è±¡ï¼Œä¸€æ ¹æ‰‹æŒ‡å¯¹åº”ä¸€ä¸ª<code>UITouch</code>å¯¹è±¡ã€‚</p><p>â€‹    <code>UITouch</code>å¯¹è±¡çš„ä½œç”¨ï¼š</p><ul><li>ä¿å­˜è·Ÿæ‰‹æŒ‡ç›¸å…³çš„ä¿¡æ¯ï¼Œæ¯”å¦‚è§¦æ‘¸çš„ä½ç½®ã€æ—¶é—´ã€é˜¶æ®µ</li><li>å½“æ‰‹æŒ‡ç§»åŠ¨æ—¶ï¼Œç³»ç»Ÿä¼šæ›´æ–°åŒä¸€ä¸ª<code>UITouch</code>å¯¹è±¡ï¼Œä½¿ä¹‹èƒ½å¤Ÿä¸€ç›´ä¿å­˜è¯¥æ‰‹æŒ‡æ‰€åœ¨çš„è§¦æ‘¸ä½ç½®</li><li>å½“æ‰‹æŒ‡ç¦»å¼€å±å¹•æ—¶ï¼Œç³»ç»Ÿä¼šé”€æ¯ç›¸åº”çš„<code>UITouch</code>å¯¹è±¡</li></ul><h3 id="ä¸€ã€è§¦æ‘¸äº‹ä»¶"><a href="#ä¸€ã€è§¦æ‘¸äº‹ä»¶" class="headerlink" title="ä¸€ã€è§¦æ‘¸äº‹ä»¶"></a>ä¸€ã€è§¦æ‘¸äº‹ä»¶</h3><p>å½“å‘ç”Ÿè§¦æ‘¸äº‹ä»¶åï¼Œæ•´ä¸ªäº‹ä»¶çš„äº§ç”Ÿã€ä¼ é€’ã€å“åº”å¤§è‡´æµç¨‹å¦‚ä¸‹ï¼š</p><ol><li>ç³»ç»Ÿä¼šå°†è¯¥äº‹ä»¶åŠ å…¥åˆ°ä¸€ä¸ªç”±<code>UIApplication</code>ç®¡ç†çš„äº‹ä»¶é˜Ÿåˆ—ä¸­</li><li>é€šå¸¸<code>UIApplication</code>ä¼šä»äº‹ä»¶é˜Ÿåˆ—ä¸­å–å‡ºäº‹ä»¶ï¼Œäº¤ç»™ä¸»çª—å£ï¼ˆ<code>UIWindow</code>ï¼‰å¤„ç†</li><li>ä¸»çª—å£ä¼šåœ¨è§†å›¾å±‚æ¬¡ç»“æ„ä¸­æ‰¾åˆ°ä¸€ä¸ªæœ€åˆé€‚çš„è§†å›¾æ§ä»¶æ¥å¤„ç†è§¦æ‘¸äº‹ä»¶</li><li>æ‰¾åˆ°çš„æœ€åˆé€‚çš„è§†å›¾æ§ä»¶å°†ä¼šè°ƒç”¨<code>touchs</code>æ–¹æ³•å¯¹å…·ä½“äº‹ä»¶è¿›è¡Œå¤„ç†</li><li>ä½†å¦‚æœæœ€åˆé€‚çš„è§†å›¾æ§ä»¶åœ¨<code>touchs</code>æ–¹æ³•ä¸­ä¸å¯¹äº‹ä»¶è¿›è¡Œå¤„ç†ï¼Œåˆ™äº‹ä»¶ä¼šæ²¿ç€å“åº”è€…é“¾æ¡å‘ä¸Šä¼ é€’</li><li>å½“ä¼ é€’ç»™ä¸Šä¸€ä¸ªå“åº”è€…ï¼Œå°±ä¼šè°ƒç”¨ä¸Šä¸€ä¸ªå“åº”è€…çš„<code>touchs</code>æ–¹æ³•è¿›è¡Œå¤„ç†ï¼Œä¾æ¬¡ç±»æ¨</li><li>å¦‚æœäº‹ä»¶ä¼ é€’åˆ°<code>UIApplication</code>æ—¶ï¼Œäº‹ä»¶ä»ä¸èƒ½è¢«å¤„ç†çš„è¯ï¼Œäº‹ä»¶ä¼šè¢«ä¸¢å¼ƒ</li></ol><h4 id="1-äº‹ä»¶çš„ä¼ é€’"><a href="#1-äº‹ä»¶çš„ä¼ é€’" class="headerlink" title="1. äº‹ä»¶çš„ä¼ é€’"></a>1. äº‹ä»¶çš„ä¼ é€’</h4><p>ä¸Šé¢æµç¨‹ä¸­å‰å››æ­¥å¯ä»¥å½’ä¸ºäº‹ä»¶çš„ä¼ é€’è¿‡ç¨‹ï¼Œäº‹ä»¶ä¼ é€’æ˜¯ä»çˆ¶æ§ä»¶ä¼ é€’åˆ°å­æ§ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å‚è€ƒä¸‹å›¾å¯¹å…¶æœ‰ä¸ªæ›´ç›´è§‚çš„äº†è§£ã€‚</p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202201111145794.png" alt="äº‹ä»¶ä¼ é€’æµç¨‹" style="zoom:50%;margin-left:10px" /><blockquote><p>æ³¨æ„ï¼šå¦‚æœçˆ¶æ§ä»¶ä¸èƒ½æ¥æ”¶è§¦æ‘¸äº‹ä»¶ï¼Œé‚£ä¹ˆå­æ§ä»¶ä¹Ÿä¸æ¥æ”¶èƒ½è§¦æ‘¸äº‹ä»¶</p></blockquote><h5 id="1-1-UIViewä¸èƒ½æ¥å—è§¦æ‘¸äº‹ä»¶çš„ä¸‰ç§æƒ…å†µ"><a href="#1-1-UIViewä¸èƒ½æ¥å—è§¦æ‘¸äº‹ä»¶çš„ä¸‰ç§æƒ…å†µ" class="headerlink" title="1.1 UIViewä¸èƒ½æ¥å—è§¦æ‘¸äº‹ä»¶çš„ä¸‰ç§æƒ…å†µ"></a>1.1 UIViewä¸èƒ½æ¥å—è§¦æ‘¸äº‹ä»¶çš„ä¸‰ç§æƒ…å†µ</h5><ol><li>userInteractionEnabled = NO</li><li>hidden = YES</li><li>alpha = 0 ~ 0.01</li></ol><blockquote><p>æ³¨æ„ï¼š UIImageViewçš„userInteractionEnabledé»˜è®¤ä¸ºNOï¼Œå› æ­¤UIImageViewä»¥åŠå®ƒçš„å­æ§ä»¶é»˜è®¤æ˜¯ä¸èƒ½æ¥æ”¶è§¦æ‘¸äº‹ä»¶çš„</p></blockquote><h5 id="1-2-å¦‚ä½•æ‰¾åˆ°æœ€åˆé€‚çš„æ§ä»¶æ¥å¤„ç†äº‹ä»¶"><a href="#1-2-å¦‚ä½•æ‰¾åˆ°æœ€åˆé€‚çš„æ§ä»¶æ¥å¤„ç†äº‹ä»¶" class="headerlink" title="1.2. å¦‚ä½•æ‰¾åˆ°æœ€åˆé€‚çš„æ§ä»¶æ¥å¤„ç†äº‹ä»¶"></a>1.2. å¦‚ä½•æ‰¾åˆ°æœ€åˆé€‚çš„æ§ä»¶æ¥å¤„ç†äº‹ä»¶</h5><ol><li>åˆ¤æ–­è‡ªå·±èƒ½å¦æ¥æ”¶è§¦æ‘¸äº‹ä»¶</li><li> è§¦æ‘¸ç‚¹æ˜¯å¦åœ¨è‡ªå·±èº«ä¸Š</li><li>ä»åå¾€å‰éå†å­æ§ä»¶ï¼Œé‡å¤å‰ä¸¤æ­¥æ“ä½œ</li><li>å¦‚æœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å­æ§ä»¶ï¼Œé‚£ä¹ˆå°±è‡ªå·±æœ€åˆé€‚</li></ol><p>ä»£ç ä½“ç°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">//ä½œç”¨ï¼šå¯»æ‰¾æœ€åˆé€‚çš„view<br>//è°ƒç”¨æ—¶æœºï¼šå½“ä¸€ä¸ªäº‹ä»¶ä¼ é€’ç»™å½“å‰viewçš„æ—¶å€™è°ƒç”¨<br>- (nullable UIView *)hitTest:(CGPoint)point withEvent:(nullable UIEvent *)event;//recursively calls -pointInside:withEvent:. point is in the receiver&#x27;s<br> <br>//ä½œç”¨ï¼šåˆ¤æ–­å½“å‰ç‚¹æ˜¯ä¸æ˜¯åœ¨è°ƒç”¨å®ƒçš„viewä¸Š<br>//è°ƒç”¨æ—¶æœºï¼šå®ƒæ˜¯åœ¨hitTestæ–¹æ³•ä¸­è°ƒç”¨çš„<br>- (BOOL)pointInside:(CGPoint)point withEvent:(nullable UIEvent *)event;//default returns YES if point is in bounds<br></code></pre></td></tr></table></figure><p>hitTestæ–¹æ³•çš„åº•å±‚å®ç°ï¼š </p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">hitTest</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">point</span>: <span class="hljs-type">CGPoint</span>, <span class="hljs-params">with</span> <span class="hljs-params">event</span>: <span class="hljs-type">UIEvent</span>?)</span> -&gt; <span class="hljs-type">UIView</span>? &#123;<br>     <span class="hljs-comment">//1.åˆ¤æ–­è‡ªå·±èƒ½å¦æ¥æ”¶äº‹ä»¶</span><br>     <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.isUserInteractionEnabled <span class="hljs-operator">==</span> <span class="hljs-literal">false</span> <span class="hljs-operator">||</span> <span class="hljs-keyword">self</span>.isHidden <span class="hljs-operator">==</span> <span class="hljs-literal">true</span> <span class="hljs-operator">||</span> <span class="hljs-keyword">self</span>.alpha <span class="hljs-operator">&lt;=</span> <span class="hljs-number">0.01</span> &#123;<br>         <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>     &#125;<br>     <span class="hljs-comment">//2.åˆ¤æ–­å½“å‰ç‚¹æ˜¯ä¸æ˜¯åœ¨å½“å‰view</span><br>     <span class="hljs-keyword">if</span> <span class="hljs-operator">!</span><span class="hljs-keyword">self</span>.point(inside: point, with: event) &#123;<br>         <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>     &#125;<br>     <span class="hljs-comment">//3.ä»åå¾€å‰éå†è‡ªå·±çš„å­æ§ä»¶ï¼Œè®©å­æ§ä»¶é‡å¤å‰ä¸¤æ­¥æ“ä½œ</span><br>     <span class="hljs-keyword">for</span> childV <span class="hljs-keyword">in</span> <span class="hljs-keyword">self</span>.subviews.reversed() &#123;<br>         <span class="hljs-comment">//æŠŠå½“å‰ç‚¹è½¬æ¢æˆå­æ§ä»¶åæ ‡ç³»ä¸Šçš„ç‚¹</span><br>         <span class="hljs-keyword">let</span> childP <span class="hljs-operator">=</span> <span class="hljs-keyword">self</span>.convert(point, to: childV)<br>         <span class="hljs-keyword">let</span> fitView <span class="hljs-operator">=</span> childV.hitTest(childP, with: event)<br>         <span class="hljs-keyword">if</span> fitView <span class="hljs-operator">!=</span> <span class="hljs-literal">nil</span> &#123;<br>             <span class="hljs-keyword">return</span> fitView<br>         &#125;<br>     &#125;<br>     <span class="hljs-comment">//4.æ²¡æœ‰æ‰¾åˆ°æ¯”å®ƒè‡ªå·±æ›´åˆé€‚çš„viewï¼Œé‚£ä¹ˆå®ƒè‡ªå·±å°±æ˜¯æœ€åˆé€‚çš„view</span><br>     <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span><br> &#125;<br></code></pre></td></tr></table></figure><h4 id="2-äº‹ä»¶çš„å“åº”"><a href="#2-äº‹ä»¶çš„å“åº”" class="headerlink" title="2. äº‹ä»¶çš„å“åº”"></a>2. äº‹ä»¶çš„å“åº”</h4><p>5ã€6ã€7åä¸‰æ­¥éª¤æˆ‘ä»¬å¯ä»¥å½’ä¸ºäº‹ä»¶çš„å“åº”ï¼Œäº‹ä»¶æ˜¯é¡ºç€å“åº”é“¾è€…é“¾æ¡å‘ä¸Šä¼ é€’çš„ï¼Œå®ƒä¸äº‹ä»¶ä¼ é€’çš„æ–¹å‘åˆšå¥½ç›¸åã€‚</p><h5 id="2-1-ä»€ä¹ˆæ˜¯å“åº”è€…é“¾æ¡"><a href="#2-1-ä»€ä¹ˆæ˜¯å“åº”è€…é“¾æ¡" class="headerlink" title="2.1 ä»€ä¹ˆæ˜¯å“åº”è€…é“¾æ¡"></a>2.1 ä»€ä¹ˆæ˜¯å“åº”è€…é“¾æ¡</h5><p>æœ‰å¤šä¸ªå“åº”è€…é“¾æ¥èµ·æ¥çš„é“¾æ¡</p><h5 id="2-1-å¦‚ä½•å¯»æ‰¾ä¸Šä¸€ä¸ªå“åº”è€…"><a href="#2-1-å¦‚ä½•å¯»æ‰¾ä¸Šä¸€ä¸ªå“åº”è€…" class="headerlink" title="2.1 å¦‚ä½•å¯»æ‰¾ä¸Šä¸€ä¸ªå“åº”è€…"></a>2.1 å¦‚ä½•å¯»æ‰¾ä¸Šä¸€ä¸ªå“åº”è€…</h5><ol><li>å¦‚æœå½“å‰è§†å›¾çš„<code>view</code>æ˜¯æ§åˆ¶å™¨çš„<code>view</code>ï¼Œé‚£ä¹ˆä¸Šä¸€ä¸ªå“åº”è€…å°±æ˜¯æ§åˆ¶å™¨</li><li>å¦‚æœå½“å‰è§†å›¾çš„<code>view</code>ä¸æ˜¯æ§åˆ¶å™¨çš„<code>view</code>ï¼Œé‚£ä¹ˆå®ƒçš„çˆ¶æ§ä»¶å°±æ˜¯ä¸Šä¸€ä¸ªå“åº”è€…</li><li>å¦‚æœå½“å‰è§†å›¾æ˜¯æ ¹è§†å›¾ï¼Œåˆ™ä¸Šä¸€ä¸ªå“åº”è€…æ˜¯<code>Window</code></li><li><code>Window</code>çš„ä¸Šä¸€ä¸ªå“åº”è€…æ˜¯<code>UIApplication</code></li></ol><h4 id="3-æ‰‹åŠ¿çš„ç®€å•ä½¿ç”¨"><a href="#3-æ‰‹åŠ¿çš„ç®€å•ä½¿ç”¨" class="headerlink" title="3. æ‰‹åŠ¿çš„ç®€å•ä½¿ç”¨"></a>3. æ‰‹åŠ¿çš„ç®€å•ä½¿ç”¨</h4><p>ä¸‹é¢ä¾‹å­ä¸­çš„çˆ¶è§†å›¾æ˜¯å½“å‰æ§åˆ¶å™¨çš„view</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">self</span>.view.addSubview(view)<br></code></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œç›´æ¥ä¸Šä»£ç ä»‹ç»å‡ ç§è§¦æ‘¸äº‹ä»¶ï¼š</p><h5 id="3-1-å•å‡»"><a href="#3-1-å•å‡»" class="headerlink" title="3.1 å•å‡»"></a>3.1 å•å‡»</h5><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-comment">// æ·»åŠ å•å‡»æ‰‹åŠ¿</span><br><span class="hljs-keyword">let</span> singleTapGesture <span class="hljs-operator">=</span> <span class="hljs-type">UITapGestureRecognizer</span>.<span class="hljs-keyword">init</span>(target: <span class="hljs-keyword">self</span>, action: #selector(onClickSingleTap))<br>view.addGestureRecognizer(singleTapGesture)<br><span class="hljs-comment">//å•å‡»æ‰‹åŠ¿äº‹ä»¶</span><br><span class="hljs-keyword">@objc</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">onClickSingleTap</span>(<span class="hljs-params">recognizer</span>: <span class="hljs-type">UITapGestureRecognizer</span>)</span>&#123;<br>     <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å•å‡»æ‰‹åŠ¿&quot;</span>)<br>  &#125;<br></code></pre></td></tr></table></figure><h5 id="3-2-åŒå‡»"><a href="#3-2-åŒå‡»" class="headerlink" title="3.2 åŒå‡»"></a>3.2 åŒå‡»</h5><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-comment">// æ·»åŠ åŒå‡»æ‰‹åŠ¿</span><br><span class="hljs-keyword">let</span> doubleTapGesture <span class="hljs-operator">=</span> <span class="hljs-type">UITapGestureRecognizer</span>.<span class="hljs-keyword">init</span>(target: <span class="hljs-keyword">self</span>, action: #selector(onClickDoubleTap))<br><span class="hljs-comment">/**</span><br><span class="hljs-comment">numberOfTapsRequiredï¼šåŒ¹é…æ‰€éœ€çš„è½»å‡»æ•°</span><br><span class="hljs-comment">numberOfTouchesRequired: åŒ¹é…æ‰€éœ€çš„æ‰‹æŒ‡æ•°</span><br><span class="hljs-comment">*/</span><br>doubleTapGesture.numberOfTapsRequired <span class="hljs-operator">=</span> <span class="hljs-number">2</span><br>view.addGestureRecognizer(doubleTapGesture)<br><br><span class="hljs-keyword">#warning</span> è§£å†³å•å‡»æ‰‹åŠ¿å’ŒåŒå‡»æ‰‹åŠ¿å†²çª<br><span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªä¸å¦ä¸€ä¸ªæ‰‹åŠ¿è¯†åˆ«å™¨çš„å…³ç³»ã€‚å½“ç¬¬ä¸€æ¬¡ç‚¹å‡»çš„æ—¶å€™ï¼Œå•å‡»æ‰‹åŠ¿çš„äº‹ä»¶æš‚æ—¶ä¸å¤„ç†ï¼Œåªæœ‰ç¡®å®šä¸æ˜¯åŒå‡»æ‰‹åŠ¿çš„æ—¶å€™ï¼Œæ‰å»å“åº”å•å‡»æ‰‹åŠ¿çš„äº‹ä»¶</span><br>singleTapGesture.require(toFail: doubleTapGesture)<br><br><span class="hljs-comment">//åŒå‡»æ‰‹åŠ¿çš„äº‹ä»¶</span><br><span class="hljs-keyword">@objc</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">onClickDoubleTap</span>(<span class="hljs-params">recognizer</span>: <span class="hljs-type">UITapGestureRecognizer</span>)</span>&#123;<br> <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;åŒå‡»æ‰‹åŠ¿&quot;</span>)<br>   &#125;<br></code></pre></td></tr></table></figure><h5 id="3-3-å¹³ç§»"><a href="#3-3-å¹³ç§»" class="headerlink" title="3.3 å¹³ç§»"></a>3.3 å¹³ç§»</h5><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">let</span> panGesture <span class="hljs-operator">=</span> <span class="hljs-type">UIPanGestureRecognizer</span>.<span class="hljs-keyword">init</span>(target: <span class="hljs-keyword">self</span>, action: #selector(onClickPan)<br>view.addGestureRecognizer(panGesture)<br>                                             <br><span class="hljs-keyword">@objc</span> <span class="hljs-keyword">func</span> onClickPan(recognizer: <span class="hljs-type">UIPanGestureRecognizer</span>)&#123;<br>      <span class="hljs-comment">// è·å–åç§»é‡(ç›¸å¯¹æœ€åŸå§‹çš„ä½ç½®)</span><br>      <span class="hljs-keyword">let</span> translation <span class="hljs-operator">=</span> recognizer.translation(in: <span class="hljs-keyword">self</span>.view)<br>      <span class="hljs-keyword">if</span>  <span class="hljs-keyword">let</span> view <span class="hljs-operator">=</span> recognizer.view &#123;<br> view.transform <span class="hljs-operator">=</span> view.transform.translatedBy(x: translation.x, y: translation.y)<br>       &#125;<br>       recognizer.setTranslation(<span class="hljs-type">CGPoint</span>.zero, in: <span class="hljs-keyword">self</span>.view)<br>   &#125;<br></code></pre></td></tr></table></figure><h5 id="3-4-é•¿æŒ‰"><a href="#3-4-é•¿æŒ‰" class="headerlink" title="3.4 é•¿æŒ‰"></a>3.4 é•¿æŒ‰</h5><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">let</span> longPressGesture <span class="hljs-operator">=</span> <span class="hljs-type">UILongPressGestureRecognizer</span>.<span class="hljs-keyword">init</span>(target: <span class="hljs-keyword">self</span>, action: #selector(onClickLongPress))<br>view.addGestureRecognizer(longPressGesture)<br><br><span class="hljs-comment">//é•¿æŒ‰æ‰‹åŠ¿äº‹ä»¶</span><br><span class="hljs-keyword">@objc</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">onClickLongPress</span>(<span class="hljs-params">recognizer</span>: <span class="hljs-type">UILongPressGestureRecognizer</span>)</span>&#123;<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;é•¿æŒ‰æ‰‹åŠ¿&quot;</span>)<br>  <span class="hljs-keyword">if</span> recognizer.state <span class="hljs-operator">==</span> .began &#123;<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å¼€å§‹é•¿æŒ‰&quot;</span>)<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> recognizer.state <span class="hljs-operator">==</span> .changed &#123;<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;é•¿æŒ‰æ—¶ç§»åŠ¨&quot;</span>)<br>        &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> recognizer.state <span class="hljs-operator">==</span> .ended &#123;<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ‰‹æŒ‡ç¦»å¼€&quot;</span>)<br>        &#125;<br>    &#125;<br><br></code></pre></td></tr></table></figure><h5 id="3-5-æåˆ"><a href="#3-5-æåˆ" class="headerlink" title="3.5 æåˆ"></a>3.5 æåˆ</h5><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">let</span> pinch <span class="hljs-operator">=</span> <span class="hljs-type">UIPinchGestureRecognizer</span>.<span class="hljs-keyword">init</span>(target: <span class="hljs-keyword">self</span>, action: #selector(onClickPinch))<br>view.addGestureRecognizer(pinch)<br><br><span class="hljs-keyword">@objc</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">onClickPinch</span>(<span class="hljs-params">recognizer</span>: <span class="hljs-type">UIPinchGestureRecognizer</span>)</span>&#123;<br>       <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> view <span class="hljs-operator">=</span> recognizer.view &#123;<br>           view.transform <span class="hljs-operator">=</span> view.transform.scaledBy(x: recognizer.scale, y: recognizer.scale)<br>           recognizer.scale <span class="hljs-operator">=</span> <span class="hljs-number">1</span><br>       &#125;<br>   &#125;<br></code></pre></td></tr></table></figure><h5 id="3-6-è½»æ‰«"><a href="#3-6-è½»æ‰«" class="headerlink" title="3.6 è½»æ‰«"></a>3.6 è½»æ‰«</h5><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-comment">//ä¸€ä¸ªè½»æ‰«æ‰‹åŠ¿åªèƒ½å¯¹åº”ä¸€ä¸ªæ–¹å‘</span><br><span class="hljs-keyword">let</span> swipeGesture1 <span class="hljs-operator">=</span> <span class="hljs-type">UISwipeGestureRecognizer</span>.<span class="hljs-keyword">init</span>(target: <span class="hljs-keyword">self</span>, action: #selector(onClickSwipe))<br>swipeGesture1.direction <span class="hljs-operator">=</span> .right<br>view.addGestureRecognizer(swipeGesture1)<br><span class="hljs-keyword">let</span> swipeGesture2 <span class="hljs-operator">=</span> <span class="hljs-type">UISwipeGestureRecognizer</span>.<span class="hljs-keyword">init</span>(target: <span class="hljs-keyword">self</span>, action: #selector(onClickSwipe))<br>swipeGesture2.direction <span class="hljs-operator">=</span> .left<br>view.addGestureRecognizer(swipeGesture2)<br><span class="hljs-keyword">let</span> swipeGesture3 <span class="hljs-operator">=</span> <span class="hljs-type">UISwipeGestureRecognizer</span>.<span class="hljs-keyword">init</span>(target: <span class="hljs-keyword">self</span>, action: #selector(onClickSwipe))<br>swipeGesture3.direction <span class="hljs-operator">=</span> .up<br>view.addGestureRecognizer(swipeGesture3)<br><span class="hljs-keyword">let</span> swipeGesture4 <span class="hljs-operator">=</span> <span class="hljs-type">UISwipeGestureRecognizer</span>.<span class="hljs-keyword">init</span>(target: <span class="hljs-keyword">self</span>, action: #selector(onClickSwipe))<br>swipeGesture4.direction <span class="hljs-operator">=</span> .down<br>view.addGestureRecognizer(swipeGesture4)<br><br><span class="hljs-comment">//è½»æ‰«æ‰‹åŠ¿äº‹ä»¶</span><br><span class="hljs-keyword">@objc</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">onClickSwipe</span>(<span class="hljs-params">recognizer</span>: <span class="hljs-type">UILongPressGestureRecognizer</span>)</span>&#123;<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;è½»æ‰«æ‰‹åŠ¿&quot;</span>)<br>   <span class="hljs-keyword">switch</span> recognizer.direction &#123;<br>        <span class="hljs-keyword">case</span> .left:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å‘å·¦è½»æ‰«&quot;</span>) <br>        <span class="hljs-keyword">case</span> .right:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å‘å³è½»æ‰«&quot;</span>)<br>        <span class="hljs-keyword">case</span> .up:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å‘ä¸Šè½»æ‰«&quot;</span>)<br>        <span class="hljs-keyword">case</span> .down:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å‘ä¸‹è½»æ‰«&quot;</span>)<br>        <span class="hljs-keyword">default</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;&quot;</span>)<br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure><h5 id="3-7-æ—‹è½¬"><a href="#3-7-æ—‹è½¬" class="headerlink" title="3.7 æ—‹è½¬"></a>3.7 æ—‹è½¬</h5><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">let</span> rotationGesture <span class="hljs-operator">=</span> <span class="hljs-type">UIRotationGestureRecognizer</span>.<span class="hljs-keyword">init</span>(target: <span class="hljs-keyword">self</span>, action: #selector(onClickRotation))<br>view.addGestureRecognizer(rotationGesture)<br><br><span class="hljs-comment">//æ—‹è½¬æ‰‹åŠ¿äº‹ä»¶</span><br><span class="hljs-keyword">@objc</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">onClickRotation</span>(<span class="hljs-params">recognizer</span>: <span class="hljs-type">UIRotationGestureRecognizer</span>)</span>&#123;<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ—‹è½¬æ‰‹åŠ¿&quot;</span>)<br>        <span class="hljs-keyword">if</span>  <span class="hljs-keyword">let</span> view <span class="hljs-operator">=</span> recognizer.view &#123;<br>            view.transform <span class="hljs-operator">=</span> view.transform.rotated(by: recognizer.rotation)<br>        &#125;<br>        recognizer.rotation <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br>    &#125;<br></code></pre></td></tr></table></figure><h3 id="äºŒã€åŠ é€Ÿè®¡äº‹ä»¶"><a href="#äºŒã€åŠ é€Ÿè®¡äº‹ä»¶" class="headerlink" title="äºŒã€åŠ é€Ÿè®¡äº‹ä»¶"></a>äºŒã€åŠ é€Ÿè®¡äº‹ä»¶</h3><h3 id="ä¸‰ã€è¿œç¨‹æ§åˆ¶äº‹ä»¶"><a href="#ä¸‰ã€è¿œç¨‹æ§åˆ¶äº‹ä»¶" class="headerlink" title="ä¸‰ã€è¿œç¨‹æ§åˆ¶äº‹ä»¶"></a>ä¸‰ã€è¿œç¨‹æ§åˆ¶äº‹ä»¶</h3><p>æœªå®Œå¾…ç»­â€¦â€¦</p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ol><li>å°ç å“¥è§†é¢‘UIè¿›é˜¶0121</li></ol>]]></content>
    
    
    <categories>
      
      <category>iOS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å¤‡è€ƒ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Swift_Transform</title>
    <link href="/2022/01/07/Swift/Swift-Transform/"/>
    <url>/2022/01/07/Swift/Swift-Transform/</url>
    
    <content type="html"><![CDATA[<h3 id="ä¸€ã€ç›¸å¯¹äºæœ€åŸå§‹çš„ä½ç½®å½¢å˜"><a href="#ä¸€ã€ç›¸å¯¹äºæœ€åŸå§‹çš„ä½ç½®å½¢å˜" class="headerlink" title="ä¸€ã€ç›¸å¯¹äºæœ€åŸå§‹çš„ä½ç½®å½¢å˜"></a>ä¸€ã€ç›¸å¯¹äºæœ€åŸå§‹çš„ä½ç½®å½¢å˜</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-comment">// å‘ä¸‹å¹³ç§»</span><br>view.transform <span class="hljs-operator">=</span> <span class="hljs-type">CGAffineTransform</span>.<span class="hljs-keyword">init</span>(translationX: <span class="hljs-number">0</span>, y: <span class="hljs-number">100</span>)<br><span class="hljs-comment">// æ—‹è½¬</span><br>view.transform <span class="hljs-operator">=</span> <span class="hljs-type">CGAffineTransform</span>.<span class="hljs-keyword">init</span>(rotationAngle: <span class="hljs-number">45</span>)<br><span class="hljs-comment">// ç¼©æ”¾</span><br>view.transform <span class="hljs-operator">=</span> <span class="hljs-type">CGAffineTransform</span>.<span class="hljs-keyword">init</span>(scaleX: <span class="hljs-number">1.2</span>, y: <span class="hljs-number">1.2</span>)<br></code></pre></td></tr></table></figure><h3 id="äºŒã€ç›¸å¯¹äºä¸Šä¸€æ¬¡å½¢å˜"><a href="#äºŒã€ç›¸å¯¹äºä¸Šä¸€æ¬¡å½¢å˜" class="headerlink" title="äºŒã€ç›¸å¯¹äºä¸Šä¸€æ¬¡å½¢å˜"></a>äºŒã€ç›¸å¯¹äºä¸Šä¸€æ¬¡å½¢å˜</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-comment">// å‘å³å¹³ç§»</span><br>view.transform <span class="hljs-operator">=</span> view.transform.translatedBy(x: <span class="hljs-number">100</span>, y: <span class="hljs-number">0</span>)<br><span class="hljs-comment">// æ—‹è½¬</span><br>view.transform <span class="hljs-operator">=</span> view.transform.rotated(by: <span class="hljs-number">45</span>)<br><span class="hljs-comment">// ç¼©æ”¾</span><br>view.transform <span class="hljs-operator">=</span> view.transform.scaledBy(x: <span class="hljs-number">0.8</span>, y: <span class="hljs-number">0.8</span>)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>iOS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Swift</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Swift_ç»“æ„ä½“å’Œç±»</title>
    <link href="/2021/12/21/Swift/Swift_%E7%BB%93%E6%9E%84%E4%BD%93%E5%92%8C%E7%B1%BB/"/>
    <url>/2021/12/21/Swift/Swift_%E7%BB%93%E6%9E%84%E4%BD%93%E5%92%8C%E7%B1%BB/</url>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>æœ¬ç« èŠ‚è®°å½•å°ç å“¥è§†é¢‘è®²è§£ï¼Œæ–¹ä¾¿æ¸©æ•…è€ŒçŸ¥æ–°ã€‚</p><h3 id="ä¸€ã€ç»“æ„ä½“"><a href="#ä¸€ã€ç»“æ„ä½“" class="headerlink" title="ä¸€ã€ç»“æ„ä½“"></a>ä¸€ã€ç»“æ„ä½“</h3><p>ç»“æ„ä½“å’Œç±»æ˜¯ä¸€ç§é€šç”¨åˆçµæ´»çš„ç»“æ„ï¼Œæˆä¸ºäº†äººä»¬æ„å»ºä»£ç çš„åŸºç¡€ã€‚ä½ å¯ä»¥ä½¿ç”¨å®šä¹‰å¸¸é‡ã€å˜é‡å’Œå‡½æ•°çš„è¯­æ³•ï¼Œä¸ºä½ çš„ç»“æ„ä½“å’Œç±»å®šä¹‰å±æ€§ã€æ·»åŠ æ–¹æ³•ã€‚</p><p>åœ¨Swiftæ ‡å‡†åº“ä¸­ï¼Œç»å¤§å¤šæ•°çš„å…¬å¼€ç±»å‹éƒ½æ˜¯ç»“æ„ä½“ï¼Œè€Œæšä¸¾å’Œç±»åªå å¾ˆå°ä¸€éƒ¨åˆ†</p><p>æ¯”å¦‚<code>Bool</code>ã€<code>Int</code>ã€<code>Double</code>ã€<code>String</code>ã€<code>Array</code>ã€<code>Dictionary</code>ç­‰å¸¸è§ç±»å‹éƒ½æ˜¯ç»“æ„ä½“</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Date</span> </span>&#123;<br><span class="hljs-keyword">var</span> year: <span class="hljs-type">Int</span><br><span class="hljs-keyword">var</span> month: <span class="hljs-type">Int</span><br><span class="hljs-keyword">var</span> day: <span class="hljs-type">Int</span><br>&#125;<br><span class="hljs-keyword">var</span> date <span class="hljs-operator">=</span> <span class="hljs-type">Date</span>(year:<span class="hljs-number">2021</span>, month: <span class="hljs-number">12</span>, day: <span class="hljs-number">21</span>)<br></code></pre></td></tr></table></figure><p>æ‰€æœ‰çš„ç»“æ„ä½“éƒ½æœ‰ä¸€ä¸ªç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„åˆå§‹åŒ–å™¨ï¼ˆinitializerã€åˆå§‹åŒ–æ–¹æ³•ã€æ„é€ å™¨ã€æ„é€ æ–¹æ³•ï¼‰</p><p>åœ¨ç¬¬6è¡Œè°ƒç”¨ï¼Œå¯ä»¥ä¼ å…¥æ‰€æœ‰æˆå‘˜å€¼ï¼Œç”¨ä»¥åˆå§‹åŒ–æ‰€æœ‰æˆå‘˜ï¼ˆå­˜å‚¨å±æ€§ï¼ŒStored Propertyï¼‰</p><h4 id="1-ç»“æ„ä½“çš„åˆå§‹åŒ–å™¨"><a href="#1-ç»“æ„ä½“çš„åˆå§‹åŒ–å™¨" class="headerlink" title="1. ç»“æ„ä½“çš„åˆå§‹åŒ–å™¨"></a>1. ç»“æ„ä½“çš„åˆå§‹åŒ–å™¨</h4><p>ç¼–è¯‘å™¨ä¼šæ ¹æ®æƒ…å†µï¼Œå¯èƒ½ä¼šä¸ºç»“æ„ä½“ç”Ÿæˆå¤šä¸ªåˆå§‹åŒ–å™¨ï¼Œå®—æ—¨æ˜¯ï¼š<strong>ä¿è¯æ‰€æœ‰æˆå‘˜éƒ½æœ‰åˆå§‹å€¼</strong></p><p>åªæœ‰ç¬¬ä¸€è¡Œç”Ÿæˆçš„åˆå§‹åŒ–å™¨æ˜¯å¯¹çš„</p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202112211059534.png" alt="åˆå§‹åŒ–å™¨" style="zoom: 40%;margin-left:10px" /><p>ç¬¬äº”è¡Œå’Œç¬¬ä¸ƒè¡Œç”Ÿæˆçš„åˆå§‹åŒ–å™¨éƒ½æ˜¯å¯¹çš„</p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202112211102717.png" alt="å¤šä¸ªåˆå§‹åŒ–å™¨" style="zoom:40%;margin-left:10px" /><h4 id="2-è‡ªå®šä¹‰åˆå§‹åŒ–å™¨"><a href="#2-è‡ªå®šä¹‰åˆå§‹åŒ–å™¨" class="headerlink" title="2. è‡ªå®šä¹‰åˆå§‹åŒ–å™¨"></a>2. è‡ªå®šä¹‰åˆå§‹åŒ–å™¨</h4><p>ä¸€æ—¦å®šä¹‰ç»“æ„ä½“æ—¶è‡ªå®šä¹‰äº†åˆå§‹åŒ–å™¨ï¼Œç¼–è¯‘å™¨å°±ä¸ä¼šå†å¸®å®ƒè‡ªåŠ¨ç”Ÿæˆåˆå§‹åŒ–å™¨ï¼Œæ‰€ä»¥å¯ä»¥çœ‹åˆ°ï¼Œå³ä½¿æˆå‘˜éƒ½æœ‰åˆå§‹åŒ–å€¼ï¼Œåé¢æ–¹æ³•ä¹Ÿæ˜¯ä¼šæŠ¥é”™çš„ã€‚</p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202112211117024.png" alt="è‡ªå®šä¹‰åˆå§‹åŒ–å™¨" style="zoom: 40%; margin-left: 10px;" /><h3 id="äºŒã€ç±»"><a href="#äºŒã€ç±»" class="headerlink" title="äºŒã€ç±»"></a>äºŒã€ç±»</h3><p>ç±»çš„å®šä¹‰å’Œç»“æ„ä½“ç±»ä¼¼ï¼Œä½†ç¼–è¯‘å™¨å¹¶æ²¡æœ‰ä¸ºç±»è‡ªåŠ¨ç”Ÿæˆå¯ä»¥ä¼ å…¥æˆå‘˜å€¼çš„åˆå§‹åŒ–å™¨ ã€‚</p><p>å¦‚ä¸‹å›¾ï¼Œå¦‚æœç±»çš„æ‰€æœ‰æˆå‘˜éƒ½åœ¨å®šä¹‰çš„æ—¶å€™æŒ‡å®šäº†åˆå§‹å€¼ï¼Œç¼–è¯‘å™¨ä¼šä¸ºç±»ç”Ÿæˆæ— å‚çš„åˆå§‹åŒ–å™¨ã€‚</p><blockquote><p>æˆå‘˜çš„åˆå§‹åŒ–æ˜¯åœ¨è¿™ä¸ªåˆå§‹åŒ–å™¨ä¸­å®Œæˆçš„</p></blockquote><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202112211145960.png" alt="ç±»" style="zoom:40%;margin-left:10px" /><p>å¦‚ä¸‹å›¾ï¼Œå¦‚æœç±»çš„æˆå‘˜æ²¡æœ‰éƒ½æŒ‡å®šåˆå§‹åŒ–å€¼ï¼Œæ— å‚çš„åˆå§‹åŒ–å™¨ç¼–è¯‘å™¨ä¹Ÿä¸ä¼šç”Ÿæˆã€‚</p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202112211151314.png" alt="ç±»" style="zoom:40%;margin-left:10px" /><h3 id="ä¸‰ã€ç»“æ„ä½“å’Œç±»çš„åŒºåˆ«"><a href="#ä¸‰ã€ç»“æ„ä½“å’Œç±»çš„åŒºåˆ«" class="headerlink" title="ä¸‰ã€ç»“æ„ä½“å’Œç±»çš„åŒºåˆ«"></a>ä¸‰ã€ç»“æ„ä½“å’Œç±»çš„åŒºåˆ«</h3><p>ç»“æ„ä½“æ˜¯å€¼ç±»å‹ï¼ˆæšä¸¾ä¹Ÿæ˜¯å€¼ç±»å‹ï¼‰ï¼Œç±»æ˜¯å¼•ç”¨ç±»å‹ï¼ˆæŒ‡é’ˆç±»å‹ï¼‰</p><p>å€¼ç±»å‹åœ¨å‡½æ•°é‡Œé¢è°ƒç”¨çš„å†…å­˜ç©ºé—´åœ¨æ ˆé‡Œé¢ </p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Size</span> </span>&#123;<br>  <span class="hljs-keyword">var</span> width <span class="hljs-operator">=</span> <span class="hljs-number">1</span><br>  <span class="hljs-keyword">var</span> height <span class="hljs-operator">=</span> <span class="hljs-number">1</span><br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Point</span> </span>&#123;<br>  <span class="hljs-keyword">var</span> x <span class="hljs-operator">=</span> <span class="hljs-number">3</span> <br>  <span class="hljs-keyword">var</span> y <span class="hljs-operator">=</span> <span class="hljs-number">4</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">test</span>()</span>&#123;<br>  <span class="hljs-keyword">var</span> size <span class="hljs-operator">=</span> <span class="hljs-type">Size</span>()<span class="hljs-comment">// sizeæ˜¯æŒ‡é’ˆå˜é‡ï¼ŒæŒ‡é’ˆå˜é‡çš„å†…å­˜åœ°å€æ˜¯åœ¨æ ˆç©ºé—´</span><br>  <span class="hljs-keyword">var</span> point <span class="hljs-operator">=</span> <span class="hljs-type">Point</span>()<br>&#125;<br><br></code></pre></td></tr></table></figure><p><strong>æ ˆç©ºé—´</strong></p><table><thead><tr><th>å†…å­˜åœ°å€</th><th>å†…å­˜æ•°æ®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>0x10000</td><td>3</td><td>point.x</td></tr><tr><td>0x10008</td><td>4</td><td>point.y</td></tr><tr><td>0x10010</td><td>0x90000</td><td>Sizeå¯¹è±¡çš„å†…å­˜åœ°å€</td></tr></tbody></table><p><strong>å †ç©ºé—´</strong></p><table><thead><tr><th>å†…å­˜åœ°å€</th><th>å†…å­˜æ•°æ®</th><th align="center"></th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>09x0000</td><td>0xe41e8</td><td align="center"></td><td>æŒ‡å‘ç±»å‹ä¿¡æ¯</td></tr><tr><td>09x0008</td><td>0x20002</td><td align="center">Sizeå¯¹è±¡</td><td>å¼•ç”¨è®¡æ•°</td></tr><tr><td>09x0010</td><td>1</td><td align="center"></td><td>size.width</td></tr><tr><td>09x0018</td><td>2</td><td align="center"></td><td>size.height</td></tr></tbody></table><blockquote><p>ä»¥ä¸Šæ˜¯é’ˆå¯¹çš„64ä½ç¯å¢ƒ</p></blockquote><blockquote><p>å¯ä»¥æ ¹æ®æ˜¯å¦è°ƒç”¨<strong>allocã€malloc</strong>å‡½æ•°åˆ¤æ–­æ˜¯å¦æ˜¯åœ¨å †ç©ºé—´</p></blockquote><h3 id="å››ã€å€¼ç±»å‹"><a href="#å››ã€å€¼ç±»å‹" class="headerlink" title="å››ã€å€¼ç±»å‹"></a>å››ã€å€¼ç±»å‹</h3><ul><li><p>å€¼ç±»å‹æ˜¯è¿™æ ·ä¸€ç§ç±»å‹ï¼Œå½“å®ƒè¢«èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡(var)ã€å¸¸é‡(let)æˆ–è€…è¢«ä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œæ˜¯ç›´æ¥å°†æ‰€æœ‰å†…å®¹æ‹·è´ä¸€ä»½ï¼Œå±äºæ·±æ‹·è´ã€‚</p></li><li><p>åœ¨Swiftæ ‡å‡†åº“ä¸­ï¼ˆè‡ªå·±å®šä¹‰çš„æ²¡æœ‰ï¼‰ï¼Œä¸ºäº†æå‡æ€§èƒ½ï¼Œ<code>String</code>ã€<code>Array</code>ã€<code>Dictionary</code>ã€<code>Set</code>ç­‰é‡‡ç”¨äº†Copy on WriteæŠ€æœ¯ã€‚æ‹·è´çš„æ—¶å€™ï¼Œæ–°é›†åˆä¸ä¼šç«‹å³æ‹·è´ï¼Œè€Œæ˜¯è·ŸåŸé›†åˆå…±äº«ä¸€ä»½å†…å­˜ï¼Œå…±äº«åŒæ ·çš„å…ƒç´ ã€‚åªæœ‰å½“æœ‰â€å†™â€œç­‰ä¿®æ”¹æ“ä½œçš„æ—¶å€™ï¼Œæ‰ä¼šçœŸæ­£æ‰§è¡Œæ‹·è´æ“ä½œã€‚ </p></li></ul><h3 id="äº”ã€å¼•ç”¨ç±»å‹"><a href="#äº”ã€å¼•ç”¨ç±»å‹" class="headerlink" title="äº”ã€å¼•ç”¨ç±»å‹"></a>äº”ã€å¼•ç”¨ç±»å‹</h3><p> ä¸å€¼ç±»å‹ä¸åŒï¼Œ<em>å¼•ç”¨ç±»å‹</em>åœ¨è¢«èµ‹äºˆåˆ°ä¸€ä¸ªå˜é‡ï¼ˆvarï¼‰ã€å¸¸é‡(let)æˆ–è€…è¢«ä¼ é€’åˆ°ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå…¶å€¼ä¸ä¼šè¢«æ‹·è´ï¼Œè€Œæ˜¯å°†å†…å­˜åœ°å€æ‹·è´ä¸€ä»½ï¼Œå±äºæµ…æ‹·è´ã€‚ </p><h3 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h3><ul><li><a href="http://www.swift51.com/swift5.1/02_language_guide/09_Structures_And_Classes.html">Swift5.1æ•™ç¨‹</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>iOS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Swift</tag>
      
      <tag>Swiftå­¦ä¹ </tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>iOSå¾®ä¿¡ç™»å½•æ¥å…¥</title>
    <link href="/2021/12/17/iOS/iOS%E5%BE%AE%E4%BF%A1%E7%99%BB%E5%BD%95%E6%8E%A5%E5%85%A5/"/>
    <url>/2021/12/17/iOS/iOS%E5%BE%AE%E4%BF%A1%E7%99%BB%E5%BD%95%E6%8E%A5%E5%85%A5/</url>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>è®°å½•ä¸‹å¾®ä¿¡ç™»å½•æ¥å…¥æµç¨‹ï¼ŒåŠ æ·±ä¸€ä¸‹å°è±¡ï¼Œä¹Ÿæ–¹ä¾¿æœ‰éœ€è¦çš„åŒå­¦å€Ÿé‰´ã€‚</p><h3 id="ä¸€ã€åˆ›å»ºç§»åŠ¨åº”ç”¨ï¼Œé…ç½®Universal-Linksï¼Œç”ŸæˆAppIDå’ŒAppSecret"><a href="#ä¸€ã€åˆ›å»ºç§»åŠ¨åº”ç”¨ï¼Œé…ç½®Universal-Linksï¼Œç”ŸæˆAppIDå’ŒAppSecret" class="headerlink" title="ä¸€ã€åˆ›å»ºç§»åŠ¨åº”ç”¨ï¼Œé…ç½®Universal Linksï¼Œç”ŸæˆAppIDå’ŒAppSecret"></a>ä¸€ã€åˆ›å»ºç§»åŠ¨åº”ç”¨ï¼Œé…ç½®<strong>Universal Links</strong>ï¼Œç”Ÿæˆ<strong>AppID</strong>å’Œ<strong>AppSecret</strong></h3><p>æ¥å…¥å¾®ä¿¡ç™»å½•ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åˆ° <a href="https://open.weixin.qq.com/cgi-bin/applist?t=manage/list&page=0&num=20&openapptype=1&lang=zh_CN&token=9244e6c7962f9dd4639de8a47754096f87defeeb">å¾®ä¿¡å¼€æ”¾å¹³å°</a> çš„ç®¡ç†ä¸­å¿ƒåˆ›å»ºç§»åŠ¨åº”ç”¨ï¼Œæ¥è·å–æˆ‘ä»¬ä¹‹åä¼šç”¨åˆ°çš„<strong>AppID</strong>ï¼Œä»¥åŠç»™åå°ä½¿ç”¨ï¼Œç”¨äºè·å–<strong>Token</strong>çš„<strong>AppSecret</strong>ã€‚</p><p>åˆ›å»ºç§»åŠ¨åº”ç”¨æµç¨‹å¦‚ä¸‹ï¼š</p><ul><li><p>æ ¹æ®è‡ªèº«æƒ…å†µå¡«å†™åŸºæœ¬ä¿¡æ¯</p></li><li><p>å¡«å†™æˆ‘ä»¬åº”ç”¨ç›¸å…³ä¿¡æ¯ï¼Œé…ç½®<strong>Universal Links</strong>ï¼ˆè¿™é‡Œæ˜¯ä»¥iOSåº”ç”¨ä¸ºä¾‹çš„ï¼‰ï¼Œå¦‚æœä¸çŸ¥é“æ€ä¹ˆé…ç½®å¯ä»¥åé¢è¡¥å……é…ç½®</p><blockquote><p>Universal Linksæ˜¯è‹¹æœè‡ªiOS9.0æ¨å‡ºçš„ç”¨äºåº”ç”¨ä¹‹é—´è·³è½¬çš„ä¸€ç§å®‰å…¨è®¤è¯æœºåˆ¶ï¼Œæ”¯æŒé€šè¿‡ä¼ ç»ŸHTTPSé“¾æ¥æ¥å¯åŠ¨APP</p></blockquote></li><li><p>æäº¤å®¡æ ¸ï¼Œä¸€èˆ¬ä¸€åˆ°ä¸ƒä¸ªå·¥ä½œæ—¥ä¹‹å†…è¿‡å®¡, å®¡æ ¸æˆåŠŸåä¼šç”Ÿæˆ<strong>AppID</strong>å’Œ<strong>AppSecret</strong></p><blockquote><p>æ³¨æ„ï¼šApp Secreté—å¿˜ä¸èƒ½æ‰¾å›ï¼Œéœ€è¦é‡ç½®</p></blockquote></li></ul><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202112201448838.png" alt="åˆ›å»ºåº”ç”¨"></p><h3 id="äºŒã€-ç¡®è®¤å¾®ä¿¡å’Œæˆ‘ä»¬è‡ªå·±çš„Appçš„Universal-Linksèƒ½æ­£å¸¸ä½¿ç”¨"><a href="#äºŒã€-ç¡®è®¤å¾®ä¿¡å’Œæˆ‘ä»¬è‡ªå·±çš„Appçš„Universal-Linksèƒ½æ­£å¸¸ä½¿ç”¨" class="headerlink" title="äºŒã€ ç¡®è®¤å¾®ä¿¡å’Œæˆ‘ä»¬è‡ªå·±çš„Appçš„Universal Linksèƒ½æ­£å¸¸ä½¿ç”¨"></a>äºŒã€ ç¡®è®¤å¾®ä¿¡å’Œæˆ‘ä»¬è‡ªå·±çš„Appçš„<strong>Universal Links</strong>èƒ½æ­£å¸¸ä½¿ç”¨</h3><h5 id="1-ç¡®è®¤å¾®ä¿¡Universal-Links-æ­£å¸¸"><a href="#1-ç¡®è®¤å¾®ä¿¡Universal-Links-æ­£å¸¸" class="headerlink" title="1. ç¡®è®¤å¾®ä¿¡Universal Links æ­£å¸¸"></a>1. ç¡®è®¤å¾®ä¿¡<strong>Universal Links</strong> æ­£å¸¸</h5><p>Safariè¾“å…¥</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">https://help.wechat.com/app/ <br></code></pre></td></tr></table></figure><p>æ­£å¸¸æƒ…å†µä¸‹ä¼šå‡ºç°å¦‚ä¸‹å›¾</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202112201534727.png" alt="æ‰“å¼€å¾®ä¿¡é€šä¿¡æ­£å¸¸"></p><h5 id="2-ç¡®è®¤Appçš„Universal-Linksé…ç½®æˆåŠŸ"><a href="#2-ç¡®è®¤Appçš„Universal-Linksé…ç½®æˆåŠŸ" class="headerlink" title="2. ç¡®è®¤Appçš„Universal Linksé…ç½®æˆåŠŸ"></a>2. ç¡®è®¤Appçš„<strong>Universal Links</strong>é…ç½®æˆåŠŸ</h5><ul><li><p>å¼€å‘è€…å®˜ç½‘é…ç½®<strong>Associated Domains</strong></p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202112201606848.png" alt="æ‰“å¼€Domainsé€‰é¡¹"></p></li><li><p>æœåŠ¡å™¨é…ç½®<strong>apple-app-site-association</strong></p><p>åœ¨hoståŸŸåå¯¹åº”çš„æœåŠ¡å™¨çš„.well-knownç›®å½•ä¸‹é¢æ–°å»ºä¸€ä¸ªjsonæ–‡ä»¶ï¼Œå‘½åä¸º<strong>apple-app-site-association</strong>ï¼Œä¸éœ€è¦.jsonåç¼€</p><p><strong>apple-app-site-association</strong>æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>    <span class="hljs-attr">&quot;applinks&quot;</span>: &#123;<br>        <span class="hljs-attr">&quot;apps&quot;</span>: [],<br>        <span class="hljs-attr">&quot;details&quot;</span>: [&#123;<br>            <span class="hljs-attr">&quot;appID&quot;</span>: <span class="hljs-string">&quot;teamID.com.BundleID&quot;</span>,<span class="hljs-comment">//teamID ä¸ºå¼€å‘è€…è´¦æˆ·çš„teamID </span><br>            <span class="hljs-attr">&quot;paths&quot;</span>: [<span class="hljs-string">&quot;/app/*&quot;</span>] <span class="hljs-comment">// å¦‚æœåŒä¸€hostä¸‹æœ‰å¤šä¸ªapp,åŒºåˆ†åŒä¸€hostä¸‹ä¸åŒappçš„è·³è½¬</span><br>            &#125;]<br>        &#125;<br> &#125;<br></code></pre></td></tr></table></figure></li><li><p>Xcode æ·»åŠ <strong>Associated Domains</strong></p><p>æ‰“å¼€é¡¹ç›®ï¼Œåœ¨Target -&gt;Sigining&amp;Capabilitiesä¸­ç‚¹å‡»å·¦ä¸Šè§’çš„**+Capability<strong>ï¼ŒåŒå‡»æ·»åŠ </strong>Associated Domains**</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202112201609801.png" alt="Xcodeæ·»åŠ Domains"></p><p>å‡è®¾æˆ‘ä»¬çš„hostä¸º<code>b.cc.com</code>é‚£ä¹ˆæˆ‘ä»¬<strong>Associated Domains</strong>åº”è¯¥å†™æˆå¦‚ä¸‹å›¾applinks:å¼€å¤´çš„å½¢å¼</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202112201757671.png" alt="AssociatedDomainsæ ¼å¼"></p></li></ul><p>è¾“å…¥Safarçš„Universal Linksæ£€æµ‹:</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs http">https://b.cc.com/app/<br></code></pre></td></tr></table></figure><h3 id="ä¸‰ã€å·¥ç¨‹è®¾ç½®"><a href="#ä¸‰ã€å·¥ç¨‹è®¾ç½®" class="headerlink" title="ä¸‰ã€å·¥ç¨‹è®¾ç½®"></a>ä¸‰ã€å·¥ç¨‹è®¾ç½®</h3><ol><li><p>æ·»åŠ <strong>Url Scheme</strong></p><p>é€‰ä¸­TARGETSä¸€æ ï¼Œåœ¨infoæ ‡ç­¾æ çš„URL typeæ·»åŠ <strong>URL scheme</strong>ä¸ºä½ æ‰€æ³¨å†Œçš„åº”ç”¨ç¨‹åº AppIdï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå›¾ç‰‡æ¥è‡ª<a href="https://developers.weixin.qq.com/doc/oplatform/Mobile_App/Access_Guide/iOS.html">å®˜ç½‘</a>ï¼‰</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202112201713114.png" alt="æ·»åŠ scheme"></p></li><li><p><strong>LSApplicationQueriesSchemes</strong>æ·»åŠ <strong>weixin</strong> å’Œ<strong>weixinULAPI</strong></p><p>é€‰ä¸­TARGETSä¸€æ ï¼Œåœ¨ infoæ ‡ç­¾æ çš„<strong>LSApplicationQueriesSchemes</strong>æ·»åŠ <strong>weixin</strong> å’Œ<strong>weixinULAPI</strong>ï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå›¾ç‰‡æ¥è‡ª<a href="https://developers.weixin.qq.com/doc/oplatform/Mobile_App/Access_Guide/iOS.html">å®˜ç½‘</a>ï¼‰</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202112201716436.png" alt="é…ç½®QueriesScheme"></p></li></ol><h3 id="ä¸‰ã€é›†æˆSDK"><a href="#ä¸‰ã€é›†æˆSDK" class="headerlink" title="ä¸‰ã€é›†æˆSDK"></a>ä¸‰ã€é›†æˆSDK</h3><p>è¿™é‡Œæˆ‘é‡‡ç”¨çš„æ˜¯é€šè¿‡Cocaopodsé›†æˆ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">pod &#x27;WechatOpenSDK&#x27;<br></code></pre></td></tr></table></figure><h3 id="å››ã€æˆæƒåŸç†ä»‹ç»"><a href="#å››ã€æˆæƒåŸç†ä»‹ç»" class="headerlink" title="å››ã€æˆæƒåŸç†ä»‹ç»"></a>å››ã€æˆæƒåŸç†ä»‹ç»</h3><ol><li><p>ç¬¬ä¸‰æ–¹å‘èµ·å¾®ä¿¡æˆæƒç™»å½•è¯·æ±‚ï¼Œå¾®ä¿¡ç”¨æˆ·å…è®¸æˆæƒç¬¬ä¸‰æ–¹åº”ç”¨åï¼Œå¾®ä¿¡ä¼šæ‹‰èµ·åº”ç”¨æˆ–é‡å®šå‘åˆ°ç¬¬ä¸‰æ–¹ç½‘ç«™ï¼Œå¹¶ä¸”å¸¦ä¸Šæˆæƒä¸´æ—¶ç¥¨æ®codeå‚æ•°ï¼›</p></li><li><p>é€šè¿‡codeå‚æ•°åŠ ä¸ŠAppIDå’ŒAppSecretç­‰ï¼Œé€šè¿‡APIæ¢å–access_tokenï¼›</p></li><li><p>é€šè¿‡access_tokenè¿›è¡Œæ¥å£è°ƒç”¨ï¼Œè·å–ç”¨æˆ·åŸºæœ¬æ•°æ®èµ„æºæˆ–å¸®åŠ©ç”¨æˆ·å®ç°åŸºæœ¬æ“ä½œã€‚</p></li></ol><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202112201720821.png" alt="æˆæƒæµç¨‹"></p><h3 id="äº”ã€é›†æˆå¾®ä¿¡ç™»å½•ä»£ç "><a href="#äº”ã€é›†æˆå¾®ä¿¡ç™»å½•ä»£ç " class="headerlink" title="äº”ã€é›†æˆå¾®ä¿¡ç™»å½•ä»£ç "></a>äº”ã€é›†æˆå¾®ä¿¡ç™»å½•ä»£ç </h3><p>åœ¨éœ€è¦ç”¨åˆ°å¾®ä¿¡ç™»å½•APIçš„åœ°æ–¹ import WXApi.h å¤´æ–‡ä»¶ï¼Œéœ€è¦ç”¨åˆ°ä»£ç†åè®®çš„åœ°æ–¹å¹¶å¢åŠ  WXApiDelegate åè®®ã€‚å¦‚ä¸‹å›¾:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">#import &lt;UIKit/UIKit.h&gt;<br>#import &quot;WXApi.h&quot;<br><br>@interface AppDelegate : UIResponder&lt;UIApplicationDelegate, WXApiDelegate&gt;<br><br>@property (strong, nonatomic) UIWindow *window;<br><br>@end<br><br><br></code></pre></td></tr></table></figure><p>é¡¹ç›®ä¸­å¾®ä¿¡ç™»å½•éœ€è¦æ·»åŠ çš„ä»£ç ï¼š</p><ol><li><p>åœ¨appå¾®ä¿¡ç™»å½•ç‚¹å‡»äº‹ä»¶ä¸­</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">if ([WXApi isWXAppInstalled]) &#123;<br>        SendAuthReq *req = [[SendAuthReq alloc] init];<br>        //ç”¨äºä¿æŒè¯·æ±‚å’Œå›è°ƒçš„çŠ¶æ€ï¼Œæˆæƒè¯·æ±‚æˆ–åŸæ ·å¸¦å›<br>        req.state = @&quot;wx_auth_state&quot;;<br>        //æˆæƒä½œç”¨åŸŸï¼šè·å–ç”¨æˆ·ä¸ªäººä¿¡æ¯<br>        req.scope = @&quot;snsapi_userinfo&quot;;<br>        //å”¤èµ·å¾®ä¿¡<br>        [WXApi sendReq:req completion:^(BOOL success) &#123;<br>            if (success) &#123;<br>                NSLog(@&quot;å”¤é†’å¾®ä¿¡æˆåŠŸ&quot;);<br>            &#125;<br>        &#125;];<br>    &#125;else&#123;<br>        // æé†’ç”¨æˆ·å®‰è£…å¾®ä¿¡<br>  NSLog(@&quot;æœªå®‰è£…å¾®ä¿¡åº”ç”¨æˆ–ç‰ˆæœ¬è¿‡ä½&quot;);<br>    &#125;<br></code></pre></td></tr></table></figure></li><li><p>AppDelegateä¸­</p><ul><li><p>åœ¨ AppDelegate çš„ didFinishLaunchingWithOptions å‡½æ•°ä¸­å‘å¾®ä¿¡æ³¨å†Œ id</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123;<br>    //å‘å¾®ä¿¡æ³¨å†Œ<br>    [WXApi registerApp:APP_ID universalLink:UNIVERSAL_LINK];<br>    return YES;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>é‡å†™ AppDelegate çš„ handleOpenURL å’Œ openURL æ–¹æ³•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// iOS 9ä¹‹å‰<br>- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url &#123;<br>    return  [WXApi handleOpenURL:url delegate:self];<br>&#125;<br><br>- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation &#123;<br>    return [WXApi handleOpenURL:url delegate:self];<br>&#125;<br>// iOS 9ä¹‹å<br>- (BOOL)application:(UIApplication *)app openURL:(NSURL *)url options:(NSDictionary&lt;NSString*, id&gt; *)options<br>&#123;<br>  if [url.host isEqualToString:@&quot;oauth&quot;])&#123;<br>        return [WXApi handleOpenURL:url delegate:self];<br>    &#125;<br>return YES;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>é‡å†™AppDelegateæˆ–SceneDelegateçš„continueUserActivityæ–¹æ³•ï¼š(æ³¨æ„ï¼šé€‚é…äº†SceneDelegateçš„Appï¼Œç³»ç»Ÿå°†ä¼šå›è°ƒSceneDelegateçš„continueUserActivityæ–¹æ³•ï¼Œæ‰€ä»¥éœ€è¦é‡å†™SceneDelegateçš„è¯¥æ–¹æ³•ã€‚)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">//AppDelegate:<br>- (BOOL)application:(UIApplication *)application continueUserActivity:(NSUserActivity *)userActivity restorationHandler:(void(^)(NSArray&lt;id&lt;UIUserActivityRest<br>oring&gt;&gt; * __nullable restorableObjects))restorationHandler &#123;<br>    return [WXApi handleOpenUniversalLink:userActivity delegate:self];<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">//SceneDelegate:<br>- (void)scene:(UIScene *)scene continueUserActivity:(NSUserActivity *)userActivity &#123;<br>    [WXApi handleOpenUniversalLink:userActivity delegate:self];<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>å®ç° WXApiDelegate åè®®çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œæ¥å—å¾®ä¿¡ç™»å½•å›è°ƒç»“æœ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// æ˜¯å¾®ä¿¡ç»ˆç«¯å‘ç¬¬ä¸‰æ–¹ç¨‹åºå‘èµ·è¯·æ±‚ï¼Œè¦æ±‚ç¬¬ä¸‰æ–¹ç¨‹åºå“åº”ã€‚ç¬¬ä¸‰æ–¹ç¨‹åºå“åº”å®Œåå¿…é¡»è°ƒç”¨ sendRsp è¿”å›ã€‚åœ¨è°ƒç”¨ sendRsp è¿”å›æ—¶ï¼Œä¼šåˆ‡å›åˆ°å¾®ä¿¡ç»ˆç«¯ç¨‹åºç•Œé¢ã€‚<br>-(void) onReq:(BaseReq*)reqonReq&#123;<br><br>&#125;<br>// å¦‚æœç¬¬ä¸‰æ–¹ç¨‹åºå‘å¾®ä¿¡å‘é€äº† sendReq çš„è¯·æ±‚ï¼Œé‚£ä¹ˆ onResp ä¼šè¢«å›è°ƒã€‚sendReq è¯·æ±‚è°ƒç”¨åï¼Œä¼šåˆ‡åˆ°å¾®ä¿¡ç»ˆç«¯ç¨‹åºç•Œé¢ã€‚<br>-(void) onResp:(BaseResp*)resp&#123;<br>if ([resp isMemberOfClass:[SendAuthResp class]]) &#123;<br>        SendAuthResp *aresp = (SendAuthResp *)resp;<br>    if (aresp.errCode != 0 ) &#123;<br>        dispatch_async(dispatch_get_main_queue(), ^&#123;<br>NSLog(@&quot;å¾®ä¿¡æˆæƒå¤±è´¥&quot;);<br>       &#125;);<br>         return;<br>    &#125;<br>    //æˆæƒæˆåŠŸè·å–è·å–code<br>    NSString *code = aresp.code;<br>     //å‘é€é€šçŸ¥ åœ¨éœ€è¦codeçš„ç•Œé¢æ¥æ”¶é€šçŸ¥<br>   [[NSNotificationCenter defaultCenter]postNotificationName:@&quot;WXCODE&quot; object:nil userInfo:@&#123;@&quot;code&quot;:code&#125;];<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æ ¹æ®ä¸Šé¢æ­¥éª¤æ‹¿åˆ°codeåï¼Œå°†codeä¼ é€’ç»™åå°ï¼Œè®©åå°æ ¹æ®å¾®ä¿¡APIå»è·å–ç”¨æˆ·ç›¸å…³ä¿¡æ¯ç­‰å°±å¥½ã€‚</p></li></ul></li></ol><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://developers.weixin.qq.com/doc/oplatform/Mobile_App/Access_Guide/iOS.html">iOS æ¥å…¥æŒ‡å—</a></p><p><a href="https://www.jianshu.com/p/1910ea1fe8f6">iOSé…ç½®Universal Links</a></p>]]></content>
    
    
    <categories>
      
      <category>iOS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Third</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿ç”¨Actionså°†Hexoè‡ªåŠ¨åŒ–éƒ¨ç½²åˆ°gh-page</title>
    <link href="/2021/12/16/Hexo/%E4%BD%BF%E7%94%A8Actios%E5%B0%86Hexo%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E5%88%B0gh-page/"/>
    <url>/2021/12/16/Hexo/%E4%BD%BF%E7%94%A8Actios%E5%B0%86Hexo%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E5%88%B0gh-page/</url>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>ä¹‹å‰æ ¹æ®Hexoå®˜ç½‘æç¤ºï¼Œä½¿ç”¨çš„Traviså®ç°çš„è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œå½“æ—¶æ„Ÿè§‰å¾ˆNiceï¼Œä½†æ˜¯å¥½æ™¯ä¸é•¿ï¼Œæœ€è¿‘éƒ¨ç½²çš„æ—¶å€™çªç„¶å‘ç°å½“ä»£ç æäº¤åï¼ŒTraviså¹¶æ²¡æœ‰éƒ¨ç½²æˆåŠŸã€‚è¿›å»çœ‹äº†ä¹‹åï¼ŒTraviså·²ç»ä¸å†å…è´¹äº†ã€‚æœ¬æ¥æƒ³ç€ç¨å¾®ä»˜ç‚¹é’±ç»§ç»­ä½¿ç”¨ï¼Œæ¯•ç«Ÿäººå®¶ä¹Ÿä¸å®¹æ˜“ã€‚ä½†æ˜¯çœ‹åˆ°æ”¶è´¹æ ‡å‡†çš„æ—¶å€™ï¼ŒæˆåŠŸæŠŠæˆ‘åŠé€€äº†ã€‚äºæ˜¯å°±æ‰¾åˆ°äº†Actionsæ›¿ä»£Traviså®ç°è‡ªåŠ¨åŒ–éƒ¨ç½²ã€‚è¿™é‡Œç®€å•è®°å½•ä¸‹Actionsçš„ä½¿ç”¨è¿‡ç¨‹ã€‚</p><blockquote><p>æœ¬æ–‡ä¸»è¦æ‘˜è‡ªå‚è€ƒæ–‡ç« ç¬¬ä¸€ç¯‡ï¼Œå¤§ç¥å†™çš„å¾ˆå®Œç¾ã€‚</p></blockquote><h3 id="ä¸€ã€åˆ›å»ºGitHubä»“åº“"><a href="#ä¸€ã€åˆ›å»ºGitHubä»“åº“" class="headerlink" title="ä¸€ã€åˆ›å»ºGitHubä»“åº“"></a>ä¸€ã€åˆ›å»ºGitHubä»“åº“</h3><p>åˆ›å»ºä¸¤ä¸ªGitHubä»“åº“ï¼š</p><ol><li><p>ç§æœ‰ä»“åº“ï¼Œç”¨äºå­˜å‚¨hexoé¡¹ç›®æºä»£ç ï¼ˆå½“ç„¶ä½ æƒ³å…¬å¼€ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ï¼‰</p></li><li><p>å…¬æœ‰ä»“åº“ï¼Œç”¨äºå­˜å‚¨hexo build åçš„é™æ€æ–‡ä»¶ï¼Œé…ç½®gh-page siteã€‚</p><blockquote><p>å…¬æœ‰ä»“åº“åå‘½åä¸º&lt;ä½ çš„GitHubåç§°&gt;.github.io</p></blockquote></li></ol><h3 id="äºŒã€åˆ›å»ºPersonal-access-tokens"><a href="#äºŒã€åˆ›å»ºPersonal-access-tokens" class="headerlink" title="äºŒã€åˆ›å»ºPersonal access tokens"></a>äºŒã€åˆ›å»ºPersonal access tokens</h3><p>åˆ›å»ºä¸€ä¸ªæœ‰<code>repo</code>å’Œ<code>workflow</code>æƒé™çš„<a href="https://github.com/settings/tokens/new">token</a>ï¼Œæ³¨æ„tokenåªæœ‰åœ¨åˆšç”Ÿæˆæ—¶ä¼šæ˜¾ç¤ºï¼Œå¦‚é—å¤±éœ€é‡æ–°ç”Ÿæˆã€‚</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202112161809331.png" alt="åˆ›å»ºtoken"></p><h3 id="ä¸‰ã€åˆ›å»ºrepository-secret"><a href="#ä¸‰ã€åˆ›å»ºrepository-secret" class="headerlink" title="ä¸‰ã€åˆ›å»ºrepository secret"></a>ä¸‰ã€åˆ›å»ºrepository secret</h3><p>è¿›å…¥ç§æœ‰ä»“åº“ï¼Œä½¿ç”¨ä¸Šé¢ç”Ÿæˆçš„<code>token</code>ï¼ŒæŒ‰ç…§ä¸‹å›¾æ­¥éª¤ç”Ÿæˆ<code>Secrets</code>ã€‚è®°ä¸‹Action Secretsçš„åå­—ï¼Œåœ¨åé¢é…ç½®<code>Action</code>ä¸­ä¼šç”¨åˆ°ã€‚</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202112161830446.png" alt="åˆ›å»ºSecrets"></p><h3 id="å››ã€æ·»åŠ Actionsé…ç½®æ–‡ä»¶"><a href="#å››ã€æ·»åŠ Actionsé…ç½®æ–‡ä»¶" class="headerlink" title="å››ã€æ·»åŠ Actionsé…ç½®æ–‡ä»¶"></a>å››ã€æ·»åŠ Actionsé…ç½®æ–‡ä»¶</h3><ol><li><p>åœ¨ä½ çš„ Hexo é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º <code>.github</code> æ–‡ä»¶å¤¹ã€‚</p></li><li><p>åœ¨ <code>.github</code> æ–‡ä»¶å¤¹ä¸‹åˆ›å»º <code>workflows</code> æ–‡ä»¶å¤¹ã€‚</p></li><li><p>åœ¨ <code>workflows</code> æ–‡ä»¶å¤¹ä¸‹åˆ›å»º <code>hexo-deploy.yml</code> æ–‡ä»¶ã€‚</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202112162220323.png" alt="åˆ›å»ºymlæ–‡ä»¶"></p><p>hexo-deploy.ymlæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs bash">name: deploying Hexo project to GitHub pages<br>on:<br>  push:<br>    branches:<br>      - master <span class="hljs-comment"># master åˆ†æ”¯æœ‰ push è¡Œä¸ºæ—¶å°±è§¦å‘è¿™ä¸ª action</span><br><br><span class="hljs-built_in">jobs</span>:<br>  build-and-deploy:<br>    runs-on: ubuntu-latest<br>    steps:<br>      - name: Checkout<br>        uses: actions/checkout@master<br><br>      - name: Build and Deploy<br>        uses: theme-keep/hexo-deploy-github-pages-action@master <span class="hljs-comment"># ä½¿ç”¨ä¸“é—¨éƒ¨ç½² Hexo åˆ° GitHub pages çš„ action</span><br>        env:<br>          PERSONAL_TOKEN: <span class="hljs-variable">$&#123;&#123; secrets.HEXO_DEPLOY &#125;</span>&#125; <span class="hljs-comment"># secret å</span><br>          PUBLISH_REPOSITORY: GHTYQ/GHTYQ.github.io <span class="hljs-comment"># å…¬å…±ä»“åº“ï¼Œæ ¼å¼ï¼šGitHub ç”¨æˆ·å/ä»“åº“å</span><br>          BRANCH: gh-pages <span class="hljs-comment"># åˆ†æ”¯ï¼Œå¡« gh-pages å°±è¡Œ</span><br>          PUBLISH_DIR: ./public <span class="hljs-comment"># éƒ¨ç½² public ç›®å½•ä¸‹çš„æ–‡ä»¶</span><br></code></pre></td></tr></table></figure></li></ol><h3 id="äº”ã€è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹"><a href="#äº”ã€è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹" class="headerlink" title="äº”ã€è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹"></a>äº”ã€è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹</h3><ol><li><p>ä¿®æ”¹ä½ çš„ Hexo åšå®¢æºä»£ç ï¼ˆä¾‹å¦‚ï¼šå¢åŠ æ–‡ç« ã€ä¿®æ”¹æ–‡ç« ã€æ›´æ”¹ä¸»é¢˜ã€ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ç­‰ç­‰ï¼‰ã€‚</p></li><li><p>æŠŠä½ ä¿®æ”¹è¿‡çš„ Hexo é¡¹ç›®å†…å®¹ <code>push</code> åˆ° GitHub ç§æœ‰ä»“åº“çš„ <code>master</code> åˆ†æ”¯ã€‚</p></li><li><p>GitHub Actions æ£€æµ‹åˆ° <code>master</code> åˆ†æ”¯æœ‰å†…å®¹ <code>push</code> è¿›æ¥ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œ action é…ç½®æ–‡ä»¶çš„å‘½ä»¤ï¼Œå°† Hexo é¡¹ç›®ç¼–è¯‘æˆé™æ€é¡µé¢ï¼Œç„¶åéƒ¨ç½²åˆ°å…¬æœ‰ä»“åº“çš„ <code>gh-pages</code> åˆ†æ”¯ã€‚</p><blockquote><p><code>gh-pages</code> åˆ†æ”¯æ˜¯ GitHub Pages æœåŠ¡çš„å›ºå®šåˆ†æ”¯ï¼Œä½ åªéœ€åœ¨ <code>hexo-deploy.yml</code> æ–‡ä»¶æ­£ç¡®å¡«å†™ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºã€‚</p></blockquote></li><li><p>åœ¨ç§æœ‰ä»“åº“çš„ Actions å¯ä»¥æŸ¥çœ‹åˆ°ä½ é…ç½®çš„ actionã€‚</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202112162216689.png" alt="æˆªå±2021-12-16 ä¸‹åˆ10.16.46"></p></li><li><p>é€šè¿‡ GitHub Actions è‡ªåŠ¨éƒ¨ç½²æˆåŠŸçš„æ•ˆæœå›¾ï¼š</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202112162222906.png" alt="æˆªå±2021-12-16 ä¸‹åˆ10.22.17"></p></li></ol><h3 id="å…­ã€å‡ºç°çš„é—®é¢˜"><a href="#å…­ã€å‡ºç°çš„é—®é¢˜" class="headerlink" title="å…­ã€å‡ºç°çš„é—®é¢˜"></a>å…­ã€å‡ºç°çš„é—®é¢˜</h3><p>å› ä¸ºæˆ‘ä½¿ç”¨çš„æ˜¯<code>Custom domain</code>å½¢å¼ï¼Œå‡ºç°äº†å½“æ¯æ¬¡pushéƒ¨ç½²æˆåŠŸå<code>Custom domain</code>è¢«é‡ç½®ç©ºï¼Œå¯¼è‡´ç”¨è‡ªå·±è®¾ç½®çš„åŸŸåæ— æ³•è®¿é—®ã€‚é‡æ–°è®¾ç½®<code>Custom domain</code>å¥½åå°±å¯ä»¥ç»§ç»­è®¿é—®ï¼Œä½†ä¸‹æ¬¡pushéƒ¨ç½²æˆåŠŸååˆä¼šè¢«ç½®ç©ºã€‚åç»å¯¹æ¯”gh-pageåˆ†æ”¯å†…æ–‡ä»¶å‘ç°ï¼Œæ¯æ¬¡éƒ¨ç½²æˆåŠŸå<code>CNAME</code>æ–‡ä»¶å°±ä¼šæ¶ˆå¤±,è®¾ç½®å¥½<code>Custom domain</code>å<code>CNAME</code>å°±ä¼šå‡ºç°ã€‚</p><p>è§£å†³æ–¹æ³•ï¼š</p><p>åœ¨å¦‚ä¸‹å›¾æ‰€ç¤ºsourceç›®å½•ä¸‹åˆ›å»º<code>CNAME</code>æ–‡ä»¶ï¼Œæ–‡ä»¶ä¸­å†™å…¥è‡ªå·±çš„åŸŸåå³å¯ã€‚</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202112162233029.jpg" alt="1639665205281"></p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul><li><a href="https://keep.xpoet.cn/2021/03/%E4%BD%BF%E7%94%A8-GitHub-Action-%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2-Hexo-%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2/">ä½¿ç”¨ GitHub Actions è‡ªåŠ¨éƒ¨ç½² Hexo é™æ€åšå®¢</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>Blog</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Blog</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Xcode New build Systemå¯¼è‡´çš„ä¸€ç³»åˆ—é—®é¢˜è§£å†³</title>
    <link href="/2021/12/15/iOS/Xcode%20New%20build%20System%E5%AF%BC%E8%87%B4%E7%9A%84%E4%B8%80%E7%B3%BB%E5%88%97%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
    <url>/2021/12/15/iOS/Xcode%20New%20build%20System%E5%AF%BC%E8%87%B4%E7%9A%84%E4%B8%80%E7%B3%BB%E5%88%97%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</url>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>æœ€è¿‘å°†xcodeå‡çº§åˆ°13.1ï¼Œæ„Ÿè§‰ç•Œé¢å˜åŒ–è¿˜æ˜¯æŒºå¤§çš„ã€‚è¿˜æ˜¯æ¯”è¾ƒå–œæ¬¢è¿™æ¬¡å‡çº§åå¸¦æ¥çš„ä½“éªŒçš„ã€‚ä½†æ˜¯æˆ‘ä»¬ä¹Ÿä¼šçŸ¥é“ï¼Œæ¯æ¬¡å‡çº§ï¼Œæˆ–å¤šæˆ–å°‘éƒ½ä¼šå¸¦æ¥ä¸€äº›é—®é¢˜ã€‚è¿™é‡Œå°±è®°å½•ä¸‹è¿™æ¬¡å‡çº§å¸¦æ¥çš„å‡ ä¸ªé—®é¢˜å§ã€‚</p><h3 id="ä¸€ã€The-Legacy-Build-System-will-be-removed-in-a-future-release-You-can-configure-the-selected-build-system-and-this-deprecation-message-in-File-gt-Workspace-Settings"><a href="#ä¸€ã€The-Legacy-Build-System-will-be-removed-in-a-future-release-You-can-configure-the-selected-build-system-and-this-deprecation-message-in-File-gt-Workspace-Settings" class="headerlink" title="ä¸€ã€The Legacy Build System will be removed in a future release. You can configure the selected build system and this deprecation message in File &gt; Workspace Settings."></a>ä¸€ã€The Legacy Build System will be removed in a future release. You can configure the selected build system and this deprecation message in File &gt; Workspace Settings.</h3><p>è¿™æ®µæ–‡å­—å°†é—®é¢˜è¯´çš„å¾ˆæ˜ç™½* Legacy Build System*è¿™ç§æ–¹å¼å·²ç»è¢«é—å¼ƒï¼ˆå…¶å®è¿™ä¸ªæ–¹å¼å¾ˆæ—©å·²ç»è¢«é—å¼ƒäº†ï¼Œåªæ˜¯ä¹‹å‰ä¸ä¼šæŠ¥é”™ï¼‰ã€‚è¿™é‡Œæˆ‘ä»¬åªéœ€åœ¨Xcode -&gt; file -&gt; workspace settingï¼Œæ‰¾åˆ°å¦‚ä¸‹å›¾é€‰é¡¹ï¼Œå°†å®ƒé€‰æ‹©ä¸ºnew buil system å³å¯ã€‚</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202112161500742.png" alt="New Buil system"></p><p>è¿™é‡Œç®€å•ä»‹ç»ä¸‹New Build Systemï¼Œå®ƒæ˜¯åœ¨Xcode9å‘å¸ƒçš„æ—¶å€™æ¨å‡ºçš„ï¼Œåœ¨Xcode10ä¸­ï¼Œè‹¹æœå°†å…¶è®¾ç½®ä¸ºé»˜è®¤çš„æ„å»ºç³»ç»Ÿã€‚å…¶ç›®çš„æ˜¯é™ä½æ„å»ºå¼€é”€ï¼Œå°¤å…¶æ˜¯é™ä½å¤§å‹é¡¹ç›®çš„æ„å»ºå¼€é”€ã€‚å…·ä½“å¯ä»¥çœ‹æœ€ä¸‹é¢ç¬¬ä¸€ç« å‚è€ƒæ–‡ç« ã€‚</p><h3 id="äºŒã€Multiple-commands-produce"><a href="#äºŒã€Multiple-commands-produce" class="headerlink" title="äºŒã€Multiple commands produce"></a>äºŒã€Multiple commands produce</h3><p>Multiple commands produce â€˜/Users/mac/Library/Developer/Xcode/DerivedData/xxxx-heiprmtxogfzwaekotgiyuncjoip/Build/Products/Debug-iphoneos/xxxx.app/Assets.carâ€™:</p><ol><li>Target â€˜xxxxâ€™ (project â€˜xxxxâ€™) has compile command with input â€˜/Users/mac/Documents/xxxx/xxxx/xxxx/Assets.xcassetsâ€™</li><li>That command depends on command in Target â€˜xxxxâ€™ (project â€˜xxxxâ€™): script phase â€œ[CP] Copy Pods Resourcesâ€</li></ol><p>è¿™æ˜¯å› ä¸ºä¸»å·¥ç¨‹é‡Œ Assets.xcassets å’Œ Pods é‡Œæœ‰åŒåçš„ Assets.xcassetsï¼Œåœ¨ Xcode 10 ä¹‹å‰è¿›è¡Œç¼–è¯‘æ˜¯ä¸ä¼šæœ‰é—®é¢˜çš„ï¼ŒXcode åªæ˜¯ç”Ÿæˆ Warningï¼Œä½†æ˜¯åœ¨ Xcode 10 ä¹‹åä½¿ç”¨äº† New Build System ä¼šç”Ÿæˆ Errrorï¼Œæç¤ºé‡å¤ç”Ÿæˆ Assets.carã€‚</p><ul><li><p>è§£å†³æ–¹æ³•1ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">install! <span class="hljs-string">&#x27;cocoapods&#x27;</span>, :disable_input_output_paths =&gt; <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p>è¿™ä¸ªæ–¹æ³•ä¼šè·³è¿‡ä¼˜åŒ–ï¼Œæ¯æ¬¡éƒ½ä»Podsä¸‹è½½èµ„æºï¼Œè™½ç„¶è§£å†³äº†æˆ‘ä»¬çš„é—®é¢˜ï¼Œä½†æ˜¯è¿™æ ·ä¼šå¯¼è‡´æ„å»ºæ—¶é—´å¢é•¿ï¼Œä¸æ˜¯æœ€ä½³çš„é€‰æ‹©ã€‚</p></li><li><p>è§£å†³æ–¹æ³•2ï¼š</p><p>åœ¨<code>target</code>-&gt;<code>Build Phases</code>ä¸‹<code>[CP] Copy Pods Resource</code>çš„ <code>output files</code>ä¸‹æ‰¾åˆ°ä¸‹é¢è¿™æ®µä¿¡æ¯ï¼Œå°†å…¶åˆ é™¤å³å¯è§£å†³ä¸Šé¢æŠ¥é”™é—®é¢˜ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-variable">$&#123;TARGET_BUILD_DIR&#125;</span>/<span class="hljs-variable">$&#123;UNLOCALIZED_RESOURCES_FOLDER_PATH&#125;</span>/Assets.car<br></code></pre></td></tr></table></figure><p>ä½†è¿™åŒæ—¶ä¼šå¸¦å‡ºä¸€ä¸ªæ–°çš„é—®é¢˜ï¼š<code>å½“æˆ‘ä»¬å¯¹é¡¹ç›®è¿›é¡¹pod install æˆ–è€… pod update æ“ä½œçš„æ—¶å€™ï¼Œè¿™æ®µä¿¡æ¯å°±ä¼šé‡æ–°å‡ºç°</code>ã€‚</p><p>é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬é€‰æ‹©é€šè¿‡post_install hookæ¥å®ç°è‡ªåŠ¨åˆ é™¤è§£å†³ã€‚(ç›®å‰è¿˜æœ‰ç‚¹é—®é¢˜)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">post_install <span class="hljs-keyword">do</span> |installer|<br>    project_path = <span class="hljs-string">&#x27;MHCB2BApp.xcodeproj&#x27;</span><br>    project = Xcodeproj::Project.open(project_path)<br>    project.targets.each <span class="hljs-keyword">do</span> |target|<br>      <span class="hljs-comment">#log target-&gt;build phasesä¸‹åç§°</span><br>      puts target.build_phases<br>      build_phase = target.build_phases.find &#123; |bp| bp.display_name == <span class="hljs-string">&#x27;[CP] Copy Pods Resources&#x27;</span> &#125;<br>      assets_path = <span class="hljs-string">&#x27;$&#123;TARGET_BUILD_DIR&#125;/$&#123;UNLOCALIZED_RESOURCES_FOLDER_PATH&#125;/Assets.car&#x27;</span><br>      <span class="hljs-keyword">if</span> build_phase.present? &amp;&amp; build_phase.output_paths.include?(assets_path) == <span class="hljs-literal">true</span><br>         build_phase.output_paths.delete(assets_path)<br>         <span class="hljs-comment">#log output_pathsæŸ¥çœ‹æ˜¯å¦çœŸçš„åˆ é™¤æˆåŠŸ</span><br>         puts build_phase.output_paths<br>      end<br>    end<br>  project.save(project_path)<br></code></pre></td></tr></table></figure></li><li><p>è§£å†³æ–¹æ³•3ï¼š</p><p>è¿™ä¸ªé—®é¢˜çš„æ ¹æœ¬åŸå› æ˜¯å› ä¸ºåœ¨<code>podspec</code>ä¸­ä½¿ç”¨<code>s.resources = [â€œ your resource.xcassetsâ€]</code>è¿™ç§èµ„æºå¼•ç”¨çš„æ–¹å¼å¯¼è‡´çš„ï¼Œè¿™å°†ä¼šæŠŠä¸€ä¸ª <code>assets</code> æ·»åŠ åˆ°è¾“å‡ºæ–‡ä»¶ä¸­ï¼Œä¸ <code>Copy Bundle Resources</code> ä¸­çš„<code>assets</code> ç›¸å†²çªã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨CocoaPodså®˜æ–¹æ¨èçš„<code>resource_bundles</code>è¿™ç§æ–¹å¼å¼•ç”¨èµ„æºæ¥ä»æ ¹æœ¬ä¸Šè§£å†³é—®é¢˜ã€‚</p><p><code>Example:</code> </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">spec.ios.resource_bundle = &#123; <span class="hljs-string">&#x27;MapBox&#x27;</span> =&gt; <span class="hljs-string">&#x27;MapView/Map/Resources/*.png&#x27;</span> &#125;<br>spec.resource_bundles = &#123;<br>    <span class="hljs-string">&#x27;MapBox&#x27;</span> =&gt; [<span class="hljs-string">&#x27;MapView/Map/Resources/*.png&#x27;</span>],<br>    <span class="hljs-string">&#x27;MapBoxOtherResources&#x27;</span> =&gt; [<span class="hljs-string">&#x27;MapView/Map/OtherResources/*.png&#x27;</span>]<br>  &#125;<br></code></pre></td></tr></table></figure><blockquote><p>æœ€åä¸€ä¸ªæ–¹æ³•å› ä¸ºé¡¹ç›®ä¸­podå¤ªå¤šç­‰ç§ç§åŸå› ï¼Œæ²¡æœ‰äº²è‡ªå®è·µï¼Œåªæ˜¯ä»åˆ«çš„æ–‡ç« ä¸­äº†è§£åˆ°çš„ï¼Œè¯´æ˜¯å¯ä»¥ä»æ ¹æœ¬ä¸Šä¸Šè§£å†³çš„ã€‚</p></blockquote></li></ul><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul><li><a href="https://blog.csdn.net/TuGeLe/article/details/84885211">æ¢ç©¶Xcode New Build Systemå¯¹äºæ„å»ºé€Ÿåº¦çš„æå‡</a></li><li><a href="https://chaosky.tech/2020/04/20/optimize-xcode-build-time/">è®°å½•ä¸€æ¬¡ä¼˜åŒ– Xcode ç¼–è¯‘çš„è¿‡ç¨‹</a></li><li><a href="https://github.com/CocoaPods/CocoaPods/issues/8122">Xcode 10 new build system makes asset catalog invalid specified by podspecâ€™s resource(s)</a></li><li><a href="https://dev.to/kylefoo/xcode-12-new-build-system-warns-multiple-commands-produce-assets-car-56im">Xcode 12 New Build System warns multiple commands produce Assets.car</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>iOS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Question</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>iOSæ¨é€è¯ä¹¦è¿‡æœŸå¤„ç†</title>
    <link href="/2021/12/10/iOS/iOS%E6%8E%A8%E9%80%81%E8%AF%81%E4%B9%A6%E8%BF%87%E6%9C%9F%E5%A4%84%E7%90%86/"/>
    <url>/2021/12/10/iOS/iOS%E6%8E%A8%E9%80%81%E8%AF%81%E4%B9%A6%E8%BF%87%E6%9C%9F%E5%A4%84%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h1 id="iOS-æ¨é€è¯ä¹¦è¿‡æœŸå¤„ç†"><a href="#iOS-æ¨é€è¯ä¹¦è¿‡æœŸå¤„ç†" class="headerlink" title="iOS æ¨é€è¯ä¹¦è¿‡æœŸå¤„ç†"></a>iOS æ¨é€è¯ä¹¦è¿‡æœŸå¤„ç†</h1><h3 id="å‰è¨€ï¼š"><a href="#å‰è¨€ï¼š" class="headerlink" title="å‰è¨€ï¼š"></a>å‰è¨€ï¼š</h3><p>å…³äºæ¨é€è¯ä¹¦è¿‡æœŸçš„å¤„ç†ï¼Œå› ä¸ºæˆ‘ä»¬é¡¹ç›®ä¸­ç”¨åˆ°çš„æ˜¯ä¸‰æ–¹æ¨é€ï¼ˆæå…‰æ¨é€ï¼‰ï¼Œè¿™é‡Œå°±ä»¥æå…‰æ¨é€ä¸ºä¾‹ï¼Œè®°å½•ä¸‹æ”¶åˆ°è‹¹æœæ¨é€è¯ä¹¦å³å°†è¿‡æœŸçš„é‚®ä»¶æé†’åï¼Œæ€ä¹ˆå»é‡æ–°è®¾ç½®è¯ä¹¦ã€‚</p><p>è¿™é‡Œå…ˆç¡®è®¤ä¸€ç‚¹ï¼Œå°±æ˜¯æ›´æ¢è¯ä¹¦å¹¶ä¸ä¼šå½±å“ä½ çº¿ä¸Šappçš„æ­£å¸¸ä½¿ç”¨ã€‚</p><h3 id="ä¸€ã€ç¡®å®šè¿‡æœŸæ—¶é—´"><a href="#ä¸€ã€ç¡®å®šè¿‡æœŸæ—¶é—´" class="headerlink" title="ä¸€ã€ç¡®å®šè¿‡æœŸæ—¶é—´"></a>ä¸€ã€ç¡®å®šè¿‡æœŸæ—¶é—´</h3><ol><li>é’¥åŒ™ä¸²-&gt;æˆ‘çš„è¯ä¹¦ä¸­æ‰¾åˆ°ç›¸åº”çš„æ¨é€è¯ä¹¦ï¼ŒæŸ¥çœ‹è¯ä¹¦çš„æœ‰æ•ˆæœŸã€‚</li><li>æå…‰å¹³å°æ¨é€è¯ä¹¦é›†æˆè®¾ç½®ä¸­ï¼ŒæŸ¥çœ‹è¯ä¹¦æœ‰æ•ˆæœŸã€‚</li></ol><h3 id="äºŒã€é‡æ–°é…ç½®æ¨é€è¯ä¹¦"><a href="#äºŒã€é‡æ–°é…ç½®æ¨é€è¯ä¹¦" class="headerlink" title="äºŒã€é‡æ–°é…ç½®æ¨é€è¯ä¹¦"></a>äºŒã€é‡æ–°é…ç½®æ¨é€è¯ä¹¦</h3><ol><li><p>é‡æ–°ç¼–è¾‘æ¨é€è¯ä¹¦</p><ul><li>æ‰“å¼€<a href="https://idmsa.apple.com/IDMSWebAuth/signin?appIdKey=891bd3417a7776362562d2197f89480a8547b108fd934911bcbea0110d07f757&path=/account/&rv=1">Developer</a>ï¼Œç‚¹å‡»Identifiersï¼Œç‚¹å‡»æœç´¢æ‰¾åˆ°ä½ å¯¹åº”é¡¹ç›®çš„bundleID</li></ul><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202112101542079.jpg" alt="Identifiers"></p><ul><li>ç‚¹å‡»ä½ éœ€è¦é…ç½®çš„bundleIDï¼Œè¿›å…¥ä¸‹å›¾ï¼Œæ‰¾åˆ°push Notificationsï¼Œç‚¹å‡»ç¼–è¾‘</li></ul><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202112101541638.jpg" alt="ç¼–è¾‘æ¨é€ç›¸å…³å†…å®¹"></p><ul><li><p>ç‚¹å‡»<em>Create Certificate</em>ï¼Œåˆ›å»ºç”Ÿäº§è¯ä¹¦ï¼ˆå› ä¸ºå¯ä»¥é€‰æ‹©ï¼Œç”Ÿäº§è¯ä¹¦ç”¨äºæµ‹è¯•ï¼Œæˆ‘ä»¬å°±ä¸åˆ›å»ºå¼€å‘è¯ä¹¦äº†ï¼‰</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202112101547956.jpg" alt="åˆ›å»ºç”Ÿäº§è¯ä¹¦"></p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202112101549370.jpg" alt="è¯ä¹¦çš„åˆ›å»º"></p></li></ul></li><li><p>ç”Ÿæˆå¹¶ä¸Šä¼ CSRæ–‡ä»¶</p><ul><li>ç”ŸæˆCSRæ–‡ä»¶ï¼Œæ‰“å¼€é’¥åŒ™ä¸²ï¼Œç‚¹å‡»å¦‚ä¸‹å›¾ï¼Œé€‰æ‹©ä»è¯ä¹¦é¢å‘æœºæ„è¯·æ±‚è¯ä¹¦ï¼Œç„¶åå°†è¯ä¹¦å­˜å‚¨åˆ°ç£ç›˜æ¡Œé¢å¤‡ç”¨ã€‚</li></ul><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202112101550236.jpg" alt="ç”ŸæˆCSRæ–‡ä»¶"></p><ul><li><p>ä¸Šä¼ CSRæ–‡ä»¶ï¼Œè¯ä¹¦åˆ›å»ºå®Œæˆ</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202112101553342.jpg" alt="ä¸Šä¼ CSRæ–‡ä»¶å®Œæˆè¯ä¹¦çš„åˆ›å»º"></p></li></ul></li><li><p>ä¸‹è½½è¯ä¹¦åˆ°é’¥åŒ™ä¸²ï¼Œå¹¶ä»¥p12çš„å½¢å¼å¯¼å‡º</p><p>ç‚¹å‡»<em>Download</em>ä¸‹è½½è¯ä¹¦åï¼ŒåŒå‡»å®‰è£…è¯ä¹¦åˆ°é’¥åŒ™ä¸²ï¼Œåœ¨é’¥åŒ™ä¸²ä¸­æ‰¾åˆ°æ–°å®‰è£…çš„è¯ä¹¦ï¼Œå³é”®é€‰æ‹©å¯¼å‡ºï¼Œå¯¼å‡ºç±»å‹é€‰æ‹©p12çš„å½¢å¼ã€‚</p></li><li><p>æ›¿æ¢æ‰æå…‰æ¨é€é…ç½®çš„è¯ä¹¦</p><p>è¿›å…¥æå…‰æ¨é€é›†æˆé…ç½®ä¸­å¿ƒï¼Œé€‰æ‹©ä¸Šä¼ æˆ‘ä»¬æ–°å¯¼å‡ºçš„æ¨é€è¯ä¹¦çš„p12æ–‡ä»¶ï¼Œå®Œæˆæå…‰å¹³å°çš„è¯ä¹¦æ›´æ–°ã€‚</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202112101555909.jpg" alt="æ›¿æ¢å³å°†è¿‡æœŸçš„è¯ä¹¦"></p></li></ol>]]></content>
    
    
    <categories>
      
      <category>iOS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Developer</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>iOSå„æœºå‹æ¯”è¾ƒ</title>
    <link href="/2021/12/10/iOS/iOS%E5%90%84%E6%9C%BA%E5%9E%8B%E6%AF%94%E8%BE%83/"/>
    <url>/2021/12/10/iOS/iOS%E5%90%84%E6%9C%BA%E5%9E%8B%E6%AF%94%E8%BE%83/</url>
    
    <content type="html"><![CDATA[<h3 id="å¸¸ç”¨æœºå‹æ¯”è¾ƒ"><a href="#å¸¸ç”¨æœºå‹æ¯”è¾ƒ" class="headerlink" title="å¸¸ç”¨æœºå‹æ¯”è¾ƒ"></a>å¸¸ç”¨æœºå‹æ¯”è¾ƒ</h3><table><thead><tr><th>æœºå‹</th><th>å°ºå¯¸</th><th>é€»è¾‘åˆ†è¾¨ç‡(point)</th><th>å€æ•°</th><th>çŠ¶æ€æ é«˜åº¦</th><th>å¯¼èˆªæ é«˜åº¦</th><th>åº•éƒ¨å®‰å…¨è·ç¦»</th><th>tabbaré«˜åº¦</th></tr></thead><tbody><tr><td>iPhone 8</td><td>4.7è‹±å¯¸</td><td>375*667</td><td>@2x</td><td>20</td><td>44</td><td>-</td><td>49</td></tr><tr><td>iPhone 8p</td><td>5.5è‹±å¯¸</td><td>414*736</td><td>@3x</td><td>20</td><td>44</td><td>-</td><td>49</td></tr><tr><td>iPhone X</td><td>5.8è‹±å¯¸</td><td>375*812</td><td>@3x</td><td>44</td><td>44</td><td>34</td><td>83</td></tr><tr><td>iPhone XS</td><td>5.8è‹±å¯¸</td><td>375*812</td><td>@3x</td><td>44</td><td>44</td><td>34</td><td>83</td></tr><tr><td>iPhone XS max</td><td>6.5è‹±å¯¸</td><td>414x896</td><td>@3x</td><td>44</td><td>44</td><td>34</td><td>83</td></tr><tr><td>iPhone XR</td><td>6.1è‹±å¯¸</td><td>414x896</td><td>@2x</td><td>44</td><td>44</td><td>34</td><td>83</td></tr><tr><td>iPhone 11</td><td>6.1è‹±å¯¸</td><td>414x896</td><td>@2x</td><td>44</td><td>44</td><td>34</td><td>83</td></tr><tr><td>iPhone 11 Pro</td><td>6.1è‹±å¯¸</td><td>375*812</td><td>@3x</td><td>44</td><td>44</td><td>34</td><td>83</td></tr><tr><td>iPhone 11 Pro Max</td><td>6.5è‹±å¯¸</td><td>414 x 896</td><td>@3x</td><td>44</td><td>44</td><td>34</td><td>83</td></tr><tr><td>iPhone SE</td><td>4.7è‹±å¯¸</td><td>375*667</td><td>@2x</td><td>20</td><td>44</td><td>-</td><td>83</td></tr><tr><td>iPhone 12</td><td>6.1è‹±å¯¸</td><td>390*844</td><td>@3x</td><td>44</td><td>44</td><td>34</td><td>83</td></tr><tr><td>iPhone 12 Pro</td><td>6.1è‹±å¯¸</td><td>390*844</td><td>@3x</td><td>44</td><td>44</td><td>34</td><td>83</td></tr><tr><td>iPhone 11 Pro Max</td><td>6.7è‹±å¯¸</td><td>428*926</td><td>@3x</td><td>44</td><td>44</td><td>34</td><td>83</td></tr><tr><td>iPhone 12 Mini</td><td>5.4è‹±å¯¸</td><td>375*812</td><td>@3x</td><td>44</td><td>44</td><td>34</td><td>83</td></tr><tr><td>iPhone 13</td><td>6.1è‹±å¯¸</td><td>390*844</td><td>@3x</td><td>44</td><td>44</td><td>34</td><td>83</td></tr><tr><td>iPhone 13 Pro</td><td>6.1è‹±å¯¸</td><td>390*844</td><td>@3x</td><td>44</td><td>44</td><td>34</td><td>83</td></tr><tr><td>iPhone 13 Pro Max</td><td>6.7è‹±å¯¸</td><td>428*926</td><td>@3x</td><td>44</td><td>44</td><td>34</td><td>83</td></tr><tr><td>iPhone 13 Mini</td><td>5.4è‹±å¯¸</td><td>360*780</td><td>@3x</td><td>44</td><td>44</td><td>34</td><td>83</td></tr></tbody></table>]]></content>
    
    
    <categories>
      
      <category>iOS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>é€‚é…</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Swift_åŸºç¡€éƒ¨åˆ†</title>
    <link href="/2021/11/30/Swift/Swift_%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/"/>
    <url>/2021/11/30/Swift/Swift_%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/</url>
    
    <content type="html"><![CDATA[<h3 id="1-å¸¸é‡å’Œå˜é‡"><a href="#1-å¸¸é‡å’Œå˜é‡" class="headerlink" title="1. å¸¸é‡å’Œå˜é‡"></a>1. å¸¸é‡å’Œå˜é‡</h3><p>å®šä¹‰ï¼šå¸¸é‡å’Œå˜é‡<code>æŠŠä¸€ä¸ªåå­—å’Œä¸€ä¸ªæŒ‡å®šç±»å‹çš„å€¼å…³è”èµ·æ¥</code>ã€‚å¸¸é‡çš„å€¼ä¸€æ—¦è®¾å®šå°±ä¸èƒ½æ”¹å˜ï¼Œè€Œå˜é‡çš„å€¼å¯ä»¥éšæ„æ›´æ”¹ã€‚</p><h6 id="1-1-å¸¸é‡å’Œå˜é‡çš„å£°æ˜"><a href="#1-1-å¸¸é‡å’Œå˜é‡çš„å£°æ˜" class="headerlink" title="1.1 å¸¸é‡å’Œå˜é‡çš„å£°æ˜"></a>1.1 å¸¸é‡å’Œå˜é‡çš„å£°æ˜</h6><p>ç”¨letæ¥å£°æ˜å¸¸é‡ï¼Œvarå£°æ˜å˜é‡</p><p>å¯ä»¥åœ¨ä¸€è¡Œä¸­å£°æ˜å¤šä¸ªå¸¸é‡æˆ–è€…å¤šä¸ªå˜é‡ï¼Œç”¨é€—å·éš”å¼€</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">var</span> x <span class="hljs-operator">=</span> <span class="hljs-number">0.0</span>, y <span class="hljs-operator">=</span> <span class="hljs-number">1.0</span>, z <span class="hljs-operator">=</span> <span class="hljs-number">2.0</span><br></code></pre></td></tr></table></figure><h6 id="1-2-ç±»å‹æ³¨è§£"><a href="#1-2-ç±»å‹æ³¨è§£" class="headerlink" title="1.2 ç±»å‹æ³¨è§£"></a>1.2 ç±»å‹æ³¨è§£</h6><p>ä¾‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">var</span> welcome: <span class="hljs-type">String</span><br></code></pre></td></tr></table></figure><p>â€œå£°æ˜ä¸€ä¸ªç±»å‹ä¸ºStringï¼Œåå­—ä¸ºwelcomeçš„å˜é‡â€</p><p>ä½ å¯ä»¥åœ¨ä¸€è¡Œä¸­å®šä¹‰å¤šä¸ªåŒç±»å‹çš„å˜é‡ï¼Œç”¨é€—å·éš”å¼€ï¼Œå¹¶åœ¨æœ€åä¸€ä¸ªå˜é‡åç§°åé¢æ·»åŠ æ³¨è§£</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">var</span> x, y, z: <span class="hljs-type">Double</span><br></code></pre></td></tr></table></figure><h6 id="1-3-å¸¸é‡å’Œå˜é‡çš„å‘½å"><a href="#1-3-å¸¸é‡å’Œå˜é‡çš„å‘½å" class="headerlink" title="1.3 å¸¸é‡å’Œå˜é‡çš„å‘½å"></a>1.3 å¸¸é‡å’Œå˜é‡çš„å‘½å</h6><ul><li><p>å¸¸é‡å’Œå˜é‡åå¯ä»¥åŒ…å«å‡ ä¹æ‰€æœ‰çš„å­—ç¬¦ï¼ŒåŒ…æ‹¬ Unicode å­—ç¬¦ã€‚</p></li><li><p>å¸¸é‡ä¸å˜é‡åä¸èƒ½åŒ…å«æ•°å­¦ç¬¦å·ï¼Œç®­å¤´ï¼Œä¿ç•™çš„ï¼ˆæˆ–è€…éæ³•çš„ï¼‰Unicode ç ä½ï¼Œè¿çº¿ä¸åˆ¶è¡¨ç¬¦ã€‚ä¹Ÿä¸èƒ½ä»¥æ•°å­—å¼€å¤´ï¼Œä½†æ˜¯å¯ä»¥åœ¨å¸¸é‡ä¸å˜é‡åçš„å…¶ä»–åœ°æ–¹åŒ…å«æ•°å­—ã€‚</p></li></ul><h6 id="1-4-è¾“å‡ºå¸¸é‡å’Œå˜é‡"><a href="#1-4-è¾“å‡ºå¸¸é‡å’Œå˜é‡" class="headerlink" title="1.4 è¾“å‡ºå¸¸é‡å’Œå˜é‡"></a>1.4 è¾“å‡ºå¸¸é‡å’Œå˜é‡</h6><p>å¯ä»¥ä½¿ç”¨<code>print(_:separator:terminator:ï¼‰</code>å‡½æ•°æ¥è¾“å‡ºå½“å‰å¸¸é‡å’Œå˜é‡çš„å€¼ï¼Œé»˜è®¤ä»¥<code>separator:&quot; &quot;</code>åˆ†å‰²ï¼Œä»¥<code>terminator:&quot;\n&quot;</code>ç»“æŸ</p><h3 id="2-æ³¨é‡Š"><a href="#2-æ³¨é‡Š" class="headerlink" title="2. æ³¨é‡Š"></a>2. æ³¨é‡Š</h3><ol><li><p>å•è¡Œæ³¨é‡Šï¼ˆ<code>//</code>ï¼‰</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-comment">// è¿™æ˜¯å•è¡Œæ³¨é‡Š</span><br></code></pre></td></tr></table></figure></li><li><p>å¤šè¡Œæ³¨é‡Šï¼Œå¼€å§‹ï¼ˆ<code>/*</code>ï¼‰ï¼Œç»“æŸï¼ˆ*<code>/</code>ï¼‰</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-comment">/*è¿™æ˜¯å¤šè¡Œæ³¨é‡Š</span><br><span class="hljs-comment">å¤šè¡Œæ³¨é‡Š*/</span><br></code></pre></td></tr></table></figure></li></ol><h3 id="3-åˆ†å·"><a href="#3-åˆ†å·" class="headerlink" title="3. åˆ†å·"></a>3. åˆ†å·</h3><p>ä¸å¼ºæ±‚æ¯æ¡è¯­å¥ç»“å°¾å¤„éƒ½ä½¿ç”¨åˆ†å·ï¼ˆ<code>;</code>ï¼‰,çœ‹ä¸ªäººä¹ æƒ¯ã€‚ä½†æ˜¯åŒä¸€è¡Œå†…æœ‰å¤šæ¡ç‹¬ç«‹çš„è¯­å¥çš„æ—¶å€™ï¼Œå¿…é¡»ä½¿ç”¨åˆ†å·ã€‚</p><h3 id="4-æ•´æ•°"><a href="#4-æ•´æ•°" class="headerlink" title="4.  æ•´æ•°"></a>4.  æ•´æ•°</h3><p>æ•´æ•°å¯ä»¥æ˜¯<code>æœ‰ç¬¦å·</code>ï¼ˆæ­£ã€è´Ÿã€é›¶ï¼‰æˆ–è€…<code>æ— ç¬¦å·</code>ï¼ˆæ­£ã€é›¶ï¼‰</p><p>swiftæä¾›äº†8ã€6ã€32ã€64ä½æœ‰ç¬¦å·æˆ–è€…æ— ç¬¦å·æ•´æ•°ç±»å‹ã€‚</p><p>ä¾‹ï¼š</p><p>â€‹        8ä½æ— ç¬¦å·æ•´æ•°ç±»å‹ï¼š <code>UInt8</code></p><p>â€‹        32ä½æœ‰ç¬¦å·æ•´æ•°ç±»å‹ï¼š<code>Int32</code></p><h6 id="4-1-æ•´æ•°èŒƒå›´"><a href="#4-1-æ•´æ•°èŒƒå›´" class="headerlink" title="4.1 æ•´æ•°èŒƒå›´"></a>4.1 æ•´æ•°èŒƒå›´</h6><p>ä½ å¯ä»¥é€šè¿‡minå’Œmaxå±æ€§æ¥è·å–å¯¹åº”ç±»å‹çš„æœ€å°å€¼å’Œæœ€å¤§å€¼</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">let</span> minValue <span class="hljs-operator">=</span> <span class="hljs-type">UInt8</span>.min  <span class="hljs-comment">// minValue ä¸º 0ï¼Œæ˜¯ UInt8 ç±»å‹</span><br><span class="hljs-keyword">let</span> maxValue <span class="hljs-operator">=</span> <span class="hljs-type">UInt8</span>.max  <span class="hljs-comment">// maxValue ä¸º 255ï¼Œæ˜¯ UInt8 ç±»å‹</span><br></code></pre></td></tr></table></figure><h6 id="4-2-Int"><a href="#4-2-Int" class="headerlink" title="4.2 Int"></a>4.2 Int</h6><p>ä¸€èˆ¬æ¥è¯´ä¸éœ€è¦å•ç‹¬æŒ‡å®šæ•´æ•°çš„é•¿åº¦ï¼ŒSwiftæä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„æ•´æ•°ç±»å‹<code>Int</code>,é•¿åº¦ä¸å½“å‰å¹³å°çš„åŸç”Ÿå­—é•¿ç›¸åŒ</p><ul><li>åœ¨32ä½å¹³å°ä¸Šï¼Œ<code>Int</code>å’Œ<code>Int32</code>é•¿åº¦ç›¸åŒ</li><li>åœ¨64ä½å¹³å°ä¸Šï¼Œ<code>Int</code>å’ŒI<code>nt64</code>é•¿åº¦ç›¸åŒ</li></ul><h6 id="4-3-UInt"><a href="#4-3-UInt" class="headerlink" title="4.3 UInt"></a>4.3 UInt</h6><p>Swift ä¹Ÿæä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„æ— ç¬¦å·ç±»å‹<code>UInt</code>,é•¿åº¦ä¸å½“å‰å¹³å°åŸç”Ÿå­—é•¿ç›¸åŒã€‚</p><h3 id="5-æµ®ç‚¹æ•°"><a href="#5-æµ®ç‚¹æ•°" class="headerlink" title="5. æµ®ç‚¹æ•°"></a>5. æµ®ç‚¹æ•°</h3><p>æµ®ç‚¹æ•°ç±»å‹æ¯”æ•´æ•°ç±»å‹è¡¨ç¤ºçš„èŒƒå›´æ›´å¤§ï¼Œå¯ä»¥å­˜å‚¨æ¯”<code>Int</code>ç±»å‹æ›´å¤§æˆ–è€…æ›´å°çš„æ•°å­—ã€‚Swiftæä¾›äº†ä¸¤ç§æœ‰ç¬¦å·çš„æµ®ç‚¹æ•°ç±»å‹ï¼š</p><ul><li><code>Double</code>è¡¨ç¤º64ä½æµ®ç‚¹æ•°ã€‚å½“ä½ å­˜å‚¨å¾ˆå¤§æˆ–è€…å¾ˆé«˜ç²¾åº¦çš„æµ®ç‚¹æ•°æ—¶ä½¿ç”¨æ­¤ç±»å‹ã€‚</li><li><code>Float</code>æ ‡ä¹¦32ä½æµ®ç‚¹æ•°ã€‚ç²¾åº¦è¦æ±‚ä¸é«˜çš„è¯å¯ä»¥ä½¿ç”¨æ­¤ç±»å‹ã€‚</li></ul><h3 id="6-ç±»å‹å®‰å…¨å’Œç±»å‹æ¨æ–­"><a href="#6-ç±»å‹å®‰å…¨å’Œç±»å‹æ¨æ–­" class="headerlink" title="6. ç±»å‹å®‰å…¨å’Œç±»å‹æ¨æ–­"></a>6. ç±»å‹å®‰å…¨å’Œç±»å‹æ¨æ–­</h3><ol><li><p>ç±»å‹å®‰å…¨</p><p>Swiftæ˜¯ç±»å‹å®‰å…¨çš„ï¼Œå®ƒä¼šåœ¨ç¼–è¯‘ä½ çš„ä»£ç æ—¶è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œå¹¶æŠŠä¸åŒ¹é…çš„ç±»å‹æ ‡è®°ä¸ºé”™è¯¯ã€‚</p></li><li><p>ç±»å‹æ¨æ–­</p><p>å½“ä½ å£°æ˜å¸¸é‡æˆ–è€…å˜é‡çš„æ—¶å€™èµ‹ç»™å®ƒä»¬ä¸€ä¸ªå­—é¢é‡å³å¯è§¦å‘ç±»å‹æ¨æ–­ã€‚</p><p>ä¾‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">let</span> pi <span class="hljs-operator">=</span> <span class="hljs-number">3.14159</span><br><span class="hljs-comment">// pi ä¼šè¢«ç±»å‹æ¨æ–­ä¸ºDoubleç±»å‹</span><br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><p>å½“æ¨æ–­æµ®ç‚¹æ•°ç±»å‹çš„æ—¶å€™ï¼ŒSwiftæ€»ä¼šé€‰æ‹©Doubleè€Œä¸æ˜¯Float</p></li></ol><h3 id="7-æ•°å€¼å‹å­—é¢é‡"><a href="#7-æ•°å€¼å‹å­—é¢é‡" class="headerlink" title="7. æ•°å€¼å‹å­—é¢é‡"></a>7. æ•°å€¼å‹å­—é¢é‡</h3><ol><li><p>æ•´æ•°å­—é¢é‡</p><p>æ•´æ•°å­—é¢é‡å¯ä»¥è¢«å†™ä½œï¼š</p><ul><li>ä¸€ä¸ªåè¿›åˆ¶æ•°ï¼Œæ²¡æœ‰å‰ç¼€</li><li>ä¸€ä¸ªäºŒè¿›åˆ¶æ•°ï¼Œå‰ç¼€æ˜¯<code>0b</code></li><li>ä¸€ä¸ªå…«è¿›åˆ¶æ•°ï¼Œå‰ç¼€æ˜¯<code>0o</code></li><li>ä¸€ä¸ªåå…­è¿›åˆ¶æ•°ï¼Œå‰ç¼€æ˜¯<code>0x</code></li></ul></li><li><p>æµ®ç‚¹æ•°å­—é¢é‡</p><p>æµ®ç‚¹å­—é¢é‡å¯ä»¥æ˜¯åè¿›åˆ¶ï¼ˆæ²¡æœ‰å‰ç¼€ï¼‰æˆ–è€…æ˜¯åå…­è¿›åˆ¶ï¼ˆå‰ç¼€æ˜¯ 0x ï¼‰ã€‚å°æ•°ç‚¹ä¸¤è¾¹å¿…é¡»æœ‰è‡³å°‘ä¸€ä¸ªåè¿›åˆ¶æ•°å­—ï¼ˆæˆ–è€…æ˜¯åå…­è¿›åˆ¶çš„æ•°å­—ï¼‰ã€‚åè¿›åˆ¶æµ®ç‚¹æ•°ä¹Ÿå¯ä»¥æœ‰ä¸€ä¸ªå¯é€‰çš„æŒ‡æ•°ï¼ˆexponent)ï¼Œé€šè¿‡å¤§å†™æˆ–è€…å°å†™çš„ e æ¥æŒ‡å®šï¼›åå…­è¿›åˆ¶æµ®ç‚¹æ•°å¿…é¡»æœ‰ä¸€ä¸ªæŒ‡æ•°ï¼Œé€šè¿‡å¤§å†™æˆ–è€…å°å†™çš„ p æ¥æŒ‡å®šã€‚</p></li><li><p>é¢å¤–çš„æ ¼å¼</p><p>æ•°å€¼ç±»å­—é¢é‡å¯ä»¥åŒ…æ‹¬é¢å¤–çš„æ ¼å¼æ¥å¢å¼ºå¯è¯»æ€§ã€‚æ•´æ•°å’Œæµ®ç‚¹æ•°éƒ½å¯ä»¥æ·»åŠ é¢å¤–çš„é›¶å¹¶ä¸”åŒ…å«ä¸‹åˆ’çº¿ï¼Œå¹¶ä¸ä¼šå½±å“å­—é¢é‡ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">let</span> a <span class="hljs-operator">=</span> <span class="hljs-number">000123.456</span><br><span class="hljs-keyword">let</span> b <span class="hljs-operator">=</span> <span class="hljs-number">1_000_0000</span><br><span class="hljs-keyword">let</span> c <span class="hljs-operator">=</span> <span class="hljs-number">1_000_000.000_000_1</span><br></code></pre></td></tr></table></figure></li></ol><h3 id="8-æ•°å€¼ç±»å‹è½¬æ¢"><a href="#8-æ•°å€¼ç±»å‹è½¬æ¢" class="headerlink" title="8. æ•°å€¼ç±»å‹è½¬æ¢"></a>8. æ•°å€¼ç±»å‹è½¬æ¢</h3><p>è¦å°†ä¸€ç§æ•°å­—ç±»å‹è½¬æ¢ä¸ºå¦ä¸€ç§ï¼Œä½ è¦ç”¨å½“å‰å€¼æ¥åˆå§‹åŒ–ä¸€ä¸ªæœŸæœ›ç±»å‹çš„æ–°æ•°å­—ï¼Œè¿™ä¸ªæ•°å­—çš„ç±»å‹å°±æ˜¯ä½ çš„ç›®æ ‡ç±»å‹ã€‚</p><p>å½“å‰å€¼è½¬åŒ–ä¸ºæœŸæœ›ç±»å‹å€¼ï¼š<code>æœŸæœ›ç±»å‹(å½“å‰å€¼) = æœŸæœ›å€¼</code></p><h6 id="8-1-æ•´æ•°è½¬åŒ–"><a href="#8-1-æ•´æ•°è½¬åŒ–" class="headerlink" title="8.1 æ•´æ•°è½¬åŒ–"></a>8.1 æ•´æ•°è½¬åŒ–</h6><p>å¸¸é‡ <code>one</code> æ˜¯ <code>UInt16</code> ç±»å‹ï¼Œç„¶è€Œå¸¸é‡ <code>two</code> æ˜¯ <code>UInt8</code> ç±»å‹ã€‚å®ƒä»¬ä¸èƒ½ç›´æ¥ç›¸åŠ ï¼Œå› ä¸ºå®ƒä»¬ç±»å‹ä¸åŒã€‚æ‰€ä»¥è¦è°ƒç”¨ <code>UInt16(two)</code> æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>UInt16</code> æ•°å­—å¹¶ç”¨ <code>two</code> çš„å€¼æ¥åˆå§‹åŒ–ï¼Œç„¶åä½¿ç”¨è¿™ä¸ªæ–°æ•°å­—æ¥è®¡ç®—ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">let</span> one: <span class="hljs-type">UInt16</span> <span class="hljs-operator">=</span> <span class="hljs-number">1_000</span><br><span class="hljs-keyword">let</span> two: <span class="hljs-type">UInt8</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span><br><span class="hljs-keyword">let</span> sum <span class="hljs-operator">=</span> two <span class="hljs-operator">+</span> <span class="hljs-type">UInt16</span>(two)<br></code></pre></td></tr></table></figure><p>ç°åœ¨ä¸¤ä¸ªæ•°å­—çš„ç±»å‹éƒ½æ˜¯ <code>UInt16</code>ï¼Œå¯ä»¥è¿›è¡Œç›¸åŠ ã€‚ç›®æ ‡å¸¸é‡ <code>sum</code> çš„ç±»å‹è¢«æ¨æ–­ä¸º <code>UInt16</code>ï¼Œå› ä¸ºå®ƒæ˜¯ä¸¤ä¸ª <code>UInt16</code> å€¼çš„å’Œ</p><h6 id="8-2-æ•´æ•°å’Œæµ®ç‚¹æ•°è½¬æ¢"><a href="#8-2-æ•´æ•°å’Œæµ®ç‚¹æ•°è½¬æ¢" class="headerlink" title="8.2 æ•´æ•°å’Œæµ®ç‚¹æ•°è½¬æ¢"></a>8.2 æ•´æ•°å’Œæµ®ç‚¹æ•°è½¬æ¢</h6><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">let</span> one <span class="hljs-operator">=</span> <span class="hljs-number">1</span><br><span class="hljs-keyword">let</span> two <span class="hljs-operator">=</span> <span class="hljs-number">0.14159</span><br><span class="hljs-keyword">let</span> sum <span class="hljs-operator">=</span> <span class="hljs-type">Double</span>(one) <span class="hljs-operator">+</span> two<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¸¸é‡ <code>one</code> çš„å€¼è¢«ç”¨æ¥åˆ›å»ºä¸€ä¸ª <code>Double</code> ç±»å‹çš„å€¼ï¼Œæ‰€ä»¥åŠ å·ä¸¤è¾¹çš„æ•°ç±»å‹é¡»ç›¸åŒã€‚å¦‚æœä¸è¿›è¡Œè½¬æ¢ï¼Œä¸¤è€…æ— æ³•ç›¸åŠ ã€‚</p><h3 id="9-ç±»å‹åˆ«å"><a href="#9-ç±»å‹åˆ«å" class="headerlink" title="9. ç±»å‹åˆ«å"></a>9. ç±»å‹åˆ«å</h3><p>ç±»å‹åˆ«åï¼šç»™ç°æœ‰çš„ç±»å‹å®šä¹‰å¦å¤–ä¸€ä¸ªåå­—ã€‚ä½ å¯ä»¥ä½¿ç”¨<code>typealias</code>å…³é”®å­—æ¥å®šä¹‰ç±»å‹åˆ«åã€‚</p><h3 id="10-å¸ƒå°”å€¼"><a href="#10-å¸ƒå°”å€¼" class="headerlink" title="10. å¸ƒå°”å€¼"></a>10. å¸ƒå°”å€¼</h3><p>å¸ƒå°”å€¼ï¼ˆBoolï¼‰æŒ‡é€»è¾‘ä¸Šçš„å€¼ï¼Œåªèƒ½æ˜¯çœŸæˆ–è€…å‡ï¼Œç”¨å¸ƒå°”å¸¸é‡<code>true</code>å’Œ<code>false</code>è¡¨ç¤ºã€‚</p><h3 id="11-å…ƒç¥–"><a href="#11-å…ƒç¥–" class="headerlink" title="11. å…ƒç¥–"></a>11. å…ƒç¥–</h3><p>å…ƒç¥–ï¼ˆtuplesï¼‰æŠŠå¤šä¸ªå€¼ç»„åˆæˆä¸€ä¸ªå¤åˆå€¼ã€‚å…ƒç¥–å†…çš„å€¼å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œå¹¶ä¸è¦æ±‚æ˜¯ç›¸åŒç±»å‹ã€‚</p><p>ä¾‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">let</span> http404Error <span class="hljs-operator">=</span> (<span class="hljs-number">404</span>,<span class="hljs-string">&quot;Not Found&quot;</span>) <span class="hljs-comment">//http404Error çš„ç±»å‹æ˜¯ (Int, String)ï¼Œå€¼æ˜¯ (404, &quot;Not Found&quot;)</span><br></code></pre></td></tr></table></figure><ol><li><p>å°†å…ƒç¥–å†…å®¹åˆ†è§£ä¸ºå•ç‹¬çš„å¸¸é‡æˆ–è€…å˜é‡</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">let</span> (statusCode, statusMessage) <span class="hljs-operator">=</span> http404Errorprint(<span class="hljs-string">&quot;The status code is <span class="hljs-subst">\(statusCode)</span>&quot;</span>)<br><span class="hljs-comment">// è¾“å‡ºâ€œThe status code is 404â€</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;The status message is <span class="hljs-subst">\(statusMessage)</span>&quot;</span>)<br><span class="hljs-comment">// è¾“å‡ºâ€œThe status message is Not Foundâ€</span><br></code></pre></td></tr></table></figure></li><li><p>åªéœ€è¦ä¸€éƒ¨åˆ†å…ƒç¥–å€¼æ—¶ï¼Œåˆ†è§£çš„æ—¶å€™å¯ä»¥æŠŠè¦å¿½ç•¥çš„éƒ¨åˆ†ç”¨ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰æ ‡è®°</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">let</span> (justTheStatusCode, <span class="hljs-keyword">_</span>) <span class="hljs-operator">=</span> http404Errorprint(<span class="hljs-string">&quot;The status code is <span class="hljs-subst">\(justTheStatusCode)</span>&quot;</span>)<br><span class="hljs-comment">// è¾“å‡ºâ€œThe status code is 404â€</span><br></code></pre></td></tr></table></figure></li><li><p>é€šè¿‡ä¸‹æ ‡æ¥è®¿é—®å…ƒç¥–çš„å•ä¸ªå…ƒç´ ï¼Œä¸‹æ ‡ä»é›¶å¼€å§‹</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;The status code is <span class="hljs-subst">\(http404Error.<span class="hljs-number">0</span>)</span>&quot;</span>)<br><span class="hljs-comment">// è¾“å‡ºâ€œThe status code is 404â€</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;The status message is <span class="hljs-subst">\(http404Error.<span class="hljs-number">1</span>)</span>&quot;</span>)<br><span class="hljs-comment">// è¾“å‡ºâ€œThe status message is Not Foundâ€</span><br></code></pre></td></tr></table></figure></li><li><p>å®šä¹‰å…ƒç¥–çš„æ—¶å€™ç»™å•ä¸ªå…ƒç´ å‘½åï¼Œé€šè¿‡åå­—æ¥è·å–è¿™äº›å…ƒç´ çš„å€¼</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">let</span> http200Status <span class="hljs-operator">=</span> (statusCode: <span class="hljs-number">200</span>, description: <span class="hljs-string">&quot;OK&quot;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;The status code is <span class="hljs-subst">\(http200Status.statusCode)</span>&quot;</span>)<br><span class="hljs-comment">// è¾“å‡ºâ€œThe status code is 200â€</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;The status message is <span class="hljs-subst">\(http200Status.description)</span>&quot;</span>)<br><span class="hljs-comment">// è¾“å‡ºâ€œThe status message is OKâ€</span><br></code></pre></td></tr></table></figure></li></ol><h3 id="12-å¯é€‰ç±»å‹"><a href="#12-å¯é€‰ç±»å‹" class="headerlink" title="12. å¯é€‰ç±»å‹"></a>12. å¯é€‰ç±»å‹</h3><p>ä½¿ç”¨å¯é€‰ç±»å‹ï¼ˆoptionalsï¼‰æ¥å¤„ç†å€¼å¯èƒ½ç¼ºå¤±çš„æƒ…å†µï¼Œå¯é€‰ç±»å‹è¡¨ç¤ºä¸¤ç§å¯èƒ½ï¼šæœ‰å€¼ï¼ˆå¯é€šè¿‡è§£æå¯é€‰ç±»å‹è®¿é—®è¿™ä¸ªå€¼ï¼‰ã€æ— å€¼</p><h6 id="12-1-nil"><a href="#12-1-nil" class="headerlink" title="12.1 nil"></a>12.1 nil</h6><p>ä½ å¯ä»¥ç»™å¯é€‰å˜é‡èµ‹å€¼ä¸º<code>nil</code>ï¼Œæ¥è¡¨ç¤ºå®ƒæ²¡å€¼</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">var</span> code: <span class="hljs-type">Int</span>? <span class="hljs-operator">=</span> <span class="hljs-number">404</span> <span class="hljs-comment">// code åŒ…å«ä¸€ä¸ªå¯é€‰çš„Intå€¼404</span><br>code <span class="hljs-operator">=</span> <span class="hljs-literal">nil</span> <span class="hljs-comment">// code ç°åœ¨ä¸åŒ…å«å€¼</span><br></code></pre></td></tr></table></figure><p>å¦‚æœä½ å£°æ˜äº†ä¸€ä¸ªå¯é€‰ç±»å‹çš„å¸¸é‡æˆ–è€…å˜é‡ä½†æ˜¯æ²¡æœ‰èµ‹å€¼ï¼Œå®ƒä»¬ä¼šè‡ªåŠ¨è¢«è®¾ç½®ä¸ºnil</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">var</span> str: <span class="hljs-type">String</span>? <span class="hljs-comment">// str è¢«è‡ªåŠ¨è®¾ç½®ä¸º nil</span><br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><p>Swift çš„<code>nil</code>å’ŒOCä¸­çš„<code>nil</code>ä¸ä¸€æ ·ï¼Œåœ¨OCä¸­ï¼Œ<code>nil</code>æ˜¯ä¸€ä¸ªæŒ‡å‘ä¸å­˜åœ¨å¯¹è±¡çš„æŒ‡é’ˆã€‚åœ¨Swiftä¸­ï¼Œ<code>nil</code>å¹¶ä¸æ˜¯æŒ‡é’ˆâ€“å®ƒæ˜¯ä¸€ä¸ªç¡®å®šçš„å€¼ï¼Œç”¨æ¥è¡¨ç¤ºå€¼ç¼ºå¤±ã€‚ä»»ä½•ç±»å‹å¯é€‰çŠ¶æ€éƒ½å¯ä»¥è®¾ç½®ä¸ºnilï¼Œä¸åªæ˜¯å¯¹è±¡ç±»å‹ã€‚</p><h6 id="12-2-ifè¯­å¥ä»¥åŠå¼ºåˆ¶è§£æ"><a href="#12-2-ifè¯­å¥ä»¥åŠå¼ºåˆ¶è§£æ" class="headerlink" title="12.2 ifè¯­å¥ä»¥åŠå¼ºåˆ¶è§£æ"></a>12.2 ifè¯­å¥ä»¥åŠå¼ºåˆ¶è§£æ</h6><p>ä½ å¯ä»¥ä½¿ç”¨<code>if</code>è¯­å¥å’Œ<code>nil</code>æ¯”è¾ƒæ¥åˆ¤æ–­ä¸€ä¸ªå¯é€‰å€¼æ˜¯å¦æœ‰å€¼ã€‚å¯ä»¥ä½¿ç”¨ç›¸ç­‰ï¼ˆ<code>==</code>ï¼‰æˆ–è€…ä¸ç­‰ï¼ˆ<code>!=</code>ï¼‰æ¥æ‰§è¡Œæ¯”è¾ƒã€‚</p><p>å½“ä½ ç¡®å®šå¯é€‰ç±»å‹æœ‰å€¼çš„æ—¶å€™ï¼Œå¯ä»¥åœ¨å¯é€‰çš„åç§°åé¢åŠ ä¸ªæ„Ÿå¹å·ï¼ˆ<code>!</code>ï¼‰æ¥è·å–å€¼ã€‚è¿™ä¸ªæ„Ÿå¹å·è¡¨ç¤ºâ€æˆ‘çŸ¥é“è¿™ä¸ªå¯é€‰æœ‰å€¼ï¼Œè¯·ä½¿ç”¨å®ƒã€‚â€œè¿™è¢«ç§°ä¸ºå¯é€‰é¡¹çš„<em>å¼ºåˆ¶è§£æ</em>ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">let</span> possibleNumber <span class="hljs-operator">=</span> <span class="hljs-string">&quot;123&quot;</span><br><span class="hljs-keyword">let</span> convertedNumber <span class="hljs-operator">=</span> <span class="hljs-type">Int</span>(possibleNumber)<span class="hljs-comment">// convertedNumber è¢«æ¨æµ‹ä¸ºç±»å‹ &quot;Int?&quot;ï¼Œ æˆ–è€…ç±»å‹ &quot;optional Int&quot;</span><br><span class="hljs-keyword">if</span>  convertedNumber <span class="hljs-operator">!=</span> <span class="hljs-literal">nil</span> &#123;    <br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;convertedNumber has an integer value of <span class="hljs-subst">\(convertedNumber<span class="hljs-operator">!</span>)</span>.&quot;</span>)<br>&#125;<br><span class="hljs-comment">// è¾“å‡ºâ€œconvertedNumber has an integer value of 123.â€</span><br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><p>ä½¿ç”¨<code>ï¼</code>è¿›è¡Œå¼ºåˆ¶è§£æä¹‹å‰ï¼Œä¸€å®šè¦ç¡®å®šå¯é€‰é¡¹åŒ…å«ä¸€ä¸ªé<code>nil</code>çš„å€¼ã€‚</p><h6 id="12-3-å¯é€‰ç»‘å®š"><a href="#12-3-å¯é€‰ç»‘å®š" class="headerlink" title="12.3 å¯é€‰ç»‘å®š"></a>12.3 å¯é€‰ç»‘å®š</h6><p>ä½¿ç”¨å¯é€‰ç»‘å®šï¼ˆoptional bindingï¼‰æ¥åˆ¤æ–­å¯é€‰ç±»å‹æ˜¯å¦åŒ…å«å€¼ï¼Œå¦‚æœåŒ…å«å°±æŠŠå€¼èµ‹å€¼ç»™ä¸€ä¸ªä¸´æ—¶çš„å¸¸é‡æˆ–è€…å˜é‡ã€‚</p><p>ä¾‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> actualNumber <span class="hljs-operator">=</span> <span class="hljs-type">Int</span>(possibleNumber) &#123;    <br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;<span class="hljs-subst">\&#x27;</span><span class="hljs-subst">\(possibleNumber)</span><span class="hljs-subst">\&#x27;</span> has an integer value of <span class="hljs-subst">\(actualNumber)</span>&quot;</span>)<br>&#125; <span class="hljs-keyword">else</span> &#123;  <br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;<span class="hljs-subst">\&#x27;</span><span class="hljs-subst">\(possibleNumber)</span><span class="hljs-subst">\&#x27;</span> could not be converted to an integer&quot;</span>)<br>&#125;<br><span class="hljs-comment">// è¾“å‡ºâ€œ&#x27;123&#x27; has an integer value of 123â€</span><br></code></pre></td></tr></table></figure><p>è¿™æ®µä»£ç å¯ä»¥è¢«ç†è§£ä¸ºï¼š</p><p>â€œå¦‚æœ Int(possibleNumber) è¿”å›çš„å¯é€‰ <code>Int</code> åŒ…å«ä¸€ä¸ªå€¼ï¼Œåˆ›å»ºä¸€ä¸ªå«åš actualNumber çš„æ–°å¸¸é‡å¹¶å°†å¯é€‰åŒ…å«çš„å€¼èµ‹ç»™å®ƒã€‚â€</p><p>å¦‚æœè½¬æ¢æˆåŠŸï¼Œ<code>actualNumber</code>å¸¸é‡å¯ä»¥åœ¨ifè¯­å¥çš„ç¬¬ä¸€ä¸ªåˆ†æ”¯ä¸­ä½¿ç”¨ã€‚å®ƒå·²ç»è¢«å¯é€‰ç±»å‹åŒ…å«çš„å€¼åˆå§‹åŒ–è¿‡ï¼Œæ‰€ä»¥ä¸éœ€è¦å†ä½¿ç”¨<code>ï¼</code>åç¼€æ¥è·å–å®ƒçš„å€¼ã€‚</p><p>ä½ å¯ä»¥åœ¨å¯é€‰ç»‘å®šä¸­ä½¿ç”¨å¸¸é‡å’Œå˜é‡ã€‚å¦‚æœä½ æƒ³åœ¨ <code>if</code> è¯­å¥çš„ç¬¬ä¸€ä¸ªåˆ†æ”¯ä¸­æ“ä½œ <code>actualNumber</code> çš„å€¼ï¼Œä½ å¯ä»¥æ”¹æˆ <code>if var actualNumber</code>ï¼Œè¿™æ ·å¯é€‰ç±»å‹åŒ…å«çš„å€¼å°±ä¼šè¢«èµ‹ç»™ä¸€ä¸ªå˜é‡è€Œéå¸¸é‡ã€‚</p><p>ä½ å¯ä»¥åŒ…å«å¤šä¸ªå¯é€‰ç»‘å®šæˆ–å¤šä¸ªå¸ƒå°”æ¡ä»¶åœ¨ä¸€ä¸ª<code>if</code>è¯­å¥ä¸­ï¼Œåªè¦ç”¨é€—å·éš”å¼€å°±è¡Œã€‚åªè¦ä»»æ„ä¸€ä¸ªå¯é€‰ç»‘å®šçš„å€¼ä¸º<code>nil</code>ï¼Œæˆ–è€…ä»»æ„ä¸€ä¸ªå¸ƒå°”æ¡ä»¶ä¸º<code>false</code>ï¼Œåˆ™æ•´ä¸ª<code>if</code>æ¡ä»¶åˆ¤æ–­ä¸º<code>false</code>ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> firstNumber <span class="hljs-operator">=</span> <span class="hljs-type">Int</span>(<span class="hljs-string">&quot;4&quot;</span>), <span class="hljs-keyword">let</span> secondNumber <span class="hljs-operator">=</span> <span class="hljs-type">Int</span>(<span class="hljs-string">&quot;42&quot;</span>), firstNumber <span class="hljs-operator">&lt;</span> secondNumber <span class="hljs-operator">&amp;&amp;</span> secondNumber <span class="hljs-operator">&lt;</span> <span class="hljs-number">100</span> &#123;   <br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;<span class="hljs-subst">\(firstNumber)</span> &lt; <span class="hljs-subst">\(secondNumber)</span> &lt; 100&quot;</span>)<br>&#125;<br><span class="hljs-comment">// è¾“å‡ºâ€œ4 &lt; 42 &lt; 100â€</span><br></code></pre></td></tr></table></figure><h6 id="12-4-éšç¤ºè§£æå¯é€‰ç±»å‹"><a href="#12-4-éšç¤ºè§£æå¯é€‰ç±»å‹" class="headerlink" title="12.4 éšç¤ºè§£æå¯é€‰ç±»å‹"></a>12.4 éšç¤ºè§£æå¯é€‰ç±»å‹</h6><p>æŠŠæƒ³è¦ç”¨ä½œå¯é€‰ç±»å‹çš„åé¢çš„é—®å·ï¼ˆString?ï¼‰æ”¹ä¸ºæ„Ÿå¹å·ï¼ˆString!ï¼‰æ¥å£°æ˜ä¸€ä¸ªéšç¤ºè§£æçš„å¯é€‰ç±»å‹ã€‚</p><p>ä¸€ä¸ªéšç¤ºè§£æå¯é€‰ç±»å‹å…¶å®å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„å¯é€‰ç±»å‹ï¼Œä½†æ˜¯å¯ä»¥è¢«å½“åšéå¯é€‰ç±»å‹æ¥ä½¿ç”¨ï¼Œå¹¶ä¸éœ€è¦æ¯æ¬¡éƒ½ä½¿ç”¨è§£ææ¥è·å–å¯é€‰å€¼ã€‚</p><p>ä¾‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">let</span> possibleString: <span class="hljs-type">String</span>? <span class="hljs-operator">=</span> <span class="hljs-string">&quot;An optional string.&quot;</span><br><span class="hljs-keyword">let</span> forcedString: <span class="hljs-type">String</span> <span class="hljs-operator">=</span> possibleString<span class="hljs-operator">!</span> <span class="hljs-comment">// éœ€è¦æ„Ÿå¹å·æ¥è·å–å€¼</span><br><span class="hljs-keyword">let</span> assumedString: <span class="hljs-type">String</span>! <span class="hljs-operator">=</span> <span class="hljs-string">&quot;An implicitly unwrapped optional string.&quot;</span><br><span class="hljs-keyword">let</span> implicitString: <span class="hljs-type">String</span> <span class="hljs-operator">=</span> assumedString  <span class="hljs-comment">// ä¸éœ€è¦æ„Ÿå¹å·</span><br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><p>å½“å¯é€‰ç±»å‹è¢«ç¬¬ä¸€æ¬¡èµ‹å€¼ä¹‹åå°±å¯ä»¥ç¡®å®šä¹‹åä¸€ç›´æœ‰å€¼çš„æ—¶å€™ï¼Œéšå¼è§£æå¯é€‰ç±»å‹éå¸¸æœ‰ç”¨ã€‚å¦‚æœä¸€ä¸ªå˜é‡ä¹‹åå¯èƒ½å˜æˆ<code>nil</code>çš„è¯è¯·ä¸è¦ä½¿ç”¨éšç¤ºè§£æå¯é€‰ç±»å‹ã€‚å¦‚æœä½ éœ€è¦åœ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸä¸­åˆ¤æ–­æ˜¯å¦æ˜¯<code>nil</code>çš„è¯ï¼Œè¯·ä½¿ç”¨æ™®é€šå¯é€‰ç±»å‹ã€‚</p><h3 id="13-é”™è¯¯å¤„ç†"><a href="#13-é”™è¯¯å¤„ç†" class="headerlink" title="13. é”™è¯¯å¤„ç†"></a>13. é”™è¯¯å¤„ç†</h3><p>ä½ å¯ä»¥ä½¿ç”¨ é”™è¯¯å¤„ç†ï¼ˆerror handlingï¼‰ æ¥åº”å¯¹ç¨‹åºæ‰§è¡Œä¸­å¯èƒ½ä¼šé‡åˆ°çš„é”™è¯¯æ¡ä»¶ã€‚</p><p>ç›¸å¯¹äºå¯é€‰ä¸­è¿ç”¨å€¼çš„å­˜åœ¨ä¸ç¼ºå¤±æ¥è¡¨è¾¾å‡½æ•°çš„æˆåŠŸä¸å¤±è´¥ï¼Œé”™è¯¯å¤„ç†å¯ä»¥æ¨æ–­å¤±è´¥çš„åŸå› ï¼Œå¹¶ä¼ æ’­è‡³ç¨‹åºçš„å…¶ä»–éƒ¨åˆ†ã€‚</p><p>å½“ä¸€ä¸ªå‡½æ•°é‡åˆ°é”™è¯¯æ¡ä»¶ï¼Œå®ƒèƒ½æŠ¥é”™ã€‚è°ƒç”¨å‡½æ•°çš„åœ°æ–¹èƒ½æŠ›å‡ºé”™è¯¯æ¶ˆæ¯å¹¶åˆç†å¤„ç†ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">canThrowAnError</span>()</span> <span class="hljs-keyword">throws</span> &#123;   <br>  <span class="hljs-comment">// è¿™ä¸ªå‡½æ•°æœ‰å¯èƒ½æŠ›å‡ºé”™è¯¯</span><br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸€ä¸ªå‡½æ•°å¯ä»¥é€šè¿‡åœ¨å£°æ˜ä¸­æ·»åŠ  throws å…³é”®è¯æ¥æŠ›å‡ºé”™è¯¯æ¶ˆæ¯ã€‚å½“ä½ çš„å‡½æ•°èƒ½æŠ›å‡ºé”™è¯¯æ¶ˆæ¯æ—¶ï¼Œä½ åº”è¯¥åœ¨è¡¨è¾¾å¼ä¸­å‰ç½® try å…³é”®è¯ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">do</span> &#123;    <br>  <span class="hljs-keyword">try</span> canThrowAnError()   <br>  <span class="hljs-comment">// æ²¡æœ‰é”™è¯¯æ¶ˆæ¯æŠ›å‡º</span><br>&#125; <span class="hljs-keyword">catch</span> &#123;   <br>  <span class="hljs-comment">// æœ‰ä¸€ä¸ªé”™è¯¯æ¶ˆæ¯æŠ›å‡º</span><br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸€ä¸ª do è¯­å¥åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„åŒ…å«ä½œç”¨åŸŸï¼Œä½¿å¾—é”™è¯¯èƒ½è¢«ä¼ æ’­åˆ°ä¸€ä¸ªæˆ–å¤šä¸ª catch ä»å¥ã€‚</p><h3 id="14-æ–­è¨€å’Œå…ˆå†³æ¡ä»¶"><a href="#14-æ–­è¨€å’Œå…ˆå†³æ¡ä»¶" class="headerlink" title="14. æ–­è¨€å’Œå…ˆå†³æ¡ä»¶"></a>14. æ–­è¨€å’Œå…ˆå†³æ¡ä»¶</h3><p>æ–­è¨€å’Œå…ˆå†³æ¡ä»¶æ˜¯åœ¨è¿è¡Œæ—¶æ‰€åšçš„æ£€æŸ¥ã€‚ä½ å¯ä»¥ç”¨ä»–ä»¬æ¥æ£€æŸ¥åœ¨æ‰§è¡Œåç»­ä»£ç ä¹‹å‰æ˜¯å¦ä¸€ä¸ªå¿…è¦çš„æ¡ä»¶å·²ç»è¢«æ»¡è¶³äº†ã€‚å¦‚æœæ–­è¨€æˆ–è€…å…ˆå†³æ¡ä»¶ä¸­çš„å¸ƒå°”æ¡ä»¶è¯„ä¼°çš„ç»“æœä¸º trueï¼ˆçœŸï¼‰ï¼Œåˆ™ä»£ç åƒå¾€å¸¸ä¸€æ ·ç»§ç»­æ‰§è¡Œã€‚å¦‚æœå¸ƒå°”æ¡ä»¶è¯„ä¼°ç»“æœä¸º falseï¼ˆå‡ï¼‰ï¼Œç¨‹åºçš„å½“å‰çŠ¶æ€æ˜¯æ— æ•ˆçš„ï¼Œåˆ™ä»£ç æ‰§è¡Œç»“æŸï¼Œåº”ç”¨ç¨‹åºä¸­æ­¢ã€‚</p><p>æ–­è¨€å’Œå…ˆå†³æ¡ä»¶çš„ä¸åŒç‚¹æ˜¯ï¼Œä»–ä»¬ä»€ä¹ˆæ—¶å€™è¿›è¡ŒçŠ¶æ€æ£€æµ‹ï¼šæ–­è¨€ä»…åœ¨è°ƒè¯•ç¯å¢ƒè¿è¡Œï¼Œè€Œå…ˆå†³æ¡ä»¶åˆ™åœ¨è°ƒè¯•ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæ–­è¨€çš„æ¡ä»¶å°†ä¸ä¼šè¿›è¡Œè¯„ä¼°ã€‚è¿™ä¸ªæ„å‘³ç€ä½ å¯ä»¥ä½¿ç”¨å¾ˆå¤šæ–­è¨€åœ¨ä½ çš„å¼€å‘é˜¶æ®µï¼Œä½†æ˜¯è¿™äº›æ–­è¨€åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¸ä¼šäº§ç”Ÿä»»ä½•å½±å“ã€‚</p><h6 id="14-1-ä½¿ç”¨æ–­è¨€è¿›è¡Œè°ƒè¯•"><a href="#14-1-ä½¿ç”¨æ–­è¨€è¿›è¡Œè°ƒè¯•" class="headerlink" title="14.1 ä½¿ç”¨æ–­è¨€è¿›è¡Œè°ƒè¯•"></a>14.1 ä½¿ç”¨æ–­è¨€è¿›è¡Œè°ƒè¯•</h6><p>ä½ å¯ä»¥è°ƒç”¨ Swift æ ‡å‡†åº“çš„ <code>c(_:_:file:line:)</code> å‡½æ•°æ¥å†™ä¸€ä¸ªæ–­è¨€ã€‚å‘è¿™ä¸ªå‡½æ•°ä¼ å…¥ä¸€ä¸ªç»“æœä¸º true æˆ–è€… false çš„è¡¨è¾¾å¼ä»¥åŠä¸€æ¡ä¿¡æ¯ï¼Œå½“è¡¨è¾¾å¼çš„ç»“æœä¸º false çš„æ—¶å€™è¿™æ¡ä¿¡æ¯ä¼šè¢«æ˜¾ç¤ºã€‚</p><p>ä¾‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">let</span> age <span class="hljs-operator">=</span> <span class="hljs-operator">-</span><span class="hljs-number">3</span><br><span class="hljs-built_in">assert</span>(age <span class="hljs-operator">&gt;=</span> <span class="hljs-number">0</span>, <span class="hljs-string">&quot;A person&#x27;s age cannot be less than zero&quot;</span>) <span class="hljs-comment">// å› ä¸º age &lt; 0ï¼Œæ‰€ä»¥æ–­è¨€ä¼šè§¦å‘</span><br><span class="hljs-comment">//å¦‚æœä¸éœ€è¦æ–­è¨€ä¿¡æ¯ï¼Œå¯ä»¥å°±åƒè¿™æ ·å¿½ç•¥æ‰</span><br><span class="hljs-built_in">assert</span>(age <span class="hljs-operator">&gt;=</span> <span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><p>å¦‚æœä»£ç å·²ç»æ£€æŸ¥äº†æ¡ä»¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ assertionFailure(_:file:line:) å‡½æ•°æ¥è¡¨æ˜æ–­è¨€å¤±è´¥äº†.</p><p>ä¾‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">if</span> age <span class="hljs-operator">&gt;</span> <span class="hljs-number">10</span> &#123;  <br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;You can ride the roller-coaster or the ferris wheel.&quot;</span>)<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> age <span class="hljs-operator">&gt;</span> <span class="hljs-number">0</span> &#123;  <br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;You can ride the ferris wheel.&quot;</span>)<br>&#125; <span class="hljs-keyword">else</span> &#123;    <br>  <span class="hljs-built_in">assertionFailure</span>(<span class="hljs-string">&quot;A person&#x27;s age can&#x27;t be less than zero.&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h6 id="14-2-å¼ºåˆ¶æ‰§è¡Œå…ˆå†³æ¡ä»¶"><a href="#14-2-å¼ºåˆ¶æ‰§è¡Œå…ˆå†³æ¡ä»¶" class="headerlink" title="14.2 å¼ºåˆ¶æ‰§è¡Œå…ˆå†³æ¡ä»¶"></a>14.2 å¼ºåˆ¶æ‰§è¡Œå…ˆå†³æ¡ä»¶</h6><p>ä½ å¯ä»¥ä½¿ç”¨å…¨å±€ precondition(<em>:</em>:file:line:) å‡½æ•°æ¥å†™ä¸€ä¸ªå…ˆå†³æ¡ä»¶ã€‚å‘è¿™ä¸ªå‡½æ•°ä¼ å…¥ä¸€ä¸ªç»“æœä¸º true æˆ–è€… false çš„è¡¨è¾¾å¼ä»¥åŠä¸€æ¡ä¿¡æ¯ï¼Œå½“è¡¨è¾¾å¼çš„ç»“æœä¸º false çš„æ—¶å€™è¿™æ¡ä¿¡æ¯ä¼šè¢«æ˜¾ç¤ºã€‚</p><p>ä¾‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-comment">// åœ¨ä¸€ä¸ªä¸‹æ ‡çš„å®ç°é‡Œ...precondition(index &gt; 0, &quot;Index must be greater than zero.&quot;)</span><br></code></pre></td></tr></table></figure><p>ä½ å¯ä»¥è°ƒç”¨ preconditionFailure(_:file:line:) æ–¹æ³•æ¥è¡¨æ˜å‡ºç°äº†ä¸€ä¸ªé”™è¯¯ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>iOS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Swift</tag>
      
      <tag>Swiftå­¦ä¹ </tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Swift_åŸºæœ¬è¿ç®—ç¬¦</title>
    <link href="/2021/11/30/Swift/Swift_%E5%9F%BA%E6%9C%AC%E8%BF%90%E7%AE%97%E7%AC%A6/"/>
    <url>/2021/11/30/Swift/Swift_%E5%9F%BA%E6%9C%AC%E8%BF%90%E7%AE%97%E7%AC%A6/</url>
    
    <content type="html"><![CDATA[<p>è¿ç®—ç¬¦æ˜¯æ£€æŸ¥ã€æ”¹å˜ã€åˆå¹¶å€¼çš„ç‰¹æ®Šç¬¦å·å’ŒçŸ­è¯­ã€‚</p><h3 id="æœ¯è¯­"><a href="#æœ¯è¯­" class="headerlink" title="æœ¯è¯­"></a>æœ¯è¯­</h3><p>è¿ç®—ç¬¦åˆ†ä¸ºä¸€å…ƒã€äºŒå…ƒå’Œä¸‰å…ƒè¿ç®—ç¬¦ï¼š</p><ul><li><p>ä¸€å…ƒè¿ç®—ç¬¦å¯¹å•ä¸€å¯¹è±¡æ“ä½œï¼ˆå¦‚<code>-a</code>ï¼‰ã€‚ä¸€å…ƒè¿ç®—ç¬¦åˆ†ä¸ºå‰ç½®è¿ç®—ç¬¦å’Œåç½®è¿ç®—ç¬¦ï¼Œå‰ç½®è¿ç®—ç¬¦éœ€è¦ç´§è·Ÿåœ¨æ“ä½œå¯¹è±¡ä¹‹å‰ï¼ˆå¦‚<code>!b</code>ï¼‰ï¼Œåç½®è¿ç®—ç¬¦éœ€è¦ç´§è·Ÿåœ¨æ“ä½œå¯¹è±¡ä¹‹åï¼ˆå¦‚<code>c!</code>ï¼‰</p></li><li><p>äºŒå…ƒè¿ç®—ç¬¦æ“ä½œä¸¤ä¸ªæ“ä½œå¯¹è±¡ï¼ˆå¦‚<code>2+3</code>ï¼‰ï¼Œæ˜¯ä¸­ç½®çš„ï¼Œå› ä¸ºå®ƒä»¬å‡ºç°åœ¨ä¸¤ä¸ªæ“ä½œæ•°å¯¹è±¡ä¹‹é—´ã€‚</p></li><li><p>ä¸‰å…ƒè¿ç®—ç¬¦æ“ä½œä¸‰ä¸ªæ“ä½œå¯¹è±¡ï¼ŒåƒCè¯­è¨€ä¸€æ ·ï¼ŒSwiftåªæœ‰ä¸€ä¸ªä¸‰å…ƒè¿ç®—ç¬¦ï¼Œå°±æ˜¯ä¸‰ç›®è¿ç®—ç¬¦ï¼ˆ<code>a ï¼Ÿb : c</code>ï¼‰</p></li></ul><p>å—è¿ç®—ç¬¦å½±å“çš„å€¼å«æ“ä½œæ•°ï¼Œåœ¨è¡¨è¾¾å¼<code>1+2</code>ä¸­ï¼ŒåŠ å·<code>+</code>æ˜¯äºŒå…ƒè¿ç®—ç¬¦ï¼Œå®ƒçš„ä¸¤ä¸ªæ“ä½œæ•°æ˜¯<code>1</code>å’Œ<code>2</code>.</p><h3 id="1-èµ‹å€¼è¿ç®—ç¬¦"><a href="#1-èµ‹å€¼è¿ç®—ç¬¦" class="headerlink" title="1. èµ‹å€¼è¿ç®—ç¬¦"></a>1. èµ‹å€¼è¿ç®—ç¬¦</h3><p>èµ‹å€¼è¿ç®—ç¬¦ï¼ˆ<code>a = b</code>ï¼‰ï¼Œè¡¨ç¤ºç”¨<code>b</code>çš„å€¼æ¥åˆå§‹åŒ–æˆ–è€…æ›´æ–°<code>a</code>çš„å€¼ã€‚</p><p>å¦‚æœèµ‹å€¼çš„å³è¾¹æ˜¯ä¸€ä¸ªå¤šå…ƒæ•°ç»„ï¼Œå®ƒçš„å…ƒç´ å¯ä»¥é©¬ä¸Šè¢«åˆ†è§£æˆå¤šä¸ªå¸¸é‡å’Œå˜é‡ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">let</span> (x,y) <span class="hljs-operator">=</span> (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)<br><span class="hljs-comment">// ç°åœ¨xç­‰äº1ï¼Œyç­‰äº2</span><br></code></pre></td></tr></table></figure><p>ä¸Cè¯­è¨€å’ŒOCè¯­è¨€ä¸åŒï¼ŒSwiftçš„èµ‹å€¼æ“ä½œå¹¶ä¸ä¼šè¿”å›ä»»ä½•å€¼ã€‚</p><h3 id="2-ç®—æ•°è¿ç®—ç¬¦"><a href="#2-ç®—æ•°è¿ç®—ç¬¦" class="headerlink" title="2. ç®—æ•°è¿ç®—ç¬¦"></a>2. ç®—æ•°è¿ç®—ç¬¦</h3><p>Swiftä¸­æ‰€æœ‰æ•°å€¼ç±»å‹éƒ½æ”¯æŒåŸºæœ¬çš„å››åˆ™ç®—æœ¯è¿ç®—ç¬¦ï¼š</p><ul><li>åŠ æ³•ï¼ˆ<code>+</code>ï¼‰</li><li>å‡æ³•ï¼ˆ<code>-</code>ï¼‰</li><li>ä¹˜æ³•ï¼ˆ<code>*</code>ï¼‰</li><li>é™¤æ³•ï¼ˆ<code>/</code>ï¼‰</li></ul><p>ä¸Cå’ŒOCä¸åŒçš„æ˜¯ï¼ŒSwifté»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸å…è®¸åœ¨æ•°å€¼è¿ç®—ä¸­å‡ºç°æº¢å‡ºæƒ…å†µã€‚ä½†æ˜¯ä½ å¯ä»¥ä½¿ç”¨Swiftçš„æº¢å‡ºè¿ç®—ç¬¦æ¥å®ç°æº¢å‡ºè¿ç®—ï¼ˆå¦‚<code>a &amp;+ b</code>ï¼‰ã€‚</p><p>åŠ æ³•è¿ç®—ç¬¦ä¹Ÿå¯ä»¥ç”¨ä½œ<code>String</code>çš„æ‹¼æ¥ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-string">&quot;hello,&quot;</span><span class="hljs-operator">+</span><span class="hljs-string">&quot;world&quot;</span><span class="hljs-comment">// ç­‰äº&quot;hello,world&quot;</span><br></code></pre></td></tr></table></figure><h6 id="2-1-æ±‚ä½™è¿ç®—ç¬¦"><a href="#2-1-æ±‚ä½™è¿ç®—ç¬¦" class="headerlink" title="2.1 æ±‚ä½™è¿ç®—ç¬¦"></a>2.1 æ±‚ä½™è¿ç®—ç¬¦</h6><p>æ±‚ä½™è¿ç®—ç¬¦ï¼ˆa % bï¼‰æ˜¯è®¡ç®—bçš„å¤šå°‘å€åˆšåˆšå¥½å¯ä»¥å®¹å…¥aï¼Œè¿”å›å¤šå‡ºæ¥çš„é‚£éƒ¨åˆ†ï¼ˆä½™æ•°ï¼‰ã€‚</p><p>å–ä½™è¿ç®—å¾—åˆ°ä½™æ•°æ˜¯æœ‰æ­£ä½™æ•°å’Œè´Ÿä½™æ•°çš„åŒºåˆ«çš„ï¼Œå…·ä½“å¯ä»¥çœ‹<a href="https://10.1pxeye.com/negative-remainder-operation/">è´Ÿæ•°å–ä½™è¿ç®—</a>ã€‚</p><h6 id="2-2-ä¸€å…ƒè´Ÿå·è¿ç®—ç¬¦"><a href="#2-2-ä¸€å…ƒè´Ÿå·è¿ç®—ç¬¦" class="headerlink" title="2.2 ä¸€å…ƒè´Ÿå·è¿ç®—ç¬¦"></a>2.2 ä¸€å…ƒè´Ÿå·è¿ç®—ç¬¦</h6><p>æ•°å€¼çš„æ­£è´Ÿå·å¯ä»¥ä½¿ç”¨å‰ç¼€<code>-</code>ï¼ˆå³ä¸€å…ƒè´Ÿå·ç¬¦ï¼‰æ¥åˆ‡æ¢ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">let</span> three <span class="hljs-operator">=</span> <span class="hljs-number">3</span><br><span class="hljs-keyword">let</span> minusThree <span class="hljs-operator">=</span> <span class="hljs-operator">-</span>three       <span class="hljs-comment">// minusThree ç­‰äº -3</span><br><span class="hljs-keyword">let</span> plusThree <span class="hljs-operator">=</span> <span class="hljs-operator">-</span>minusThree   <span class="hljs-comment">// plusThree ç­‰äº 3, æˆ– &quot;è´Ÿè´Ÿ3&quot;</span><br></code></pre></td></tr></table></figure><p>ä¸€å…ƒè´Ÿå·ç¬¦ï¼ˆ<code>-</code>ï¼‰å†™åœ¨æ“ä½œæ•°ä¹‹å‰ï¼Œä¸­é—´æ²¡æœ‰ç©ºæ ¼ã€‚</p><h6 id="2-3-ä¸€å…ƒæ­£å·è¿ç®—ç¬¦"><a href="#2-3-ä¸€å…ƒæ­£å·è¿ç®—ç¬¦" class="headerlink" title="2.3 ä¸€å…ƒæ­£å·è¿ç®—ç¬¦"></a>2.3 ä¸€å…ƒæ­£å·è¿ç®—ç¬¦</h6><p>ä¸€å…ƒæ­£å·ç¬¦ï¼ˆ<code>+</code>ï¼‰ä¸åšä»»ä½•æ”¹å˜åœ°è¿”å›æ“ä½œæ•°çš„å€¼ã€‚</p><h3 id="3-ç»„åˆèµ‹å€¼è¿ç®—ç¬¦"><a href="#3-ç»„åˆèµ‹å€¼è¿ç®—ç¬¦" class="headerlink" title="3. ç»„åˆèµ‹å€¼è¿ç®—ç¬¦"></a>3. ç»„åˆèµ‹å€¼è¿ç®—ç¬¦</h3><p>å¦‚åŒCè¯­è¨€ä¸€æ ·ï¼ŒSwiftä¹Ÿæä¾›æŠŠå…¶ä»–è¿ç®—ç¬¦å’Œèµ‹å€¼è¿ç®—ç¬¦ï¼ˆ<code>=</code>ï¼‰ç»„åˆçš„ç»„åˆèµ‹å€¼è¿ç®—ç¬¦ã€‚</p><p>ä¾‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">var</span> a <span class="hljs-operator">=</span> <span class="hljs-number">1</span><br>a <span class="hljs-operator">+=</span> <span class="hljs-number">2</span><br><span class="hljs-comment">// a ç°åœ¨æ˜¯ 3</span><br></code></pre></td></tr></table></figure><h3 id="4-æ¯”è¾ƒè¿ç®—ç¬¦"><a href="#4-æ¯”è¾ƒè¿ç®—ç¬¦" class="headerlink" title="4. æ¯”è¾ƒè¿ç®—ç¬¦"></a>4. æ¯”è¾ƒè¿ç®—ç¬¦</h3><p>Swiftæ”¯æŒä»¥ä¸‹çš„æ¯”è¾ƒè¿ç®—ç¬¦ï¼š</p><ul><li>ç­‰äºï¼ˆ<code>a == b</code>ï¼‰</li><li>ä¸ç­‰äºï¼ˆ<code>a != b</code>ï¼‰</li><li>å¤§äºï¼ˆ<code>a &gt; b</code>ï¼‰</li><li>å°äºï¼ˆ<code>a &lt; b</code>ï¼‰</li><li>å¤§äºç­‰äºï¼ˆ<code>a &gt;=b</code>ï¼‰</li><li>å°äºç­‰äºï¼ˆ<code>a &lt;= b</code>ï¼‰</li></ul><p>æ³¨æ„ï¼š</p><p>Swift ä¹Ÿæä¾›æ’ç­‰ï¼ˆ===ï¼‰å’Œä¸æ’ç­‰ï¼ˆ!==ï¼‰è¿™ä¸¤ä¸ªæ¯”è¾ƒç¬¦æ¥åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡å®ä¾‹ã€‚</p><h3 id="5-ä¸‰å…ƒè¿ç®—ç¬¦"><a href="#5-ä¸‰å…ƒè¿ç®—ç¬¦" class="headerlink" title="5. ä¸‰å…ƒè¿ç®—ç¬¦"></a>5. ä¸‰å…ƒè¿ç®—ç¬¦</h3><p>ä¸‰å…ƒè¿ç®—ç¬¦çš„ç‰¹æ®Šåœ¨äºå®ƒæ˜¯æœ‰æ˜¯ä¸‰ä¸ªæ“ä½œæ•°çš„è¿ç®—ç¬¦ï¼Œå®ƒçš„å½¢å¼æ˜¯<code>é—®é¢˜</code> ï¼Ÿ<code>ç­”æ¡ˆ1</code> ï¼š<code>ç­”æ¡ˆ2</code>ã€‚å®ƒç®€æ´çš„è¡¨è¾¾æ ¹æ®<code>é—®é¢˜</code>æˆç«‹ä¸å¦åšå‡ºäºŒé€‰ä¸€çš„æ“ä½œã€‚å¦‚æœ<code>é—®é¢˜</code>æˆç«‹ï¼Œè¿”å›<code>ç­”æ¡ˆ1</code>çš„ç»“æœï¼›åä¹‹è¿”å›<code>ç­”æ¡ˆ2</code>çš„ç»“æœã€‚</p><h3 id="6-ç©ºåˆè¿ç®—ç¬¦"><a href="#6-ç©ºåˆè¿ç®—ç¬¦" class="headerlink" title="6. ç©ºåˆè¿ç®—ç¬¦"></a>6. ç©ºåˆè¿ç®—ç¬¦</h3><p>ç©ºåˆè¿ç®—ç¬¦ï¼ˆa ?? bï¼‰å°†å¯¹å¯é€‰ç±»å‹ a è¿›è¡Œç©ºåˆ¤æ–­ï¼Œå¦‚æœ a åŒ…å«ä¸€ä¸ªå€¼å°±è¿›è¡Œè§£åŒ…ï¼Œå¦åˆ™å°±è¿”å›ä¸€ä¸ªé»˜è®¤å€¼ bã€‚è¡¨è¾¾å¼ a å¿…é¡»æ˜¯ Optional ç±»å‹ã€‚é»˜è®¤å€¼ b çš„ç±»å‹å¿…é¡»è¦å’Œ a å­˜å‚¨å€¼çš„ç±»å‹ä¿æŒä¸€è‡´ã€‚</p><h3 id="7-åŒºé—´è¿ç®—ç¬¦"><a href="#7-åŒºé—´è¿ç®—ç¬¦" class="headerlink" title="7. åŒºé—´è¿ç®—ç¬¦"></a>7. åŒºé—´è¿ç®—ç¬¦</h3><p>Swift æä¾›äº†å‡ ç§æ–¹ä¾¿è¡¨è¾¾ä¸€ä¸ªåŒºé—´çš„å€¼çš„åŒºé—´è¿ç®—ç¬¦ã€‚</p><h6 id="7-1-é—­åŒºé—´è¿ç®—ç¬¦"><a href="#7-1-é—­åŒºé—´è¿ç®—ç¬¦" class="headerlink" title="7.1 é—­åŒºé—´è¿ç®—ç¬¦"></a>7.1 é—­åŒºé—´è¿ç®—ç¬¦</h6><p>é—­åŒºé—´è¿ç®—ç¬¦ï¼ˆaâ€¦bï¼‰å®šä¹‰ä¸€ä¸ªåŒ…å«ä» a åˆ° bï¼ˆåŒ…æ‹¬ a å’Œ bï¼‰çš„æ‰€æœ‰å€¼çš„åŒºé—´ã€‚a çš„å€¼ä¸èƒ½è¶…è¿‡ bã€‚</p><h6 id="7-2-åŠå¼€åŒºé—´è¿ç®—ç¬¦"><a href="#7-2-åŠå¼€åŒºé—´è¿ç®—ç¬¦" class="headerlink" title="7.2 åŠå¼€åŒºé—´è¿ç®—ç¬¦"></a>7.2 åŠå¼€åŒºé—´è¿ç®—ç¬¦</h6><p>åŠå¼€åŒºé—´è¿ç®—ç¬¦ï¼ˆa..&lt;bï¼‰å®šä¹‰ä¸€ä¸ªä» a åˆ° b ä½†ä¸åŒ…æ‹¬ b çš„åŒºé—´ã€‚ ä¹‹æ‰€ä»¥ç§°ä¸ºåŠå¼€åŒºé—´ï¼Œæ˜¯å› ä¸ºè¯¥åŒºé—´åŒ…å«ç¬¬ä¸€ä¸ªå€¼è€Œä¸åŒ…æ‹¬æœ€åçš„å€¼</p><h6 id="7-3-å•ä¾§åŒºé—´"><a href="#7-3-å•ä¾§åŒºé—´" class="headerlink" title="7.3 å•ä¾§åŒºé—´"></a>7.3 å•ä¾§åŒºé—´</h6><p>é—­åŒºé—´æ“ä½œç¬¦æœ‰å¦ä¸€ä¸ªè¡¨è¾¾å½¢å¼ï¼Œå¯ä»¥è¡¨è¾¾å¾€ä¸€ä¾§æ— é™å»¶ä¼¸çš„åŒºé—´ ã€‚</p><p>ä¾‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">for</span> name <span class="hljs-keyword">in</span> names[<span class="hljs-number">2</span><span class="hljs-operator">...</span>] &#123;<br>    <span class="hljs-built_in">print</span>(name)<br>&#125;<br><span class="hljs-comment">// Brian</span><br><span class="hljs-comment">// Jack</span><br><br><span class="hljs-keyword">for</span> name <span class="hljs-keyword">in</span> names[<span class="hljs-operator">...</span><span class="hljs-number">2</span>] &#123;<br>    <span class="hljs-built_in">print</span>(name)<br>&#125;<br><span class="hljs-comment">// Anna</span><br><span class="hljs-comment">// Alex</span><br><span class="hljs-comment">// Brian</span><br></code></pre></td></tr></table></figure><h3 id="8-é€»è¾‘è¿ç®—ç¬¦"><a href="#8-é€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="8. é€»è¾‘è¿ç®—ç¬¦"></a>8. é€»è¾‘è¿ç®—ç¬¦</h3><p>é€»è¾‘è¿ç®—ç¬¦çš„æ“ä½œå¯¹è±¡æ˜¯é€»è¾‘å¸ƒå°”å€¼ã€‚Swift æ”¯æŒåŸºäº C è¯­è¨€çš„ä¸‰ä¸ªæ ‡å‡†é€»è¾‘è¿ç®—ã€‚</p><ul><li><p>é€»è¾‘éï¼ˆ<code>!a</code>ï¼‰</p><p>é€»è¾‘éè¿ç®—ç¬¦ï¼ˆ!aï¼‰å¯¹ä¸€ä¸ªå¸ƒå°”å€¼å–åï¼Œä½¿å¾— true å˜ falseï¼Œfalse å˜ trueã€‚</p></li><li><p>é€»è¾‘ä¸ï¼ˆ<code>a &amp;&amp; b</code>ï¼‰</p><p>é€»è¾‘ä¸è¿ç®—ç¬¦ï¼ˆa &amp;&amp; bï¼‰è¡¨è¾¾äº†åªæœ‰ a å’Œ b çš„å€¼éƒ½ä¸º true æ—¶ï¼Œæ•´ä¸ªè¡¨è¾¾å¼çš„å€¼æ‰ä¼šæ˜¯ trueã€‚</p></li><li><p>é€»è¾‘æˆ–ï¼ˆ<code>a || b</code>ï¼‰</p><p>é€»è¾‘æˆ–è¿ç®—ç¬¦ï¼ˆa || bï¼‰æ˜¯ä¸€ä¸ªç”±ä¸¤ä¸ªè¿ç»­çš„ | ç»„æˆçš„ä¸­ç½®è¿ç®—ç¬¦ã€‚å®ƒè¡¨ç¤ºäº†ä¸¤ä¸ªé€»è¾‘è¡¨è¾¾å¼çš„å…¶ä¸­ä¸€ä¸ªä¸º trueï¼Œæ•´ä¸ªè¡¨è¾¾å¼å°±ä¸º trueã€‚</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>iOS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Swift</tag>
      
      <tag>Swiftå­¦ä¹ </tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¸ºHexoæ·»åŠ Gitalkè¯„è®ºç³»ç»Ÿ</title>
    <link href="/2021/10/11/Hexo/%E4%B8%BAHexo%E6%B7%BB%E5%8A%A0Gitalk%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/"/>
    <url>/2021/10/11/Hexo/%E4%B8%BAHexo%E6%B7%BB%E5%8A%A0Gitalk%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/</url>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€:"></a>å‰è¨€:</h3><p>ä¸èƒ½è¯„è®ºçš„blogæ˜¯æ²¡æœ‰çµé­‚çš„ï¼Œæ‰€ä»¥è¿™ç¯‡æ–‡ç« ä¸»è¦è®°å½•äº†hexo blogä½¿ç”¨fluidä¸»é¢˜æ—¶ï¼Œå¦‚ä½•æ·»åŠ Gitalkè¯„è®ºç³»ç»Ÿã€‚æˆ‘ä»¬åœ¨<a href="https://hexo.fluid-dev.com/docs/guide/#%E8%AF%84%E8%AE%BA">fluidä¸»é¢˜é…ç½®</a>è¿™é‡Œé¢å¯ä»¥çœ‹åˆ°å®ƒæ”¯æŒå¥½å¤šè¯„è®ºæ’ä»¶ï¼Œæœ¬ç€ä¸è¿‡å¤šä½¿ç”¨ä¸‰æ–¹çš„åŸåˆ™ï¼Œé€‰æ‹©äº†Gitalkè¿™ä¸ªæœ€ä¸ºæˆ‘ä»¬æœ€ç»ˆçš„æ–¹æ¡ˆã€‚æ•ˆæœè¿˜æ˜¯å‡ºä¹é¢„æ–™çš„å¥½çš„ï¼</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202110141740185.png" alt="Gitalkè¯„è®ºç³»ç»Ÿæ•ˆæœå±•ç¤º"></p><h3 id="ä¸€ã€åˆ›å»ºGitHub-Application"><a href="#ä¸€ã€åˆ›å»ºGitHub-Application" class="headerlink" title="ä¸€ã€åˆ›å»ºGitHub Application"></a>ä¸€ã€åˆ›å»ºGitHub Application</h3><p>å¦‚æœæ²¡æœ‰å¯ä»¥<a href="https://github.com/settings/applications/new">ç‚¹å‡»è¿™é‡Œç”³è¯·</a>ï¼Œç„¶åæŒ‰ç…§æ­¥éª¤æ“ä½œå³å¯ï¼Œè¿™é‡Œæˆ‘ä»¬è¦ç”¨åˆ°çš„æ˜¯<strong>ClientID</strong>å’Œ<strong>ClientSecret</strong>è¿™ä¸¤ä¸ªä¿¡æ¯ã€‚</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202110141740790.png" alt="åˆ›å»ºOAuthApplication"></p><h3 id="äºŒã€é…ç½®-config-fluid-yml"><a href="#äºŒã€é…ç½®-config-fluid-yml" class="headerlink" title="äºŒã€é…ç½®_config.fluid.yml"></a>äºŒã€é…ç½®_config.fluid.yml</h3><p>åœ¨_config.fluid.ymlä¸­ï¼Œæ‰¾åˆ°å¦‚ä¸‹è¿›è¡Œé…ç½®ã€‚éå¸¸çš„ç®€å•ï¼</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> è¯„è®ºæ’ä»¶</span><br><span class="hljs-meta">#</span><span class="bash"> Comment plugin</span><br>comments:<br>  enable: true<br><span class="hljs-meta">  #</span><span class="bash"> æŒ‡å®šçš„æ’ä»¶ï¼Œéœ€è¦åŒæ—¶è®¾ç½®å¯¹åº”æ’ä»¶çš„å¿…è¦å‚æ•°</span><br><span class="hljs-meta">  #</span><span class="bash"> The specified plugin needs to <span class="hljs-built_in">set</span> the necessary parameters at the same time</span><br><span class="hljs-meta">  #</span><span class="bash"> Options: utterances | disqus | gitalk | valine | waline | changyan | livere | remark42 | twikoo | cusdis</span><br>  type: gitalk<br>    <br><span class="hljs-meta">#</span><span class="bash"> Gitalk</span><br><span class="hljs-meta">#</span><span class="bash"> åŸºäº GitHub Issues</span><br><span class="hljs-meta">#</span><span class="bash"> Based on GitHub Issues</span><br><span class="hljs-meta">#</span><span class="bash"> See: https://github.com/gitalk/gitalk<span class="hljs-comment">#options</span></span><br>gitalk:<br>  clientID: &#x27;&#x27; # å¯åœ¨ç¬¬ä¸€æ­¥è·å–<br>  clientSecret: &#x27;&#x27; # å¯åœ¨ç¬¬ä¸€æ­¥è·å–<br>  repo: &#x27;GHTYQ.github.io&#x27; # GitHub repository <br>  owner: &#x27;GHTYQ&#x27; # GitHub repository æ‰€æœ‰è€…ï¼Œå¯ä»¥æ˜¯ä¸ªäººæˆ–è€…ç»„ç»‡<br>  admin: [&#x27;GHTYQ&#x27;] # GitHub repository çš„æ‰€æœ‰è€…å’Œåˆä½œè€… (å¯¹è¿™ä¸ª repository æœ‰å†™æƒé™çš„ç”¨æˆ·)<br>  language: zh-CN<br>  labels: [&#x27;Gitalk&#x27;] # GitHub issue çš„æ ‡ç­¾<br>  perPage: 10 # æ¯æ¬¡åŠ è½½çš„æ•°æ®å¤§å°ï¼Œæœ€å¤š100<br>  pagerDirection: last # è¯„è®ºæ’åºæ–¹å¼ï¼Œ lastä¸ºæŒ‰è¯„è®ºåˆ›å»ºæ—¶é—´å€’å™ï¼Œfirstä¸ºæŒ‰åˆ›å»ºæ—¶é—´æ­£åº<br>  distractionFreeMode: false # ç±»ä¼¼Facebookè¯„è®ºæ¡†çš„å…¨å±é®ç½©æ•ˆæœ<br>  createIssueManually: true # å¦‚æœå½“å‰é¡µé¢æ²¡æœ‰ç›¸åº”çš„ isssue ä¸”ç™»å½•çš„ç”¨æˆ·å±äº adminï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ›å»º issueã€‚å¦‚æœè®¾ç½®ä¸º trueï¼Œåˆ™æ˜¾ç¤ºä¸€ä¸ªåˆå§‹åŒ–é¡µé¢ï¼Œåˆ›å»º issue éœ€è¦ç‚¹å‡» init æŒ‰é’®<br><span class="hljs-meta">  #</span><span class="bash"> é»˜è®¤ proxy å¯èƒ½ä¼šå¤±æ•ˆï¼Œè§£å†³æ–¹æ³•è¯·è§ä¸‹æ–¹é“¾æ¥</span><br><span class="hljs-meta">  #</span><span class="bash"> The default proxy may be invalid, refer to the links <span class="hljs-keyword">for</span> solutions</span><br><span class="hljs-meta">  #</span><span class="bash"> https://github.com/gitalk/gitalk/issues/429</span><br><span class="hljs-meta">  #</span><span class="bash"> https://github.com/Zibri/cloudflare-cors-anywhere</span><br>  proxy: https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token<br></code></pre></td></tr></table></figure><h3 id="ä¸‰ã€Gitalkçš„ä½¿ç”¨"><a href="#ä¸‰ã€Gitalkçš„ä½¿ç”¨" class="headerlink" title="ä¸‰ã€Gitalkçš„ä½¿ç”¨"></a>ä¸‰ã€Gitalkçš„ä½¿ç”¨</h3><p>æŒ‰ç…§ç¬¬äºŒæ­¥é…ç½®å¥½åï¼Œæˆ‘ä»¬åªéœ€å°†å…¶éƒ¨ç½²ä¸Šå»ï¼Œå³å¯å®ŒæˆGitalkåœ¨hexo blog fluidä¸»é¢˜ä¸‹çš„æ·»åŠ ã€‚ä½†æ˜¯éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œä½¿ç”¨çš„æ—¶å€™æˆ‘ä»¬éœ€è¦å…ˆåˆå§‹åŒ–issueï¼Œæ‰èƒ½ä½¿ç”¨ï¼</p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul><li><a href="https://github.com/gitalk/gitalk">Gitalk</a></li><li><a href="https://hexo.fluid-dev.com/docs/guide/#%E8%AF%84%E8%AE%BA">Fluidé…ç½®æŒ‡å—</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>Blog</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Blog</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexo+Typoraä¼˜é›…çš„ç¼–å†™blog</title>
    <link href="/2021/10/09/Hexo/Hexo-Typora%E4%BC%98%E9%9B%85%E7%9A%84%E7%BC%96%E5%86%99blog/"/>
    <url>/2021/10/09/Hexo/Hexo-Typora%E4%BC%98%E9%9B%85%E7%9A%84%E7%BC%96%E5%86%99blog/</url>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€:"></a>å‰è¨€:</h3><p>ä½¿ç”¨è¿‡hexoçš„äººåº”è¯¥éƒ½çŸ¥é“å®ƒæœ‰ä¸€ä¸ªä¸å¤ªæ–¹ä¾¿çš„åœ°æ–¹å°±æ˜¯ç¼–å†™blogï¼Œä½œä¸ºä¸€ä¸ªtyporaçš„æ·±åº¦ç”¨æˆ·ï¼Œå°±æƒ³ç€èƒ½å¤Ÿå°†è¿™ä¸¤ä¸ªç»“åˆèµ·æ¥ä½¿ç”¨ï¼Œå› ä¸ºtyporaçš„å®æ—¶é¢„è§ˆå¯¹äºç¼–å†™mdæ–‡ä»¶éå¸¸å‹å¥½ï¼Œè€Œä¸”æˆ‘ä»¬é€šè¿‡typoraæ‰“å¼€çš„æ–‡ä»¶ï¼Œå¯ä»¥å¾ˆå¥½çš„çœ‹åˆ°ç›®å½•ç»“æ„ï¼Œå®Œå…¨å¯ä»¥å°†typoraå½“åšhexoçš„adminã€‚ä¸‹é¢å°±çœ‹ä¸‹å¦‚ä½•å°†ç»“åˆèµ·æ¥ä½¿ç”¨å§ï¼</p><h3 id="ä¸€ã€Hexo-Typoraç¼–å†™blog"><a href="#ä¸€ã€Hexo-Typoraç¼–å†™blog" class="headerlink" title="ä¸€ã€Hexo+Typoraç¼–å†™blog"></a>ä¸€ã€Hexo+Typoraç¼–å†™blog</h3><ol><li><p>æ‰¾åˆ°hexoä¸‹å­˜æ”¾èµ„æºçš„sourceæ–‡ä»¶å¤¹ï¼Œä½¿ç”¨typoraæ‰“å¼€ï¼Œè¿™é‡Œå¯ä»¥çœ‹åˆ°æˆ‘æˆ‘ä»¬æ•´ä½“çš„æ–‡ä»¶ç›®å½•ã€‚</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202110141754268.png" alt="æ‰“å¼€sourceæ–‡ä»¶"></p></li><li><p>åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨hexo new â€˜titleâ€™çš„æ–¹å¼æ–°å»ºä¸€ç¯‡æ–‡ç« ï¼Œè¿™æ—¶å€™åœ¨typoraä¸­_posts æ–‡ä»¶å¤¹ä¸‹å¯ä»¥çœ‹åˆ°æ–°å»ºçš„æ–‡ç« ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ç¯‡æ–‡ç« ç§»åŠ¨åˆ°æˆ‘ä»¬è‡ªå®šä¹‰çš„æ–‡ä»¶å¤¹ä¸‹ï¼Œæ–¹ä¾¿æˆ‘ä»¬åˆ†ç±»åŒºåˆ†ã€‚ï¼ˆä¸Šå›¾æ˜¯å·²ç»ç§»åŠ¨å¥½æ–‡ç« ä½ç½®çš„ï¼‰ï¼ˆCocoapodsã€Hexoã€iOSè¿™ä¸‰ä¸ªæ–‡ä»¶å¤¹æ˜¯æˆ‘è‡ªå·±æ–¹ä¾¿åŒºåˆ†åˆ›å»ºçš„ï¼Œå®ƒä»¬ä¸å½±å“hexoè¿›è¡Œæœ¬åœ°é¢„è§ˆï¼‰</p></li><li><p>ç¼–å†™mdæ–‡ä»¶çš„æ—¶å€™ï¼Œå¦‚æœä½ hexoæœ¬åœ°é¢„è§ˆä¹Ÿæ˜¯æ‰“å¼€çš„ï¼Œcommand+sä¿å­˜åï¼Œhexoæœ¬åœ°èµ„æºä¹Ÿä¼šå®æ—¶æ›´æ–°ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨hexoæœ¬åœ°æœåŠ¡å’Œtyporaä¸­éƒ½èƒ½çœ‹åˆ°æ–‡ç« çš„å±•ç¤ºæ•ˆæœã€‚</p></li><li><p>ç¼–å†™å®Œæˆåå¯ä»¥ç›´æ¥é€šè¿‡sourceTreeç­‰ä»£ç ç®¡ç†å·¥å…·æäº¤ä¿®æ”¹ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨é¡¹ç›®ä¸­å·²ç»æ·»åŠ äº†travisï¼Œå®ƒä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬éƒ¨ç½²ï¼Œéå¸¸çš„æ–¹ä¾¿ã€‚</p></li></ol><h3 id="äºŒã€ä½¿ç”¨æœ¬åœ°å›¾ç‰‡"><a href="#äºŒã€ä½¿ç”¨æœ¬åœ°å›¾ç‰‡" class="headerlink" title="äºŒã€ä½¿ç”¨æœ¬åœ°å›¾ç‰‡"></a>äºŒã€ä½¿ç”¨æœ¬åœ°å›¾ç‰‡</h3><p>ä½¿ç”¨çš„æœ¬åœ°å›¾ç‰‡çš„æ—¶å€™ä½ ä¼šå‘ç°ï¼Œåœ¨typoraå’Œhexoä¸­å› ä¸ºå›¾ç‰‡è·¯å¾„é—®é¢˜ï¼Œæ€»æ˜¯æœ‰ä¸€ç«¯æ— æ³•æ­£å¸¸æ˜¾ç¤ºå‡ºå›¾ç‰‡ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥æŒ‰ç…§å¦‚ä¸‹æ–¹æ³•è¿›è¡Œè®¾ç½®ã€‚</p><ol><li><p>typoraè®¾ç½®å›¾ç‰‡æ ¹ç›®å½•ï¼Œè®©å›¾ç‰‡åœ¨typoraä¸­æ­£å¸¸çš„æ˜¾ç¤º</p><p>å‡å¦‚æˆ‘ä»¬çš„å›¾ç‰‡æ˜¯æ”¾åœ¨source/post_imgæ–‡ä»¶å¤¹ä¸‹çš„ï¼Œè¿™æ—¶hexoå¦‚æœæƒ³æ˜¾ç¤ºå›¾ç‰‡å°±éœ€è¦é€šè¿‡<code>![](/post_img/image.jpg)</code>çš„å½¢å¼å»è®¿é—®ã€‚è€Œtyporaæ˜¯æ— æ³•æ ¹æ®è¿™æ ·ä¸€ä¸ªè·¯å¾„æ‰¾åˆ°æˆ‘ä»¬éœ€è¦æ˜¾ç¤ºçš„å›¾ç‰‡çš„ã€‚è¿™å°±éœ€è¦æˆ‘ä»¬åœ¨typoraä¸­é€šè¿‡<code>æ ¼å¼-&gt;å›¾åƒ-&gt;è®¾ç½®å›¾ç‰‡çš„æ ¹ç›®å½•</code>çš„è®¾ç½®æ¥è®©typoraä¸­æ­£å¸¸æ˜¾ç¤ºå›¾ç‰‡ã€‚ä¸‹å›¾æ˜¯æˆ‘ä»¬çš„ç›®å½•ç»“æ„ï¼Œæˆ‘ä»¬å°†sourceæ–‡ä»¶å¤¹è®¾ç½®ä¸ºæ ¹ç›®å½•å³ã€‚</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202110141744961.png" alt="ç›®å½•ç»“æ„"></p></li><li><p>typoraè®¾ç½®è®©å›¾ç‰‡åœ¨ä¸Šä¼ æ—¶å¤åˆ¶åˆ°æŒ‡å®šè·¯å¾„ï¼Œè®©å›¾ç‰‡åœ¨hexoä¸­æ­£å¸¸æ˜¾ç¤º</p><p>å¤§å¤šæ•°æ—¶å€™æˆ‘ä»¬çš„å›¾ç‰‡éƒ½æ˜¯æˆªå›¾å¹¶ä¿å­˜åœ¨æ¡Œé¢çš„ï¼Œè¦æƒ³åœ¨hexoä¸­å°†å›¾ç‰‡æ­£å¸¸æ˜¾ç¤ºï¼Œè¿™æ—¶å€™å°±ç”¨åˆ°äº†typoraæä¾›çš„ä¸€ä¸ªå¾ˆå¥½ç”¨çš„åŠŸèƒ½ï¼Œæ’å…¥å›¾ç‰‡æ—¶å¤åˆ¶åˆ°æŒ‡å®šè·¯å¾„ã€‚é€šè¿‡è¿™ä¸ªè®¾ç½®å°±å¾ˆå¿«æ·çš„å°†å›¾ç‰‡æ”¾ç½®åˆ°æˆ‘ä»¬éœ€è¦çš„æŒ‡å®šçš„ä½ç½®ï¼Œéå¸¸çš„æ–¹ä¾¿ã€‚</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202110141744198.png" alt="å›¾ç‰‡æ’å…¥æ—¶å¤åˆ¶åˆ°æŒ‡å®šè·¯å¾„"></p></li></ol><h3 id="ä¸‰ã€ä½¿ç”¨ç½‘ç»œå›¾ç‰‡"><a href="#ä¸‰ã€ä½¿ç”¨ç½‘ç»œå›¾ç‰‡" class="headerlink" title="ä¸‰ã€ä½¿ç”¨ç½‘ç»œå›¾ç‰‡"></a>ä¸‰ã€ä½¿ç”¨ç½‘ç»œå›¾ç‰‡</h3><p>å…ˆç®€å•ä»‹ç»ä¸‹æˆ‘ä»¬çš„å›¾åºŠå®ç°æ–¹æ¡ˆæ˜¯PicGo+githubçš„å½¢å¼æ­å»ºçš„ï¼Œå…·ä½“å®ç°æ­¥éª¤å¯ä»¥å‚è€ƒ<a href="https://picgo.github.io/PicGo-Doc/">PicGo</a>ã€‚é…ç½®å¥½æˆ‘ä»¬çš„å›¾åºŠåï¼Œæˆ‘ä»¬åªéœ€åœ¨typroä¸­è®¾ç½®ä¸‹å›¾åƒé…ç½®ï¼Œä¹‹åå°±å¯ä»¥é‡‡ç”¨ç›´æ¥æ‹–æ‹½çš„å½¢å¼ï¼Œå°†å›¾ç‰‡æ‹–æ‹½åˆ°typoraä¸­ï¼Œå®Œæˆå›¾ç‰‡ä¸Šä¼ åˆ°gitä»“åº“åä»¥é“¾æ¥çš„å½¢å¼æ˜¾ç¤ºå‡ºæ¥ã€‚éå¸¸çš„æ–¹ä¾¿ã€‚</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202110141812242.png" alt="å›¾åƒé…ç½®"></p>]]></content>
    
    
    <categories>
      
      <category>Blog</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Blog</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexo+gh-pages+Travisæ­å»ºå±äºè‡ªå·±çš„blog</title>
    <link href="/2021/10/08/Hexo/Hexo-gh-pages-Travis%E6%90%AD%E5%BB%BA%E5%B1%9E%E4%BA%8E%E8%87%AA%E5%B7%B1%E7%9A%84blog/"/>
    <url>/2021/10/08/Hexo/Hexo-gh-pages-Travis%E6%90%AD%E5%BB%BA%E5%B1%9E%E4%BA%8E%E8%87%AA%E5%B7%B1%E7%9A%84blog/</url>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€:"></a>å‰è¨€:</h3><p>æœ€è¿‘æ—¶é—´ç¨å¾®æœ‰ç‚¹ç©ºé—²ï¼Œå°±æƒ³ç€æŠŠä¹‹å‰å·¥ä½œä¸­é‡åˆ°çš„ä¸€äº›çç¢çš„é—®é¢˜ç»™å½’çº³æ€»ç»“ä¸‹ï¼Œä¸€ç›´åœ¨ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„å·¥å…·<a href="https://www.notion.so/desktop">notion</a>ï¼ä½†æ˜¯ï¼Œä¸çŸ¥é“ä½ ä»¬æœ‰æ²¡æœ‰è¿™ç§æ—¶å€™ï¼Œå°±å¾ˆçªç„¶çš„æƒ³è‡ªå·±æ­å»ºä¸€ä¸ªBlogï¼Œäºæ˜¯å°±å¼€å§‹çœ‹ä¸€äº›æŠ€æœ¯æ–¹æ¡ˆï¼Œæœ€ç»ˆå®šä¸‹æ¥ç”¨hexo+github pageæ˜¯å› ä¸ºçœ‹åˆ°hexoä¸­<a href="https://github.com/fluid-dev/hexo-theme-fluid">fluid</a>è¿™ä¸ªä¸»é¢˜ï¼ŒçœŸçš„éå¸¸å–œæ¬¢ï¼åœ¨æ­å»ºçš„æ—¶å€™ä¹Ÿé‡åˆ°äº†ä¸€äº›å°é—®é¢˜ï¼Œåœ¨è¿™é‡Œæˆ‘æŠŠæ­å»ºçš„æµç¨‹ç»™ç®€æ´è®°å½•ä¸‹æ¥ï¼ˆå…·ä½“çš„å¯ä»¥å‚è€ƒ<a href="https://hexo.io/zh-cn/docs/">hexoå®˜ç½‘</a>ï¼‰ï¼Œæ–¹ä¾¿è‡ªå·±æŸ¥é˜…ï¼Œä¹Ÿå¸Œæœ›èƒ½ç»™æœ‰éœ€è¦çš„äººæä¾›ä¸€äº›å¸®åŠ©å§ï¼</p><h3 id="ä¸€ã€Hexo-çš„å®‰è£…"><a href="#ä¸€ã€Hexo-çš„å®‰è£…" class="headerlink" title="ä¸€ã€Hexo çš„å®‰è£…"></a>ä¸€ã€Hexo çš„å®‰è£…</h3><ol><li><p>åœ¨å®‰è£…hexo ä¹‹å‰ç¡®ä¿è‡ªå·±ç”µè„‘è£…æœ‰gitã€node.js</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> æŸ¥çœ‹gitã€nodeç‰ˆæœ¬</span><br>git --version<br>node -v<br></code></pre></td></tr></table></figure></li><li><p>å®‰è£…hexo</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm install -g hexo-cli<br></code></pre></td></tr></table></figure></li><li><p>å»ºç«™</p><ul><li><p>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾å»ºç«™æ‰€éœ€çš„æ–‡ä»¶</p></li><li><p>cd åˆ°æ‰€åˆ›å»ºçš„æ–‡ä»¶å¤¹ä¸‹æ‰§è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">hexo init<br>npm install<br></code></pre></td></tr></table></figure></li><li><p>å®Œæˆåå¯ä»¥çœ‹åˆ°_config.ymlã€package.jsonã€sourceã€themesç­‰æ–‡ä»¶</p><table><thead><tr><th>æ–‡ä»¶å</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>_config.yml</td><td>ç½‘ç«™çš„é…ç½®ä¿¡æ¯ï¼ŒåŸºæœ¬ä¸Šç½‘ç«™çš„æ‰€æœ‰é…ç½®éƒ½æ˜¯é€šè¿‡è¿™ä¸ªæ–‡ä»¶å®Œæˆçš„</td></tr><tr><td>source</td><td>èµ„æºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜å‚¨æˆ‘ä»¬åˆ›å»ºçš„blogæ–‡ç« ï¼Œå›¾ç‰‡ç­‰ä¿¡æ¯</td></tr><tr><td>themes</td><td>ä¸»é¢˜æ–‡ä»¶å¤¹</td></tr><tr><td>package.json</td><td>åº”ç”¨ç¨‹åºçš„ä¿¡æ¯</td></tr></tbody></table></li></ul></li></ol><p>åˆ°è¿™é‡Œä¸ºæ­¢ï¼Œhexoå°±ç®—æ˜¯å®‰è£…å®Œæˆäº†ï¼Œè¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚</p><h3 id="äºŒã€æ›´æ”¹Hexoä¸»é¢˜"><a href="#äºŒã€æ›´æ”¹Hexoä¸»é¢˜" class="headerlink" title="äºŒã€æ›´æ”¹Hexoä¸»é¢˜"></a>äºŒã€æ›´æ”¹Hexoä¸»é¢˜</h3><ol><li><p>å®‰è£…Fluidä¸»é¢˜ï¼Œå…·ä½“é…ç½®å¯ä»¥æ‰“å¼€<a href="https://hexo.fluid-dev.com/docs/start/#%E4%B8%BB%E9%A2%98%E7%AE%80%E4%BB%8B">Fluidä¸»é¢˜ç½‘ç«™</a>æŸ¥çœ‹ï¼Œä¸Šé¢è®²è§£çš„éå¸¸è¯¦ç»†</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm install --save hexo-theme-fluid<br></code></pre></td></tr></table></figure></li><li><p>åˆ›å»º_config.fluidymlæ–‡ä»¶</p><p>åœ¨åšå®¢ç›®å½•ä¸‹åˆ›å»º <code>_config.fluid.yml</code>ï¼Œå°†ä¸»é¢˜çš„_config.yml å†…å®¹å¤åˆ¶è¿‡å»ã€‚(è¿™é‡Œæˆ‘æ˜¯é€šè¿‡å¤åˆ¶åŸæœ‰çš„ymlæ–‡ä»¶ï¼Œæ›´æ”¹åç§°å®Œæˆçš„ymlæ–‡ä»¶çš„åˆ›å»º)</p></li><li><p>åœ¨_config.ymlä¸­è®¾ç½®ä¸»é¢˜ä¸ºfluid</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> é»˜è®¤çš„æ˜¯landscapeè¿™ä¸ªä¸»é¢˜</span><br>theme: fluid<br></code></pre></td></tr></table></figure></li></ol><h3 id="ä¸‰ã€ä½¿ç”¨Hexoå†™ä½œ"><a href="#ä¸‰ã€ä½¿ç”¨Hexoå†™ä½œ" class="headerlink" title="ä¸‰ã€ä½¿ç”¨Hexoå†™ä½œ"></a>ä¸‰ã€ä½¿ç”¨Hexoå†™ä½œ</h3><ol><li><p>åˆ›å»ºæ–°æ–‡ç« å’Œé¡µé¢</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">hexo new [layout] &#x27;title&#x27;<br></code></pre></td></tr></table></figure><p>layout è¡¨ç¤ºæ–‡ç« å¸ƒå±€ï¼Œé»˜è®¤çš„æ˜¯postï¼Œè¿˜æœ‰draftå’Œpageä¸¤ç§</p><table><thead><tr><th>å¸ƒå±€</th><th>è·¯å¾„</th><th></th></tr></thead><tbody><tr><td>post(é»˜è®¤)</td><td>source/_posts</td><td></td></tr><tr><td>draft</td><td>source/draft</td><td>é»˜è®¤ä¸ä¼šå†é¡µé¢æ˜¾ç¤ºï¼Œéœ€æ˜¯å“Ÿç»hexo publish [layout] â€˜titleâ€™ å°†è‰ç¨¿å‘å¸ƒ</td></tr><tr><td>page</td><td>source</td><td>åˆ›å»ºç±»ä¼¼å…³äºé¡µçš„æ—¶å€™ä½¿ç”¨</td></tr></tbody></table><p>åˆ›å»ºæ–‡ç« æˆåŠŸåï¼Œå¯ä»¥åœ¨mdæ–‡ä»¶ä¸­çœ‹åˆ°å¦‚ä¸‹å†…å®¹ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs markdown">title: title<br>date: 2021-09-28 19:19:55<br><span class="hljs-section">tags:</span><br><span class="hljs-section">----------------------------------------------</span><br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥æŒ‰ç…§ä¸‹é¢çš„æ ¼å¼ä¸ºæ–‡ç« æ·»åŠ tagsã€categories</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs markdown">tag:<br><span class="hljs-bullet">-</span> iOS<br><span class="hljs-bullet">-</span> OC<br>categories:<br><span class="hljs-bullet">-</span> iOS<br></code></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œæ¨èä¸€ä¸ªéå¸¸å¥½ç”¨çš„mdç¼–å†™å·¥å…·<a href="https://typora.io/">Typora</a></p></li><li><p>ç”Ÿæˆé™æ€æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">hexo generate <br><span class="hljs-meta">#</span><span class="bash"> å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼ç®€å†™</span><br>hexo g<br></code></pre></td></tr></table></figure></li><li><p>æœ¬åœ°é¢„è§ˆ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">hexo sever<br><span class="hljs-meta">#</span><span class="bash"> ç®€å†™</span><br>hexo s<br></code></pre></td></tr></table></figure><p>è¿™æ—¶å€™å°±å¯ä»¥é€šè¿‡<em><a href="http://localhost:4000/">http://localhost:4000</a></em>è¿›è¡Œæœ¬åœ°é¢„è§ˆã€‚</p></li></ol><h3 id="å››ã€å°†Hexoéƒ¨ç½²åˆ°Github-Pages"><a href="#å››ã€å°†Hexoéƒ¨ç½²åˆ°Github-Pages" class="headerlink" title="å››ã€å°†Hexoéƒ¨ç½²åˆ°Github Pages"></a>å››ã€å°†Hexoéƒ¨ç½²åˆ°Github Pages</h3><ol><li><p>åˆ›å»ºRepository</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ä½ éœ€è¦å°†ä»“åº“åå‘½åä¸º&lt;ä½ çš„GitHubåç§°&gt;.github.io</p></li><li><p>å°†Travis CI æ·»åŠ åˆ°ä½ çš„GitHubè´¦æˆ·ä¸­</p><p>ç‚¹å‡»<a href="https://github.com/marketplace/travis-ci">Travis CI</a> å°†å…¶æ·»åŠ åˆ°ä½ çš„è´¦æˆ·ä¸­ï¼Œæ·»åŠ æˆåŠŸåå¯ä»¥é€šè¿‡Travis CI ä¸­<a href="https://github.com/settings/installations">Configure access</a>è¿›å…¥ä¸‹é¢ç•Œé¢</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202110141741568.png" alt="TravisCIæ·»åŠ æˆåŠŸ"></p></li><li><p>åœ¨GitHubä¸­é…ç½®Travis CI æƒé™å¹¶æ–°å»ºPersonal Access Token</p><ul><li><p>é…ç½®æƒé™</p><p>ç‚¹å‡»2ä¸­å›¾ç‰‡æ‰€ç¤ºçš„ConfigureæŒ‰é’®ï¼Œä¸ºæˆ‘ä»¬çš„repositoryé…ç½®Travis CI access æƒé™</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202110141741122.png" alt="é…ç½®TravisCIAccessæƒé™"></p></li><li><p>æ–°å»ºtoken</p><p>åœ¨GitHub settingä¸­æ‰¾åˆ°Developer settingï¼Œåˆ›å»º<a href="https://github.com/settings/tokens">Personal access tokens</a> ,åˆ›å»ºçš„æ—¶å€™åå­—æ²¡æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œå¯ä»¥è‡ªç”±å–ã€‚è¿™æ˜¯æˆ‘åˆ›å»ºåçš„ç•Œé¢ï¼Œè®°ä½tokenåªæœ‰åœ¨åˆšåˆ›å»ºçš„æ—¶å€™æ˜¾ç¤ºä¸€æ¬¡ï¼Œä¹‹åä¸ä¼šå†æ˜¾ç¤ºï¼Œæ‰€ä»¥éœ€è¦æˆ‘ä»¬æ‰¾ä¸ªåœ°æ–¹å°†tokenç»™è®°å½•ä¸‹æ¥ã€‚</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202110141742279.png" alt="åˆ›å»ºtoken"></p></li></ul></li><li><p>å›åˆ°Travis CI ä¸­ï¼Œåœ¨Environment Variablesä¸‹æ–°å»ºç¯å¢ƒå˜é‡</p><p>é…ç½®å¥½æƒé™çš„Travis CIé¡µé¢å¦‚ä¸‹</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202110141742737.png" alt="TravisCIé¡µé¢"></p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ç‚¹å‡»Settingsè¿›å…¥ä¸‹é¢é¡µé¢ï¼Œåœ¨è¿™é‡Œé…ç½®ç¯å¢ƒå˜é‡ï¼ŒNameä¸º <em>GH-TOKEN</em>, Value ä¸ºåˆšæ‰åœ¨GitHubç”Ÿæˆçš„tokenï¼Œç„¶åç‚¹å‡»Addä¿å­˜ã€‚</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202110141742469.png" alt="ç¯å¢ƒé…ç½®å˜é‡"></p></li><li><p>åœ¨hexoç«™ç‚¹æ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ª.travis.ymlæ–‡ä»¶, æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo: false<br>language: node_js<br>node_js:<br>  - 13 # use nodejs v10 LTS<br>cache: npm<br>branches:<br>  only:<br>    - master # build master branch only<br>install:<br>  - yarn # <br>script:<br>  - hexo generate # generate static files<br>deploy:<br>  provider: pages<br>  skip-cleanup: true<br>  github-token: $GH_TOKEN<br>  keep-history: true<br>  on:<br>    branch: master<br>  local-dir: public<br></code></pre></td></tr></table></figure></li><li><p>å°†ä¸Šè¿°ä¿®æ”¹æ¨é€åˆ°repository</p><p>å¯ä»¥æ ¹æ®åˆ›å»ºrepositoryæ—¶çš„æç¤ºgit init é‚£äº›ï¼Œå°†æ‰€æœ‰çš„å†…å®¹æ¨é€åˆ°repositoryã€‚Travis CIåº”è¯¥ä¼šè‡ªåŠ¨å¼€å§‹è¿è¡Œï¼Œå¹¶å°†ç”Ÿæˆçš„æ–‡ä»¶æ¨é€åˆ°åŒä¸€repositoryä¸‹gh-pagesåˆ†æ”¯ä¸‹ã€‚</p><p>Travis CI è¿è¡ŒæˆåŠŸçš„åæ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202110141742848.png" alt="éƒ¨ç½²æˆåŠŸ"></p></li><li><p>è®¿é—®ç«™ç‚¹</p><p>å‰å¾€GitHubä¸­repositoryçš„pageç•Œé¢ï¼Œå°†GitHub pages éƒ¨ç½²ä¸ºgh-pagesã€‚ç„¶åå¯ä»¥é€šè¿‡<code>https://&lt;ä½ çš„ GitHub ç”¨æˆ·å&gt;.github.io</code> æŸ¥çœ‹ä½ çš„ç«™ç‚¹æ˜¯å¦å¯ä»¥è®¿é—®</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202110141743884.png" alt="gh-pages"></p></li></ol><h3 id="äº”ã€ç»‘å®šè‡ªå·±çš„åŸŸå"><a href="#äº”ã€ç»‘å®šè‡ªå·±çš„åŸŸå" class="headerlink" title="äº”ã€ç»‘å®šè‡ªå·±çš„åŸŸå"></a>äº”ã€ç»‘å®šè‡ªå·±çš„åŸŸå</h3><p>è¿™é‡Œä»¥é˜¿é‡Œäº‘ä¸ºä¾‹ç®€å•ä»‹ç»</p><ol><li><p>åŸŸåè§£æ</p><p>å¦‚æœæ²¡æœ‰åŸŸåçš„è¯ï¼Œå¯ä»¥å…ˆåˆ°è¿›è¡Œ<a href="https://wanwang.aliyun.com/?spm=5176.21213303.1158081.3.15763edawPg6qP&scm=20140722.S_card@@%E5%8D%A1%E7%89%87@@581._.ID_card@@%E5%8D%A1%E7%89%87@@581-RL_%E5%9F%9F%E5%90%8D%E6%B3%A8%E5%86%8C-OR_ser-V_2-P0_0">åŸŸåæ³¨å†Œ</a>ï¼Œæœ‰åŸŸåçš„å…ˆæ‰¾åˆ°åŸŸååˆ—è¡¨ï¼Œå¦‚ä¸‹ï¼Œç‚¹å‡»è§£æ</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202110151359624.png" alt="åŸŸååˆ—è¡¨"></p><p>é€‰æ‹©æ–°æ‰‹æŒ‡å¯¼ï¼Œè®°å½•å€¼å¯ä»¥é€šè¿‡ping youname.github.io è·å–ï¼Œè§£ææˆåŠŸåä¼šçœ‹åˆ°æœ‰ä¸¤æ¡æ·»åŠ è®°å½•ã€‚</p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202110151404439.png" alt="æ–°æ‰‹æŒ‡å¯¼" style="zoom: 50%;" /></li><li><p>æ·»åŠ CNAMEæ–‡ä»¶</p><p>åœ¨hexo-&gt;sourceæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºCNAMEæ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¡«å†™ä¸ºä½ çš„åŸŸåï¼Œæ·»åŠ å®Œæˆåè®°å¾—é‡æ–°éƒ¨ç½²ã€‚</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202110151410339.png" alt="æˆªå±2021-10-15 ä¸‹åˆ2.10.08"></p></li><li><p>é…ç½®gh-pages</p><p>æ‰“å¼€githubï¼Œæ‰¾åˆ°Github Pagesç•Œé¢ï¼Œé…ç½®Custom domainã€‚</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202110151415545.png" alt="é…ç½®domain"></p></li></ol><h3 id="å…­ã€é‡åˆ°çš„é—®é¢˜"><a href="#å…­ã€é‡åˆ°çš„é—®é¢˜" class="headerlink" title="å…­ã€é‡åˆ°çš„é—®é¢˜"></a>å…­ã€é‡åˆ°çš„é—®é¢˜</h3><ol><li><p>ä¸èƒ½åˆ›å»ºä»¥.å¼€å¤´çš„æ–‡ä»¶ï¼Œå› ä¸ºè¿™äº›åç§°å·²è¢«ç³»ç»Ÿé¢„ç•™</p><p>ä»¥â€™.â€™å¼€å¤´çš„æ–‡ä»¶åˆ›å»ºçš„æ—¶å€™ï¼Œmacç³»ç»Ÿä¼šæç¤ºâ€˜ä¸èƒ½åˆ›å»ºä»¥.å¼€å¤´çš„æ–‡ä»¶ï¼Œå› ä¸ºè¿™äº›åç§°å·²è¢«ç³»ç»Ÿé¢„ç•™â€™ï¼Œ</p><p>Solutionï¼šå¯ä»¥åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">defaults write com.apple.finder AppleShowAllFiles -boolean true ; killall Finder<br></code></pre></td></tr></table></figure></li><li><p>The engine â€œnodeâ€ is incompatible with this module. Expected version â€œ&gt;=12.4.0â€. Got â€œ10.24.1â€</p><p>Sï¼šå°†.travis.ymlä¸­node.jsçš„ç‰ˆæœ¬æ”¹ä¸ºå¤§äº12.4çš„ï¼Œä¹‹å‰å†™çš„æ˜¯10ï¼Œç°åœ¨æ”¹ä¸ºäº†13è§£å†³äº†é—®é¢˜</p></li><li><p>error Your lockfile needs to be updated, but yarn was run with <code>--frozen-lockfile</code>.</p><p>Sï¼šåœ¨.travis.ymlä¸­å¢åŠ </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">install: <br>  - yarn<br></code></pre></td></tr></table></figure></li><li><p>é»˜è®¤ä¸»é¢˜å¯¼è‡´çš„GitHub pagesé—®é¢˜</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202110141743833.png" alt="gh-pages_ques"></p><p>Sï¼šåˆ é™¤é»˜è®¤ä¸»é¢˜landscapeä¸­çš„README.mdæ–‡ä»¶</p></li><li><p>é…ç½®custom damainçš„æ—¶å€™æŠ¥å¦‚ä¸‹é—®é¢˜</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202110151419584.png" alt="é…ç½®domainé—®é¢˜"></p><p>S: æŒ‰ç…§è¦æ±‚åœ¨é˜¿é‡Œäº‘è§£æè®¾ç½®å°†ä¿®æ”¹è®°å½•ä¸­çš„è®°å½•ç±»å‹æ”¹ä¸º<code>CNAME-å°†åªæƒ³å¦å¤–ä¸€ä¸ªåŸŸå</code>ï¼Œå°†è®°å½•å€¼æ”¹ä¸º<code>youname.github.io</code>å³å¯ã€‚</p></li></ol><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul><li><p><a href="https://hexo.io/zh-cn/docs/">Hexoå®˜æ–¹æ–‡æ¡£</a></p></li><li><p><a href="https://hexo.fluid-dev.com/docs/start/#%E4%B8%BB%E9%A2%98%E7%AE%80%E4%BB%8B">Fluidä¸»é¢˜é…ç½®</a></p></li><li><p><a href="https://blog.esunr.xyz/2020/03/TravisCi%E4%BD%BF%E7%94%A8yarn%E5%AE%89%E8%A3%85%E6%9E%84%E5%BB%BA%E5%A4%B1%E8%B4%A5%E5%8E%9F%E5%9B%A0/#2-%E5%88%86%E6%9E%90">Travis Ci å‡ºç° â€œeval yarn â€“frozen-lockfileâ€ æ„å»ºå¤±è´¥è§£å†³æ–¹æ³•</a></p></li></ul>]]></content>
    
    
    <categories>
      
      <category>Blog</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Blog</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>iOS15 ä¸­åº”ç”¨è·Ÿè¸ªå¼¹çª—ä¸æ˜¾ç¤ºè¢«æ‹’</title>
    <link href="/2021/10/08/iOS/%E5%BA%94%E7%94%A8%E8%B7%9F%E8%B8%AA%E5%BC%B9%E7%AA%97%E5%9C%A8iOS15%E4%B8%AD%E8%A2%AB%E6%8B%92/"/>
    <url>/2021/10/08/iOS/%E5%BA%94%E7%94%A8%E8%B7%9F%E8%B8%AA%E5%BC%B9%E7%AA%97%E5%9C%A8iOS15%E4%B8%AD%E8%A2%AB%E6%8B%92/</url>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€:"></a>å‰è¨€:</h3><p>èµ¶ä¸Šå¿«è¦å›½åº†çš„æ—¶æœºä¸Šçº¿ï¼Œå°±å¾ˆæ‹…å¿ƒå®¡æ ¸è¢«æ‹’ï¼Œä¹Ÿå¯èƒ½æ˜¯è¶Šæ‹…å¿ƒè¶Šå®¹æ˜“å‘ç”Ÿå§ï¼Œå®ƒè¿˜æ˜¯æ¥äº†ï¼å“ˆå“ˆï¼ä¸‹é¢å°±ç®€å•è®°å½•ä¸‹é—®é¢˜åŸå› åŠè§£å†³æ–¹æ³•å§ï¼</p><h3 id="ä¸€ã€åŸå› "><a href="#ä¸€ã€åŸå› " class="headerlink" title="ä¸€ã€åŸå› "></a>ä¸€ã€åŸå› </h3><p>å…ˆçœ‹ä¸‹è‹¹æœè¢«æ‹’åŸå› ï¼š</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs tex">Guideline 2.1 - Information Needed<br><br><br>We&#x27;re looking forward to completing our review, but we need more information to continue. Your app uses the AppTrackingTransparency framework, but we are unable to locate the App Tracking Transparency permission request when reviewed on iOS 15.0.<br><br>Since you indicated in App Store Connect that you collect data in order to track the user, we need to confirm that App Tracking Transparency has been correctly implemented.<br><br>Next Steps<br><br>Please explain where we can find the App Tracking Transparency permission request in your app. The request should appear before any data is collected that could be used to track the user.<br><br>If your app does not track users, please update yourÂ app privacy information in App Store Connect. You must have theÂ Account Holder or Admin roleÂ to update app privacy information.<br><br>If you&#x27;ve implemented App Tracking Transparency but the permission request is not appearing on devices running the latest OS, please review theÂ available documentationÂ and confirm App Tracking Transparency has been correctly implemented.<br><br>Resources<br><br>- Tracking is linking data collected from your app with third-party data for advertising purposes, or sharing the collected data with a data broker. Learn more aboutÂ tracking.<br>- See Frequently Asked Questions about theÂ new requirements for apps that track users.<br>- Review developer documentation forÂ App Tracking Transparency.<br><br><br><br>Since your App Store Connect status is Metadata Rejected, we do NOT require a new binary. To revise the metadata, visit App Store Connect to select your app and revise the desired metadata values. Once youâ€™ve completed all changes, reply to this message in Resolution Center and we will continue the review.<br><br><br><br><br></code></pre></td></tr></table></figure><p>å…¶å®åœ¨è¢«æ‹’çš„é‚®ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ¥šçš„çœ‹åˆ°ï¼Œè¢«æ‹’åŸå› æ˜¯å› ä¸ºiOS15ä¸­æˆ‘ä»¬çš„â€æ˜¯å¦å…è®¸appè·Ÿè¸ªè¯·æ±‚â€œçš„å¼¹æ¡†æ²¡æœ‰å¼¹å‡ºï¼Œå¯¼è‡´åº”ç”¨è¢«æ‹’ã€‚çœ‹åˆ°è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘çš„ç¬¬ä¸€ååº”æ˜¯æˆ‘åœ¨iOS14.5æ¨å‡ºçš„æ—¶å€™å°±æœ‰å› ä¸ºæ”¶é›†ç”¨æˆ·ä¿¡æ¯æ²¡æœ‰ç»™æç¤ºè¢«æ‹’ï¼Œå…³äºè¿™ä¸€ç‚¹æˆ‘æ˜¯æœ‰å¤„ç†çš„ã€‚ä½†æ˜¯æ³¨æ„åˆ°è¿™é‡Œè¯´çš„æ˜¯åœ¨iOS15ï¼Œå¯èƒ½æ˜¯è¿™æ¬¡å‡çº§å¸¦æ¥äº†ä»€ä¹ˆæ”¹å˜ã€‚äºæ˜¯å°è¯•åœ¨iOS14ã€15ä¸¤ä¸ªä¸åŒç³»ç»Ÿä¸­åˆ†åˆ«è¿è¥appï¼Œå¯ä»¥å‘ç°åœ¨iOS15ä¸­ç¡®å®æ²¡æœ‰å¼¹çª—ã€‚æ¥ä¸‹æ¥å°±å»Googleäº†ä¸‹å¦‚ä½•è§£å†³ğŸ˜ã€‚</p><h3 id="äºŒã€è§£å†³æ–¹æ³•"><a href="#äºŒã€è§£å†³æ–¹æ³•" class="headerlink" title="äºŒã€è§£å†³æ–¹æ³•"></a>äºŒã€è§£å†³æ–¹æ³•</h3><p>å°†æœ‰å…³ç”¨æˆ·è·Ÿè¸ªå¼¹æ¡†æç¤ºçš„ä»£ç ä»didFinishLaunchingWithOptionsä¸‹æ¢åˆ°applicationDidBecomeActiveä¸‹å³å¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs objective-c">// å°†æç¤ºæ”¾åˆ°è¿™ä¸ªåœ°æ–¹<br>- (void)applicationDidBecomeActive:(UIApplication *)application &#123;<br>    if (@available(iOS 14,*)) &#123;<br>        [ATTrackingManager requestTrackingAuthorizationWithCompletionHandler:^(ATTrackingManagerAuthorizationStatus status) &#123;<br>            if (status == ATTrackingManagerAuthorizationStatusAuthorized) &#123;<br>                NSLog(@&quot;å…è®¸&quot;);<br>            &#125;else&#123;<br>                NSLog(@&quot;ä¸å…è®¸&quot;);<br>            &#125;<br>        &#125;];<br>    &#125;else&#123;<br>        <br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul><li><a href="https://www.reddit.com/r/iOSProgramming/comments/pt41jz/att_prompt_not_showing_on_ios_15/">ATT prompt not showing on iOS 15?</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>iOS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>iOS</tag>
      
      <tag>AppStore</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Swift_Schemeå®ç°åº”ç”¨é—´è·³è½¬</title>
    <link href="/2021/09/28/Swift/Swift_Scheme%E5%AE%9E%E7%8E%B0%E5%BA%94%E7%94%A8%E9%97%B4%E8%B7%B3%E8%BD%AC/"/>
    <url>/2021/09/28/Swift/Swift_Scheme%E5%AE%9E%E7%8E%B0%E5%BA%94%E7%94%A8%E9%97%B4%E8%B7%B3%E8%BD%AC/</url>
    
    <content type="html"><![CDATA[<h3 id="ä¸€ã€URL-Scheme"><a href="#ä¸€ã€URL-Scheme" class="headerlink" title="ä¸€ã€URL Scheme"></a><strong>ä¸€ã€URL Scheme</strong></h3><p>è‹¹æœçš„æ²™ç›’æœºåˆ¶ä½¿Appåªèƒ½è®¿é—®è‡ªå·±çš„æ²™ç›’ï¼Œåœ¨ä¿è¯ç”¨æˆ·çš„å®‰å…¨å’Œéšç§çš„åŒæ—¶ï¼Œä¹Ÿé˜»ç¢äº†Appä¹‹é—´çš„åˆç†é€šä¿¡ã€‚ä¸ºè§£å†³è¿™ä¸€é—®é¢˜ï¼Œè‹¹æœæä¾›äº†å¯ä»¥å®ç°Appä¹‹é—´ç›¸äº’è·³è½¬çš„æ–¹æ³•ï¼šURL Schemeã€‚</p><blockquote><p>URLæ ¼å¼ scheme://host:port/path?query</p></blockquote><h3 id="äºŒã€å®ç°åº”ç”¨Aè·³è½¬åˆ°åº”ç”¨Bï¼ˆä¸å¸¦å‚æ•°ï¼‰"><a href="#äºŒã€å®ç°åº”ç”¨Aè·³è½¬åˆ°åº”ç”¨Bï¼ˆä¸å¸¦å‚æ•°ï¼‰" class="headerlink" title="äºŒã€å®ç°åº”ç”¨Aè·³è½¬åˆ°åº”ç”¨Bï¼ˆä¸å¸¦å‚æ•°ï¼‰"></a><strong>äºŒã€å®ç°åº”ç”¨Aè·³è½¬åˆ°åº”ç”¨Bï¼ˆä¸å¸¦å‚æ•°ï¼‰</strong></h3><ol><li><p>Båº”ç”¨æ·»åŠ URL Scheme</p><p>åœ¨è¦è·³è½¬çš„åº”ç”¨Bçš„target â€“&gt; info ä¸­æ‰¾åˆ°URL Typesï¼Œæ·»åŠ URL Schemeã€‚</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202110141746175.png" alt="åº”ç”¨æ·»åŠ URLScheme"></p><p>Aåº”ç”¨æ·»åŠ ç™½åå•</p><p>iOS 9 ä¹‹ååªæœ‰æ·»åŠ ç™½åå•ä¹‹åæ‰èƒ½å®Œæˆè·³è½¬ã€‚</p><p>åœ¨åº”ç”¨Açš„info.plistæ–‡ä»¶ä¸­æ·»åŠ LSApplicationQueriesSchemeså­—æ®µï¼Œè¯¥å­—æ®µæ˜¯æ•°ç»„ç±»å‹ï¼Œç„¶åæ·»åŠ stringç±»å‹çš„itemï¼Œitemçš„å€¼ä¸ºè¦è·³è½¬çš„Båº”ç”¨çš„schemeã€‚</p><p>åœ¨è¿™é‡Œï¼Œå¦‚æœæˆ‘ä»¬ä¸å°†schemeçš„å€¼æ·»åŠ åˆ°ç™½åå•ï¼Œä¼šæŠ¥<strong>This app is not allowed to query for scheme xxx</strong>ã€‚</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202110141746486.png" alt="æ·»åŠ ç™½åå•"></p></li><li><p>åœ¨åº”ç”¨Aéœ€è¦è·³è½¬çš„åœ°æ–¹å®ç°è·³è½¬æ–¹æ³•</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-comment">//è¿™é‡ŒDemoBæ˜¯å®šä¹‰çš„schemeï¼Œ://æ˜¯å®ç°è·³è½¬çš„æ ¼å¼</span><br><span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span>  url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>.<span class="hljs-keyword">init</span>(string: <span class="hljs-string">&quot;DemoB://&quot;</span>) <span class="hljs-keyword">else</span> &#123; <span class="hljs-keyword">return</span> &#125;<br><span class="hljs-keyword">if</span> <span class="hljs-type">UIApplication</span>.shared.canOpenURL(url) &#123;<br> Â   <span class="hljs-type">UIApplication</span>.shared.open(url, options: [:], completionHandler: <span class="hljs-literal">nil</span>)<br>&#125;<span class="hljs-keyword">else</span>&#123;<br> Â   <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ²¡æœ‰æ­¤åº”ç”¨&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>è·³è½¬çš„å®ç°å¿…é¡»çŸ¥é“è¦è·³è½¬åº”ç”¨çš„schemeï¼ŒiOS9ä¹‹åä¹Ÿå¿…é¡»å°†å…¶æ·»åŠ åˆ°ç™½åå•ä¸­ã€‚</p></li></ol><h3 id="ä¸‰ã€å®ç°åº”ç”¨Aå¸¦å‚æ•°è·³è½¬åˆ°åº”ç”¨B"><a href="#ä¸‰ã€å®ç°åº”ç”¨Aå¸¦å‚æ•°è·³è½¬åˆ°åº”ç”¨B" class="headerlink" title="ä¸‰ã€å®ç°åº”ç”¨Aå¸¦å‚æ•°è·³è½¬åˆ°åº”ç”¨B"></a><strong>ä¸‰ã€å®ç°åº”ç”¨Aå¸¦å‚æ•°è·³è½¬åˆ°åº”ç”¨B</strong></h3><ol><li><p>åŒäºŒä¸­1.2æ­¥éª¤</p></li><li><p>åœ¨åº”ç”¨Aéœ€è¦è·³è½¬çš„åœ°æ–¹å®ç°è·³è½¬æ–¹æ³•</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span>  url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>.<span class="hljs-keyword">init</span>(string: <span class="hljs-string">&quot;DemoB://detailPage?name=taylor&amp;age=22&quot;</span>) <span class="hljs-keyword">else</span> &#123; <span class="hljs-keyword">return</span> &#125;<br><span class="hljs-keyword">if</span> <span class="hljs-type">UIApplication</span>.shared.canOpenURL(url) &#123;<br> Â   <span class="hljs-type">UIApplication</span>.shared.open(url, options: [:], completionHandler: <span class="hljs-literal">nil</span>)<br>  &#125;<span class="hljs-keyword">else</span>&#123;<br> Â   <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ²¡æœ‰æ­¤åº”ç”¨&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>åœ¨åº”ç”¨Bçš„SceneDelegateä¸­å®ç°ç›‘æ§è·³è½¬çš„ä»£ç†æ–¹æ³•</p><p>éœ€è¦æ³¨æ„çš„æ˜¯iOS13ä¹‹åï¼Œéœ€è¦åœ¨SceneDelegateä¸­å®ç°ä¸‹åˆ—æ–¹æ³•ï¼Œåœ¨AppDelegateä¸­å®ç°openURLçš„ç›‘å¬æ˜¯æ— æ•ˆçš„ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">scene</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">scene</span>: <span class="hljs-type">UIScene</span>, <span class="hljs-params">openURLContexts</span> <span class="hljs-params">URLContexts</span>: <span class="hljs-type">Set</span>&lt;<span class="hljs-type">UIOpenURLContext</span>&gt;)</span> &#123;<br> Â  Â   <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URLContexts</span>.first<span class="hljs-operator">?</span>.url <span class="hljs-keyword">else</span> &#123;<br> Â  Â  Â  Â   <span class="hljs-keyword">return</span><br> Â  Â   &#125;<br> Â  Â   <span class="hljs-keyword">let</span> urlComponent <span class="hljs-operator">=</span> <span class="hljs-type">URLComponents</span>.<span class="hljs-keyword">init</span>(url: url, resolvingAgainstBaseURL: <span class="hljs-literal">false</span>)<br> Â  Â   <span class="hljs-comment">// è·å–å‚æ•°</span><br> Â  Â   <span class="hljs-keyword">let</span> items :[<span class="hljs-type">URLQueryItem</span>] <span class="hljs-operator">=</span> urlComponent<span class="hljs-operator">?</span>.queryItems <span class="hljs-operator">??</span> []<br> Â  Â  Â <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> items &#123;<br> Â  Â  Â  Â   <span class="hljs-built_in">print</span>(item.name,item.value <span class="hljs-operator">??</span> <span class="hljs-string">&quot;&quot;</span>)<br> Â  Â   &#125;<br>  &#125;<br></code></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    <categories>
      
      <category>iOS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Swift</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Cocoapodsç§æœ‰åº“æ ¡éªŒæ›´æ–°å¸¸è§é—®é¢˜</title>
    <link href="/2021/09/26/Cocoapods/Cocoapods%E7%A7%81%E6%9C%89%E5%BA%93%E6%A0%A1%E9%AA%8C%E6%9B%B4%E6%96%B0%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/"/>
    <url>/2021/09/26/Cocoapods/Cocoapods%E7%A7%81%E6%9C%89%E5%BA%93%E6%A0%A1%E9%AA%8C%E6%9B%B4%E6%96%B0%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€ï¼š"><a href="#å‰è¨€ï¼š" class="headerlink" title="å‰è¨€ï¼š"></a>å‰è¨€ï¼š</h3><p>è¿™é‡Œè®°å½•äº†æˆ‘åœ¨ä½¿ç”¨cocoapodsç§æœ‰åº“çš„æ—¶å€™é‡åˆ°äº†é—®é¢˜ï¼Œè®°å½•ä¸‹æ¥ï¼Œæ–¹ä¾¿ä»¥åé‡åˆ°åŒæ ·çš„é—®é¢˜æ—¶æŸ¥é˜…ã€‚</p><h3 id="ä¸€ã€Please-make-sure-you-have-the-correct-access-rights-and-the-repository-exists"><a href="#ä¸€ã€Please-make-sure-you-have-the-correct-access-rights-and-the-repository-exists" class="headerlink" title="ä¸€ã€Please make sure you have the correct access rights and the repository exists."></a><strong>ä¸€ã€Please make sure you have the correct access rights and the repository exists.</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs bash">Validating spec<br>https://www.sourcetreeapp.com<br>Cloning spec repo `aliyun-1` from `git@github.com:aliyun/aliyun-specs.git`<br> Â $ /usr/bin/git <span class="hljs-built_in">clone</span> git@github.com:aliyun/aliyun-specs.git -- aliyun-1<br>  Cloning into <span class="hljs-string">&#x27;aliyun-1&#x27;</span>...<br> Â git@github.com: Permission denied (publickey).<br>  fatal: Could not <span class="hljs-built_in">read</span> from remote repository.<br><br>  Please make sure you have the correct access rights<br>  and the repository exists.<br>[!] Unable to add a <span class="hljs-built_in">source</span> with url `git@github.com:aliyun/aliyun-specs.git` named `aliyun-1`.<br>(/usr/bin/git <span class="hljs-built_in">clone</span> git@github.com:aliyun/aliyun-specs.git -- aliyun-1<br><br>Cloning into <span class="hljs-string">&#x27;aliyun-1&#x27;</span>...<br>git@github.com: Permission denied (publickey).<br>fatal: Could not <span class="hljs-built_in">read</span> from remote repository.<br><br>Please make sure you have the correct access rights<br>and the repository exists.<br>)<br>You can try adding it manually <span class="hljs-keyword">in</span> `/Users/mac/.cocoapods/repos` or via `pod repo add`.<br></code></pre></td></tr></table></figure><p>é—®é¢˜ï¼š</p><p>åœ¨æ‰§è¡Œcocoapodsæ¨¡å—å‡çº§æ ¡éªŒçš„æ—¶å€™å‡ºç°è¿™ä¸ªé—®é¢˜ï¼ŒæŸ¥çœ‹äº†ä¸‹ï¼Œæ˜¯podç§æœ‰åº“ä¸­å¼•ç”¨äº†aliyunçš„è¿™ä¸ªèµ„æºã€‚</p><p>è§£å†³ï¼š</p><ol><li>åœ¨~/.cocoapodsä¸­æŸ¥çœ‹äº†ä¸‹nameæ˜¯aliyun-1çš„èµ„æºåº“æ˜¯å­˜åœ¨çš„ï¼Œæƒ³ç€å¯èƒ½æ˜¯é‡å¤å¯¼è‡´çš„é—®é¢˜ï¼Œå°±å°†å®ƒåˆ é™¤ï¼Œé‡æ–°æ ¡éªŒã€‚ä½†æ˜¯ä¾ç„¶å¤±è´¥ã€‚</li><li>æŒ‰ç…§æœ€ä¸‹æ–¹çš„æç¤ºï¼Œä½¿ç”¨â€œpod repo add name sourceâ€çš„æ–¹æ³•ã€‚ä¾ç„¶å¤±è´¥ã€‚</li><li>ç½‘ä¸Šç™¾åº¦äº†ä¸‹ï¼Œè¯´æ˜¯sshç§˜é’¥ç›¸å…³çš„é—®é¢˜ï¼Œä½†æ˜¯æƒ³äº†ä¸‹aliyunè¿™ä¸ªæ˜¯å…¬å…±çš„ï¼Œåº”è¯¥ä¸ä¼šæ˜¯è¿™ä¸ªé—®é¢˜å§ï¼Œä½†æ˜¯ä¸€æ—¶æ²¡æœ‰æ–¹æ³•ï¼Œäºæ˜¯é‡æ–°ç”Ÿæˆäº†sshç§˜é’¥ï¼Œå¹¶åœ¨é¡¹ç›®ç”¨çš„ç›¸å…³gitåº“ä¸­éƒ½åšäº†ä¿®æ”¹ã€‚ä¾ç„¶æ— æ•ˆã€‚</li><li>æœ€ç»ˆè§£å†³æ–¹æ³•ï¼Œè¿”è´¹ç”¨é‡å¤äº†1.2çš„æ–¹æ³•åï¼ŒæˆåŠŸæ ¡éªŒäº†ï¼</li></ol><h3 id="äºŒã€-ERROR-iOS-unknown-Encountered-an-unknown-error"><a href="#äºŒã€-ERROR-iOS-unknown-Encountered-an-unknown-error" class="headerlink" title="äºŒã€- ERROR | [iOS] unknown: Encountered an unknown error"></a>äºŒã€- ERROR | [iOS] unknown: Encountered an unknown error</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">[!] Error installing CTMediator<br> -&gt; xxxxxxxx (1.7.3)<br>    - WARN  | <span class="hljs-built_in">source</span>: Git SSH URLs will NOT work <span class="hljs-keyword">for</span> people behind firewalls configured to only allow HTTP, therefore HTTPS is preferred.<br>    - ERROR | [iOS] unknown: Encountered an unknown error ([!] /usr/bin/git <span class="hljs-built_in">clone</span> https://github.com/casatwy/CTMediator.git /var/folders/dr/y6z2zsxs4m9bxrqxwcdchsnw0000gn/T/d20220111-93058-y6ldtw --template= --single-branch --depth 1 --branch 46<br><br>Cloning into <span class="hljs-string">&#x27;/var/folders/dr/y6z2zsxs4m9bxrqxwcdchsnw0000gn/T/d20220111-93058-y6ldtw&#x27;</span>...<br>fatal: unable to access <span class="hljs-string">&#x27;https://github.com/casatwy/CTMediator.git/&#x27;</span>: Failed to connect to github.com port 443: Operation timed out<br></code></pre></td></tr></table></figure><p>è§£å†³æ–¹æ³•ï¼š</p><p>åå¤å°è¯•</p><h3 id="ä¸‰ã€-ERROR-iOS-xcodebuild-Returned-an-unsuccessful-exit-code"><a href="#ä¸‰ã€-ERROR-iOS-xcodebuild-Returned-an-unsuccessful-exit-code" class="headerlink" title="ä¸‰ã€ - ERROR | [iOS] xcodebuild: Returned an unsuccessful exit code."></a>ä¸‰ã€ - ERROR | [iOS] xcodebuild: Returned an unsuccessful exit code.</h3><p>é—®é¢˜1ï¼š</p><p>åœ¨å¯¹podåº“è¿›è¡Œæ ¡éªŒæ‰§è¡Œ pod lib lint â€“verbose â€“allow-warnings çš„æ—¶å€™æŠ¥ä¸‹é¢é”™è¯¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs bash">- ERROR | [iOS] xcodebuild: Returned an unsuccessful <span class="hljs-built_in">exit</span> code. You can use `--verbose` <span class="hljs-keyword">for</span> more information.<br>- NOTE  | xcodebuild:  note: Using new build system<br>- NOTE  | [iOS] xcodebuild:  note: Planning build<br>- NOTE  | [iOS] xcodebuild:  note: Constructing build description<br><br>-----------------------------------<br><br>/Users/mac/.rvm/rubies/ruby-2.6.6/lib/ruby/gems/2.6.0/gems/cocoapods-1.10.1/lib/cocoapods/<span class="hljs-built_in">command</span>/repo/push.rb:150:<span class="hljs-keyword">in</span> `block <span class="hljs-keyword">in</span> validate_podspec_files<span class="hljs-string">&#x27;</span><br><span class="hljs-string">/Users/mac/.rvm/rubies/ruby-2.6.6/lib/ruby/gems/2.6.0/gems/cocoapods-1.10.1/lib/cocoapods/command/repo/push.rb:135:in `each&#x27;</span><br>/Users/mac/.rvm/rubies/ruby-2.6.6/lib/ruby/gems/2.6.0/gems/cocoapods-1.10.1/lib/cocoapods/<span class="hljs-built_in">command</span>/repo/push.rb:135:<span class="hljs-keyword">in</span> `validate_podspec_files<span class="hljs-string">&#x27;</span><br><span class="hljs-string">/Users/mac/.rvm/rubies/ruby-2.6.6/lib/ruby/gems/2.6.0/gems/cocoapods-1.10.1/lib/cocoapods/command/repo/push.rb:76:in `run&#x27;</span><br>/Users/mac/.rvm/rubies/ruby-2.6.6/lib/ruby/gems/2.6.0/gems/claide-1.0.3/lib/claide/command.rb:334:<span class="hljs-keyword">in</span> `run<span class="hljs-string">&#x27;</span><br><span class="hljs-string">/Users/mac/.rvm/rubies/ruby-2.6.6/lib/ruby/gems/2.6.0/gems/cocoapods-1.10.1/lib/cocoapods/command.rb:52:in `run&#x27;</span><br>/Users/mac/.rvm/rubies/ruby-2.6.6/lib/ruby/gems/2.6.0/gems/cocoapods-1.10.1/bin/pod:55:<span class="hljs-keyword">in</span> `&lt;top (required)&gt;<span class="hljs-string">&#x27;</span><br><span class="hljs-string">/usr/local/bin/pod:23:in `load&#x27;</span><br>/usr/<span class="hljs-built_in">local</span>/bin/pod:23:<span class="hljs-keyword">in</span> `&lt;main&gt;<span class="hljs-string">&#x27;</span><br><span class="hljs-string">/Users/mac/.rvm/rubies/ruby-2.6.6/bin/ruby_executable_hooks:22:in `eval&#x27;</span><br>/Users/mac/.rvm/rubies/ruby-2.6.6/bin/ruby_executable_hooks:22:<span class="hljs-keyword">in</span> `&lt;main&gt;<span class="hljs-string">&#x27;</span><br></code></pre></td></tr></table></figure><p>è§£å†³æ–¹æ³•ï¼š</p><p>æ·»åŠ å¯é€‰å‚æ•° â€“skip-import-validation </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">æ ¡éªŒï¼š<br>$ pod lib lint --use-libraries --verbose --allow-warnings --skip-import-validation<br>æäº¤ï¼š<br>$ pod repo push repoåº“ xxx.podspec --allow-warnings --use-libraries --verbose --skip-import-validation<br></code></pre></td></tr></table></figure><hr><p>é—®é¢˜2ï¼š</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202110141745287.png" alt="Cocoapods_æ ¡éªŒé—®é¢˜"></p><p>åŸå› ï¼šæ–‡ä»¶å¼•ç”¨æ–¹å¼ä¸å¯¹ï¼Œåœ¨æˆ‘çš„é¡¹ç›®ä¸­ ä¸åŒç»„ä»¶é—´ç”¨CTMediatorå…³è”èµ·æ¥ï¼Œè¿™é‡Œæˆ‘ç›´æ¥å¼•ç”¨äº†ï¼ˆä½¿ç”¨æ’é™¤æ³•å®šä½åˆ°å¼•ç”¨é”™è¯¯çš„æ–‡ä»¶çš„ï¼‰</p><p>è§£å†³æ–¹æ³•ï¼š</p><p>å»æ‰ç›´æ¥å¼•ç”¨æ”¹ç”¨CTMeditor å¼•ç”¨çš„æ–¹å¼ï¼ˆå¼€å§‹ä¸€ç›´æ˜¯æœ¬åœ°æ ¡éªŒæ²¡é—®é¢˜ï¼Œä¸Šä¼ ç»§ç»­å‡ºç°ä¹‹å‰çš„é—®é¢˜ï¼Œä½¿ç”¨pod cache list æ‰¾åˆ°è‡ªå·±çš„podåº“ï¼Œæ ¹æ®æç¤ºè·¯å¾„åˆ é™¤ç¼“å­˜æ–‡ä»¶ï¼Œä»æ–°ä¸Šä¼ å³å¯ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Cocoapods</category>
      
    </categories>
    
    
    <tags>
      
      <tag>iOS</tag>
      
      <tag>Cocoapods</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Cocoapodsç§æœ‰åº“çš„åˆ›å»ºä½¿ç”¨åŠæ›´æ–°</title>
    <link href="/2021/09/26/Cocoapods/Cocoapods%E7%A7%81%E6%9C%89%E5%BA%93%E7%9A%84%E5%88%9B%E5%BB%BA%E4%BD%BF%E7%94%A8%E5%8F%8A%E6%9B%B4%E6%96%B0/"/>
    <url>/2021/09/26/Cocoapods/Cocoapods%E7%A7%81%E6%9C%89%E5%BA%93%E7%9A%84%E5%88%9B%E5%BB%BA%E4%BD%BF%E7%94%A8%E5%8F%8A%E6%9B%B4%E6%96%B0/</url>
    
    <content type="html"><![CDATA[<h3 id="ä¸€ã€åˆ›å»ºä¸¤ä¸ªè¿œç¨‹ä»“åº“"><a href="#ä¸€ã€åˆ›å»ºä¸¤ä¸ªè¿œç¨‹ä»“åº“" class="headerlink" title="ä¸€ã€åˆ›å»ºä¸¤ä¸ªè¿œç¨‹ä»“åº“"></a><strong>ä¸€ã€åˆ›å»ºä¸¤ä¸ªè¿œç¨‹ä»“åº“</strong></h3><p>åˆ›å»ºä¸¤ä¸ªè¿œç¨‹ä»“åº“ä¸€ä¸ªç”¨æ¥åšä»“åº“ç´¢å¼•ï¼ˆTYQRepoï¼‰ï¼Œä¸€ä¸ªç”¨æ¥å­˜æ”¾æˆ‘ä»¬è‡ªå·±å†™çš„Podåº“ï¼ˆPodTestDemoï¼‰</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202110141737761.png" alt="Cocoapods_è¿œç¨‹ä»“åº“çš„åˆ›å»º"></p><h3 id="äºŒã€æ·»åŠ ç´¢å¼•åº“åˆ°æœ¬åœ°Repos"><a href="#äºŒã€æ·»åŠ ç´¢å¼•åº“åˆ°æœ¬åœ°Repos" class="headerlink" title="äºŒã€æ·»åŠ ç´¢å¼•åº“åˆ°æœ¬åœ°Repos"></a><strong>äºŒã€æ·»åŠ ç´¢å¼•åº“åˆ°æœ¬åœ°Repos</strong></h3><p>æˆ‘ä»¬å¯ä»¥åœ¨~/.cocoapods/Reposç›®å½•ä¸‹æŸ¥çœ‹åˆ°ä¸€ä¸ªmasteræ–‡ä»¶ï¼Œè¿™ä¸ªmasteræ–‡ä»¶å°±æ˜¯å­˜åœ¨æœ¬åœ°çš„cocoapodsçš„å®˜æ–¹ç´¢å¼•åº“ã€‚</p><p>æˆ‘ä»¬æŒ‰ç…§ä¸‹é¢å‘½ä»¤å°†TYQRepoç´¢å¼•åº“æ·»åŠ åˆ°æœ¬åœ°ã€‚ç„¶åæ‰§è¡ŒlsæŸ¥çœ‹æ˜¯å¦æ·»åŠ æˆåŠŸã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">cd</span> ~/.cocoapods/repos<br>$ pod repo add ã€ç´¢å¼•åº“åç§°ã€‘ã€ç´¢å¼•åº“åœ°å€ã€‘<br></code></pre></td></tr></table></figure><h3 id="ä¸‰ã€åˆ›å»ºå¹¶é…ç½®podspecæ–‡ä»¶"><a href="#ä¸‰ã€åˆ›å»ºå¹¶é…ç½®podspecæ–‡ä»¶" class="headerlink" title="ä¸‰ã€åˆ›å»ºå¹¶é…ç½®podspecæ–‡ä»¶"></a><strong>ä¸‰ã€åˆ›å»ºå¹¶é…ç½®podspecæ–‡ä»¶</strong></h3><ol><li><p>åˆ›å»ºpodspcæ–‡ä»¶</p><p>åœ¨æŒ‡å®šçš„æ–‡ä»¶è·¯å¾„ä¸‹é€šè¿‡<strong>pod lib create ã€podspecåå­—ã€‘</strong>åˆ›å»ºpodspcæ–‡ä»¶ï¼Œä»¥å¸¦exampleçš„ä¸ºä¾‹ï¼Œåˆ›å»ºè¿‡ç¨‹è¾“å‡ºå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">cd</span> /Users/mac/Desktop/TYQ<br>$ ls<br>$ pod lib create PodTestDemo<br>Cloning `https://github.com/CocoaPods/pod-template.git` into `PodTestDemo`.<br>Configuring PodTestDemo template.<br>security: SecKeychainSearchCopyNext: The specified item could not be found <span class="hljs-keyword">in</span> the keychain.<br><br>------------------------------<br><br>To get you started we need to ask a few questions, this should only take a minute.<br><br>If this is your first time we recommend running through with the guide:<br> - https://guides.cocoapods.org/making/using-pod-lib-create.html<br> ( hold cmd and double click links to open <span class="hljs-keyword">in</span> a browser. )<br><br>What platform <span class="hljs-keyword">do</span> you want to use?? [ iOS / macOS ]<br> &gt; ios<br><br>What language <span class="hljs-keyword">do</span> you want to use?? [ Swift / ObjC ]<br> &gt; objc<br><br>Would you like to include a demo application with your library? [ Yes / No ]<br> &gt; yes<br><br>Which testing frameworks will you use? [ Specta / Kiwi / None ]<br> &gt; none<br><br>Would you like to <span class="hljs-keyword">do</span> view based testing? [ Yes / No ]<br> &gt; yes<br><br>What is your class prefix?<br> &gt; TYQ<br>security: SecKeychainSearchCopyNext: The specified item could not be found <span class="hljs-keyword">in</span> the keychain.<br>security: SecKeychainSearchCopyNext: The specified item could not be found <span class="hljs-keyword">in</span> the keychain.<br>security: SecKeychainSearchCopyNext: The specified item could not be found <span class="hljs-keyword">in</span> the keychain.<br>security: SecKeychainSearchCopyNext: The specified item could not be found <span class="hljs-keyword">in</span> the keychain.<br>security: SecKeychainSearchCopyNext: The specified item could not be found <span class="hljs-keyword">in</span> the keychain.<br>security: SecKeychainSearchCopyNext: The specified item could not be found <span class="hljs-keyword">in</span> the keychain.<br><br>Running pod install on your new library.<br><br>Analyzing dependencies<br>Downloading dependencies<br>Installing FBSnapshotTestCase (2.1.4)<br>Installing PodTestDemo (0.1.0)<br>Generating Pods project<br>Integrating client project<br><br>[!] Please close any current Xcode sessions and use `PodTestDemo.xcworkspace` <span class="hljs-keyword">for</span> this project from now on.<br>Pod installation complete! There are 2 dependencies from the Podfile and 2 total pods installed.<br><br>[!] Your project does not explicitly specify the CocoaPods master specs repo. Since CDN is now used as the default, you may safely remove it from your repos directory via `pod repo remove master`. To suppress this warning please add `warn_for_unused_master_specs_repo =&gt; <span class="hljs-literal">false</span>` to your Podfile.<br><br> Ace! you<span class="hljs-string">&#x27;re ready to go!</span><br><span class="hljs-string"> We will start you off by opening your project in Xcode</span><br><span class="hljs-string">  open &#x27;</span>PodTestDemo/Example/PodTestDemo.xcworkspace<span class="hljs-string">&#x27;</span><br><span class="hljs-string"></span><br><span class="hljs-string">To learn more about the template see `https://github.com/CocoaPods/pod-template.git`.</span><br><span class="hljs-string">To learn more about creating a new pod, see `https://guides.cocoapods.org/making/making-a-cocoapod`.</span><br></code></pre></td></tr></table></figure></li></ol><h3 id="å››ã€æ·»åŠ ç»„ä»¶ä»£ç "><a href="#å››ã€æ·»åŠ ç»„ä»¶ä»£ç " class="headerlink" title="å››ã€æ·»åŠ ç»„ä»¶ä»£ç "></a>å››<strong>ã€æ·»åŠ ç»„ä»¶ä»£ç </strong></h3><ol><li><p>é…ç½®podspecæ–‡ä»¶</p><p>è¯·æ³¨æ„ä¸‹é¢ç¬¬ä¸€å¥è¯ <strong>Be sure to run `pod lib lint PodTestDemo.podspecâ€™ to ensure this is a valid spec before submitting.</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Be sure to run `po&#x27; to ensure this is a</span><br><span class="hljs-comment"># valid spec before submitting.</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Any lines starting with a # are optional, but their use is encouraged</span><br><span class="hljs-comment"># To learn more about a Podspec see https://guides.cocoapods.org/syntax/podspec.html</span><br><span class="hljs-comment">#</span><br><br>Pod::Spec.new <span class="hljs-keyword">do</span> |s|<br>  s.name Â  Â  Â  Â  Â  Â  = <span class="hljs-string">&#x27;PodTestDemo&#x27;</span><br>  s.version Â  Â  Â  Â  Â = <span class="hljs-string">&#x27;0.1.0&#x27;</span><br>  s.summary Â  Â  Â  Â  Â = <span class="hljs-string">&#x27;ç§æœ‰åº“åˆ›å»ºdemo&#x27;</span>//ç®€çŸ­æè¿°<br><br><span class="hljs-comment"># This description is used to generate tags and improve search results.</span><br><span class="hljs-comment"># Â  * Think: What does it do? Why did you write it? What is the focus?</span><br><span class="hljs-comment"># Â  * Try to keep it short, snappy and to the point.</span><br><span class="hljs-comment"># Â  * Write the description between the DESC delimiters below.</span><br><span class="hljs-comment"># Â  * Finally, don&#x27;t worry about the indent, CocoaPods strips it!</span><br><br>  s.description Â  Â  Â = &lt;&lt;-<span class="hljs-string">DESC</span><br><span class="hljs-string">TODO: Add long description of the pod here.</span><br><span class="hljs-string"> Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  DESC</span><br>  //ä¸»é¡µã€éœ€è¦å¡«å†™å¯ä»¥è®¿é—®çš„é“¾æ¥åœ°å€<br>  s.homepage Â  Â  Â  Â  = <span class="hljs-string">&#x27;https://gitee.com/tian-yanqing/projects&#x27;</span><br> Â <span class="hljs-comment"># s.screenshots Â  Â  = &#x27;www.example.com/screenshots_1&#x27;, &#x27;www.example.com/screenshots_2&#x27;</span><br>  //å¼€æºåè®®<br>  s.license Â  Â  Â  Â  Â = &#123; :<span class="hljs-built_in">type</span> =&gt; <span class="hljs-string">&#x27;MIT&#x27;</span>, :file =&gt; <span class="hljs-string">&#x27;LICENSE&#x27;</span> &#125;<br>  //ä½œè€…ä¿¡æ¯<br>  s.author Â  Â  Â  Â  Â  = &#123; <span class="hljs-string">&#x27;yanqingtian&#x27;</span> =&gt; <span class="hljs-string">&#x27;913498714@qq.com&#x27;</span> &#125;<br>  //<span class="hljs-built_in">source</span>æ˜¯æˆ‘ä»¬ç»„å»ºçš„gitåœ°å€<br>  s.source Â  Â  Â  Â  Â  = &#123; :git =&gt; <span class="hljs-string">&#x27;https://gitee.com/tian-yanqing/pod-test-demo.git&#x27;</span>, :tag =&gt; s.version.to_s &#125;<br>  //ç¤¾äº¤è´¦æˆ·<br> Â <span class="hljs-comment"># s.social_media_url = &#x27;https://twitter.com/&lt;TWITTER_USERNAME&gt;&#x27;</span><br>  //ä½¿ç”¨iOS9åŠä»¥ä¸Šç‰ˆæœ¬<br>  s.ios.deployment_target = <span class="hljs-string">&#x27;9.0&#x27;</span><br>  //æºæ–‡ä»¶ æä¾›ç»™ä»–äººä½¿ç”¨çš„æºæ–‡ä»¶<br>  s.source_files = <span class="hljs-string">&#x27;PodTestDemo/Classes/**/*&#x27;</span><br>  //èµ„æºæ–‡ä»¶åœ°å€<br> Â <span class="hljs-comment"># s.resource_bundles = &#123;</span><br> Â <span class="hljs-comment"># Â  &#x27;PodTestDemo&#x27; =&gt; [&#x27;PodTestDemo/Assets/*.png&#x27;]</span><br> Â <span class="hljs-comment"># &#125;</span><br>  //å…¬å…±å¤´æ–‡ä»¶åœ°å€<br> Â <span class="hljs-comment"># s.public_header_files = &#x27;Pod/Classes/**/*.h&#x27;</span><br>  //ä»¥æ¥çš„frameworks å¤šä¸ªç”¨é€—å·éš”å¼€<br> Â <span class="hljs-comment"># s.frameworks = &#x27;UIKit&#x27;, &#x27;MapKit&#x27;</span><br>  //ä¾èµ–ç¬¬ä¸‰æ–¹æ¡†æ¶<br> Â <span class="hljs-comment"># s.dependency &#x27;AFNetworking&#x27;, &#x27;~&gt; 2.3&#x27;</span><br>end<br><br></code></pre></td></tr></table></figure><p>ç¼–å†™å®Œæˆåæ‰§è¡Œ <strong>pod lib lint PodTestDemo.podspec</strong> è¿›è¡Œæ ¡éªŒï¼Œæ ¡éªŒæˆåŠŸæ˜¾ç¤ºå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"> $ pod lib lint PodTestDemo.podspec --allow-warnings<br>a<br> -&gt; PodTestDemo (0.1.0)<br> Â  Â - NOTE  | xcodebuild:  note: Using new build system<br> Â  Â - NOTE  | xcodebuild:  note: Building targets <span class="hljs-keyword">in</span> parallel<br> Â  Â - NOTE  | xcodebuild:  note: Using codesigning identity override: -<br> Â  Â - NOTE  | [iOS] xcodebuild:  note: Planning build<br> Â  Â - NOTE  | [iOS] xcodebuild:  note: Constructing build description<br> Â  Â - NOTE  | [iOS] xcodebuild:  warning: Skipping code signing because the target does not have an Info.plist file and one is not being generated automatically. (<span class="hljs-keyword">in</span> target <span class="hljs-string">&#x27;App&#x27;</span> from project <span class="hljs-string">&#x27;App&#x27;</span>)<br><br>PodTestDemo passed validation.<br></code></pre></td></tr></table></figure><p>åœ¨PodTestDemoâ€“&gt;Classesæ–‡ä»¶å°†replaceMe.mæ–‡ä»¶åˆ é™¤ï¼Œæ›¿æ¢æˆéœ€è¦æ·»åŠ çš„æ–‡ä»¶ã€‚æˆ‘ä»¬ä»¥TestViewControllerä¸ºä¾‹ã€‚</p><p><img src="https://raw.githubusercontent.com/GHTYQ/Timg/master/img/202110141739124.png" alt="Cocoapods_æ–‡ä»¶æ›¿æ¢"></p></li></ol><h3 id="äº”ã€æäº¤æœ¬åœ°podåº“ï¼ˆPodTestDemoï¼‰åˆ°è¿œç¨‹"><a href="#äº”ã€æäº¤æœ¬åœ°podåº“ï¼ˆPodTestDemoï¼‰åˆ°è¿œç¨‹" class="headerlink" title="äº”ã€æäº¤æœ¬åœ°podåº“ï¼ˆPodTestDemoï¼‰åˆ°è¿œç¨‹"></a>äº”<strong>ã€æäº¤æœ¬åœ°podåº“ï¼ˆPodTestDemoï¼‰åˆ°è¿œç¨‹</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">cd</span> /Users/mac/Desktop/TYQ/PodTestDemo<br>$ git init<br>$ git add .<br>$ git commit -m <span class="hljs-string">&quot;commit&quot;</span><br>$ git tag 0.1.0<br>$ git remote add origin [PodTestDemo Git URL]<br>$ git push -u origin master --tags<br></code></pre></td></tr></table></figure><h3 id="å…­ã€å°†podç§æœ‰åº“æ¨é€åˆ°ç´¢å¼•åº“é‡Œ"><a href="#å…­ã€å°†podç§æœ‰åº“æ¨é€åˆ°ç´¢å¼•åº“é‡Œ" class="headerlink" title="å…­ã€å°†podç§æœ‰åº“æ¨é€åˆ°ç´¢å¼•åº“é‡Œ"></a>å…­<strong>ã€å°†podç§æœ‰åº“æ¨é€åˆ°ç´¢å¼•åº“é‡Œ</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">cd</span> /Users/mac/Desktop/TYQ/PodTestDemo<br>$ pod repo push TYQRepos PodTestDemo.podspec<br><br>æ‰§è¡Œæ˜¾ç¤º<br>Validating spec<br>Username <span class="hljs-keyword">for</span> <span class="hljs-string">&#x27;https://gitee.com&#x27;</span>: tian-yanqing<br>Password <span class="hljs-keyword">for</span> <span class="hljs-string">&#x27;https://tian-yanqing@gitee.com&#x27;</span>:<br> -&gt; PodTestDemo (0.1.0)<br> Â  Â - NOTE  | xcodebuild:  note: Using new build system<br> Â  Â - NOTE  | xcodebuild:  note: Building targets <span class="hljs-keyword">in</span> parallel<br> Â  Â - NOTE  | xcodebuild:  note: Using codesigning identity override: -<br> Â  Â - NOTE  | [iOS] xcodebuild:  note: Planning build<br> Â  Â - NOTE  | [iOS] xcodebuild:  note: Constructing build description<br> Â  Â - NOTE  | [iOS] xcodebuild:  warning: Skipping code signing because the target does not have an Info.plist file and one is not being generated automatically. (<span class="hljs-keyword">in</span> target <span class="hljs-string">&#x27;App&#x27;</span> from project <span class="hljs-string">&#x27;App&#x27;</span>)<br><br>Updating the `TYQRepos<span class="hljs-string">&#x27; repo</span><br><span class="hljs-string"></span><br><span class="hljs-string">Adding the spec to the `TYQRepos&#x27;</span> repo<br><br> - [Add] PodTestDemo (0.1.0)<br><br>Pushing the `TYQRepos<span class="hljs-string">&#x27; repo</span><br></code></pre></td></tr></table></figure><h3 id="ä¸ƒã€podç§æœ‰åº“çš„ä½¿ç”¨"><a href="#ä¸ƒã€podç§æœ‰åº“çš„ä½¿ç”¨" class="headerlink" title="ä¸ƒã€podç§æœ‰åº“çš„ä½¿ç”¨"></a>ä¸ƒ<strong>ã€podç§æœ‰åº“çš„ä½¿ç”¨</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">source</span> <span class="hljs-string">&#x27;https://github.com/CocoaPods/Specs.git&#x27;</span><br><span class="hljs-built_in">source</span> <span class="hljs-string">&#x27;https://gitee.com/tian-yanqing/tyqrepos.git&#x27;</span><br>platform :ios,<span class="hljs-string">&#x27;9.0&#x27;</span><br>target <span class="hljs-string">&#x27;Test&#x27;</span> <span class="hljs-keyword">do</span><br>pod <span class="hljs-string">&#x27;PodTestDemo&#x27;</span><br>end<br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ol><li>Source åé¢æ˜¯è¿œç¨‹ç´¢å¼•åº“çš„åœ°å€</li><li>æ”¯æŒç‰ˆæœ¬ä¸èƒ½æ¯”podspecæ–‡ä»¶ä¸­é…ç½®çš„ç‰ˆæœ¬ä½</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">//å¼•ç”¨çš„æ—¶å€™å¡«å†™æ”¯æŒç‰ˆæœ¬è¿‡ä½å¯¼è‡´çš„é”™ä½<br>[!] CocoaPods could not find compatible versions <span class="hljs-keyword">for</span> pod <span class="hljs-string">&quot;PodTestDemo&quot;</span>:<br>  In Podfile:<br> Â   PodTestDemo<br>Specs satisfying the `PodTestDemo` dependency were found, but they required a higher minimum deployment target.<br></code></pre></td></tr></table></figure><ol><li>åœ¨åˆ¶ä½œswift ç‰ˆæœ¬ç§æœ‰åº“çš„æ—¶å€™ï¼Œéœ€è¦æš´éœ²çš„æ–¹æ³•å±æ€§ç­‰ï¼Œéœ€ç”¨publicä¿®é¥°ã€‚</li></ol><h3 id="å…«ã€podåº“çš„å‡çº§"><a href="#å…«ã€podåº“çš„å‡çº§" class="headerlink" title="å…«ã€podåº“çš„å‡çº§"></a>å…«<strong>ã€podåº“çš„å‡çº§</strong></h3><ol><li><p>å°†å¯¹podåº“çš„ä¿®æ”¹å†…å®¹æ¨é€åˆ°è¿œç¨‹podä»“åº“</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git add .<br>$ git commit -m<span class="hljs-string">&quot;podåº“å‡çº§åˆ°0.2.0&quot;</span><br>$ git push<br></code></pre></td></tr></table></figure></li><li><p>æäº¤æˆåŠŸåé‡æ–°æ‰“tag</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> git tag 0.2.0</span><br><span class="hljs-meta">$</span><span class="bash"> git push origin 0.2.0</span><br></code></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹podåº“æ¨¡æ¿å·¥ç¨‹ä¸­.podspecç‰ˆæœ¬å·ï¼Œä½¿s.versionå¯¹åº”çš„æ¤ä¸æœ€æ–°tagå€¼ä¿æŒä¸€è‡´</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">s.version = <span class="hljs-string">&#x27;0.2.0&#x27;</span><br></code></pre></td></tr></table></figure></li><li><p>å°†podåº“ä¸­.podspecæ¨é€åˆ°æœ¬åœ°ç´¢å¼•åº“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd åˆ°podæ¨¡æ¿åº“å·¥ç¨‹æ–‡ä»¶ä¸‹ï¼Œä½¿ç”¨å‘½ä»¤ï¼š<br><span class="hljs-meta">$</span><span class="bash"> pod repo push TYQRepos PodTestDemo.podspec</span><br>pod repo push ã€ç´¢å¼•åº“åã€‘ã€podåº“å.podspecã€‘<br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><p>ä½¿ç”¨æ–°å‡çº§åçš„podåº“installçš„æ—¶å€™ä½¿ç”¨å‘½ä»¤<strong>pod install â€“repo-update</strong></p></li></ol>]]></content>
    
    
    <categories>
      
      <category>Cocoapods</category>
      
    </categories>
    
    
    <tags>
      
      <tag>iOS</tag>
      
      <tag>Cocoapods</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Cocoapoodsçš„å®‰è£…åŠä½¿ç”¨</title>
    <link href="/2021/09/26/Cocoapods/Cocoapoods%E7%9A%84%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BD%BF%E7%94%A8/"/>
    <url>/2021/09/26/Cocoapods/Cocoapoods%E7%9A%84%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h3 id="ä¸€ã€Cocoapodsçš„å®‰è£…"><a href="#ä¸€ã€Cocoapodsçš„å®‰è£…" class="headerlink" title="ä¸€ã€Cocoapodsçš„å®‰è£…"></a>ä¸€ã€Cocoapodsçš„å®‰è£…</h3><p>CocoaPods is a dependency manager for Swift and Objective-C Cocoa projects. It has over 56 thousand libraries and is used in over 3 million apps. CocoaPods can help you scale your projects elegantly.<br><a href="https://cocoapods.org/">å®˜ç½‘åœ°å€</a></p><ol><li>æ›¿æ¢rubyæº</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">æŸ¥çœ‹å½“å‰rubyç¯å¢ƒ</span><br><span class="hljs-meta">$</span><span class="bash"> gem sources -l</span>  <br><span class="hljs-meta">#</span><span class="bash">é»˜è®¤æƒ…å†µä¸‹ä¼šè¿”å›å½“å‰Macé»˜è®¤çš„rubyæº</span><br><span class="hljs-meta">&gt;</span><span class="bash"> https://rubygems.org</span><br><span class="hljs-meta">#</span><span class="bash">æ›¿æ¢</span><br><span class="hljs-meta">$</span><span class="bash"> gem <span class="hljs-built_in">source</span> --remove https://rubygems.org</span><br><span class="hljs-meta">$</span><span class="bash"> gem <span class="hljs-built_in">source</span> -a https://gems.ruby-china.com //è¿™é‡Œéœ€è¦æ³¨æ„rubyæºåŸŸåå·²ç”±.orgæ›¿æ¢ä¸º.com</span><br><span class="hljs-meta">#</span><span class="bash">æ£€æŸ¥æ˜¯å¦æ›¿æ¢æˆåŠŸ</span><br><span class="hljs-meta">$</span><span class="bash"> gem sources -l</span> <br><span class="hljs-meta">&gt;</span><span class="bash"> https://gems.ruby-china.org //è¡¨ç¤ºæ›¿æ¢æˆåŠŸ</span><br></code></pre></td></tr></table></figure><p>2.å‡çº§gem</p><p>å‡çº§gemçš„ç›®çš„æ˜¯é¿å…å› ä¸ºgemç‰ˆæœ¬è¿‡ä½è€Œå‡ºç°ä¸€äº›ä¸å¿…è¦çš„é—®é¢˜</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">æŸ¥çœ‹å½“å‰gemç‰ˆæœ¬</span><br><span class="hljs-meta">$</span><span class="bash"> gem -v</span><br><span class="hljs-meta">#</span><span class="bash">å‡çº§</span><br><span class="hljs-meta">$</span><span class="bash"> sudo gem update --system</span><br></code></pre></td></tr></table></figure><p>3.å®‰è£…Cocoapods</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">Mac OS X 10.11å‰çš„æ–¹æ³•</span><br><span class="hljs-meta">$</span><span class="bash"> sudo gem install cocoapods</span>ã€€<br><span class="hljs-meta">#</span><span class="bash">Mac OS X 10.11åçš„æ–¹æ³•</span>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€<br><span class="hljs-meta">$</span><span class="bash"> sudo gem install -n /usr/<span class="hljs-built_in">local</span>/bin cocoapods</span>  <br><span class="hljs-meta">$</span><span class="bash"> pod setup</span> <br>//æ‰§è¡Œå®Œæˆåå¯åœ¨ä¸‹é¢ç›®å½•ä¸‹æŸ¥çœ‹ï¼š<br><span class="hljs-meta">$</span><span class="bash"> ~/.cocoapods/repos</span><br></code></pre></td></tr></table></figure><h3 id="äºŒã€Cocoapodsçš„ä½¿ç”¨"><a href="#äºŒã€Cocoapodsçš„ä½¿ç”¨" class="headerlink" title="äºŒã€Cocoapodsçš„ä½¿ç”¨"></a>äºŒã€Cocoapodsçš„ä½¿ç”¨</h3><p>åœ¨Terminal ä¸‹æ“ä½œ,cdåˆ°éœ€è¦æ·»åŠ ä¾èµ–çš„é¡¹ç›®ç›®å½•ä¸‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºPodfile</span><br>vi Podfile<br><span class="hljs-meta">#</span><span class="bash">ç¬¬äºŒæ­¥ï¼šç¼–è¾‘Podfile</span><br>platform:ios,&quot;9.0&quot;//å¹³å°ï¼Œæ”¯æŒçš„æœ€ä½ç‰ˆæœ¬å·<br>target &quot;xxxxx&quot; do //xxxxé¡¹ç›®å<br>pod â€œéœ€è¦ä¾èµ–çš„ç¬¬ä¸‰æ–¹åº“â€,&quot;~&gt; 1.0.2&quot;<br><span class="hljs-meta">#</span><span class="bash">æœ¬åœ°podçš„å¼•ç”¨</span><br>pod &quot;ä¸‰æ–¹åº“åç§°&quot;ï¼Œ:path =&gt; &#x27;æœ¬åœ°ä¸‰æ–¹åº“åº“è·¯å¾„&#x27;<br>end<br><span class="hljs-meta">#</span><span class="bash">ç¬¬ä¸‰éƒ¨ï¼šå¯¼å…¥ä¾èµ–</span><br><span class="hljs-meta">$</span><span class="bash"> pod install</span><br></code></pre></td></tr></table></figure><h3 id="ä¸‰ã€Cocoapodså¸è½½"><a href="#ä¸‰ã€Cocoapodså¸è½½" class="headerlink" title="ä¸‰ã€Cocoapodså¸è½½"></a>ä¸‰ã€Cocoapodså¸è½½</h3><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¸è½½cocoapods</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> sudo gem uninstall cocoapods</span><br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹æœ¬åœ°å®‰è£…cocoapodsç›¸å…³çš„ä¸œè¥¿</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> gem list --<span class="hljs-built_in">local</span> | grep cocoapods</span><br></code></pre></td></tr></table></figure><p>æˆ‘çš„æ˜¾ç¤ºæ˜¯è¿™æ ·çš„</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">cocoapods (1.5.3)<br>cocoapods-core (1.5.3)<br>cocoapods-deintegrate (1.0.5)<br>cocoapods-downloader (1.6.3)<br>cocoapods-plugins (1.0.0)<br>cocoapods-search (1.0.1)<br>cocoapods-stats (1.1.0)<br>cocoapods-trunk (1.6.0)<br>cocoapods-try (1.2.0)<br></code></pre></td></tr></table></figure><p>ä½¿ç”¨å‘½ä»¤é€ä¸ªåˆ é™¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> sudo gem uninstall cocoapods-core</span><br></code></pre></td></tr></table></figure><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul><li><a href="http://stevenwuzheng.com/archives/pods">macç”µè„‘å½»åº•åˆ é™¤cocoapodså¹¶é‡æ–°å®‰è£…</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>Cocoapods</category>
      
    </categories>
    
    
    <tags>
      
      <tag>iOS</tag>
      
      <tag>Cocoapods</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
